---
title: Document Manager Plugin
description: Manage PDF documents, open files from URLs or local files, track document state, and control which document is active. Required for all PDF viewers.
searchable: true
---

import { Callout } from '@/components/callout'

# Document Manager Plugin

The Document Manager Plugin is responsible for managing PDF documents in your viewer. It handles opening documents from URLs or local files, tracking document state (loading, loaded, error), and controlling which document is currently active.

This plugin is required for any PDF viewer, whether you're displaying a single document or multiple documents. It provides the foundation for document lifecycle management and enables features like tab interfaces for multi-document applications.

## Installation

The plugin is available as a separate NPM package.

```sh npm2yarn
npm install @embedpdf/plugin-document-manager
````

## Registration

Import `DocumentManagerPluginPackage` and add it to the `plugins` array. You can configure initial documents to load automatically when the plugin initializes.

```tsx {4, 7-16}
import { createPluginRegistration } from '@embedpdf/core'
import { EmbedPDF } from '@embedpdf/core/react'
// ... other imports
import { DocumentManagerPluginPackage } from '@embedpdf/plugin-document-manager/react'

const plugins = [
  // Register the document manager plugin first
  createPluginRegistration(DocumentManagerPluginPackage, {
    // Optional: Load documents automatically on initialization
    initialDocuments: [
      { url: 'https://example.com/document1.pdf' },
      { url: 'https://example.com/document2.pdf' },
    ],
    // Optional: Limit the maximum number of open documents
    maxDocuments: 10,
  }),
  // ... other plugins like Viewport, Scroll, Render, etc.
  createPluginRegistration(ViewportPluginPackage),
  createPluginRegistration(ScrollPluginPackage),
  createPluginRegistration(RenderPluginPackage),
]
```

## Usage

The plugin provides hooks for managing documents and components for rendering document content and building tab interfaces.

### Getting the Active Document

The `<EmbedPDF>` component's children function provides `activeDocumentId` which you can use to determine which document is currently active.

```tsx
<EmbedPDF engine={engine} plugins={plugins}>
  {({ activeDocumentId }) =>
    activeDocumentId && (
      <DocumentContent documentId={activeDocumentId}>
        {({ isLoaded }) => isLoaded && <Viewer documentId={activeDocumentId} />}
      </DocumentContent>
    )
  }
</EmbedPDF>
```

### Using DocumentContent Component

The `<DocumentContent />` component provides a convenient way to handle document loading states. It wraps your document viewer and provides loading, error, and loaded states.

```tsx
import { DocumentContent } from '@embedpdf/plugin-document-manager/react'

<DocumentContent documentId={activeDocumentId}>
  {({ documentState, isLoading, isError, isLoaded }) => {
    if (isLoading) {
      return <div>Loading document...</div>
    }
    if (isError) {
      return <div>Error: {documentState.errorMessage}</div>
    }
    if (isLoaded) {
      return <Viewport documentId={activeDocumentId}>...</Viewport>
    }
    return null
  }}
</DocumentContent>
```

### Opening Documents

Use the `useDocumentManagerCapability` hook to access methods for opening documents from URLs, buffers, or local files.

#### Opening from URL

```tsx
import { useDocumentManagerCapability } from '@embedpdf/plugin-document-manager/react'
import { Rotation } from '@embedpdf/models'

export const OpenUrlButton = () => {
  const { provides } = useDocumentManagerCapability()

  const handleOpenUrl = () => {
    provides?.openDocumentUrl({
      url: 'https://example.com/document.pdf',
      // Optional options:
      documentId: 'custom-doc-id', // Custom document ID (auto-generated if not provided)
      password: 'my-password', // Password if document is protected
      mode: 'auto', // 'auto' | 'range-request' | 'full-fetch'
      scale: 1.0, // Initial scale factor
      rotation: Rotation.Degree0, // Initial rotation
      autoActivate: true, // Whether to activate this document when opened (default: true)
      requestOptions: {
        // Custom fetch options
        headers: { 'Authorization': 'Bearer token' },
      },
    })
  }

  return <button onClick={handleOpenUrl}>Open from URL</button>
}
```

#### Opening from Buffer

```tsx
import { useDocumentManagerCapability } from '@embedpdf/plugin-document-manager/react'
import { Rotation } from '@embedpdf/models'

export const OpenBufferButton = () => {
  const { provides } = useDocumentManagerCapability()

  const handleOpenBuffer = async () => {
    // Example: Load a file from input
    const fileInput = document.createElement('input')
    fileInput.type = 'file'
    fileInput.accept = '.pdf'
    
    fileInput.onchange = async (e) => {
      const file = (e.target as HTMLInputElement).files?.[0]
      if (!file) return

      // Read file as ArrayBuffer
      const arrayBuffer = await file.arrayBuffer()

      provides?.openDocumentBuffer({
        buffer: arrayBuffer,
        name: file.name,
        // Optional options:
        documentId: 'custom-doc-id', // Custom document ID (auto-generated if not provided)
        password: 'my-password', // Password if document is protected
        scale: 1.0, // Initial scale factor
        rotation: Rotation.Degree0, // Initial rotation
        autoActivate: true, // Whether to activate this document when opened (default: true)
      })
    }

    fileInput.click()
  }

  return <button onClick={handleOpenBuffer}>Open File</button>
}
```

#### Opening from File Dialog

The `openFileDialog` method opens the browser's native file picker:

```tsx
import { useDocumentManagerCapability } from '@embedpdf/plugin-document-manager/react'
import { Rotation } from '@embedpdf/models'

export const OpenFileDialogButton = () => {
  const { provides } = useDocumentManagerCapability()

  const handleOpenFile = () => {
    const task = provides?.openFileDialog({
      // Optional options:
      documentId: 'custom-doc-id', // Custom document ID (auto-generated if not provided)
      scale: 1.0, // Initial scale factor
      rotation: Rotation.Degree0, // Initial rotation
      autoActivate: true, // Whether to activate this document when opened (default: true)
    })
    
    // Optional: Handle the task result
    task?.wait(
      (response) => {
        console.log('Document opened:', response.documentId)
      },
      (error) => {
        console.error('Failed to open document:', error)
      },
    )
  }

  return <button onClick={handleOpenFile}>Open File</button>
}
```

#### Options Reference

**`openDocumentUrl` Options:**

| Option | Type | Description |
| :--- | :--- | :--- |
| **`url`** | `string` | **(Required)** The URL of the PDF document to load. |
| **`documentId`** | `string` | Optional custom document ID. If not provided, a unique ID will be generated. |
| **`password`** | `string` | Password for password-protected documents. |
| **`mode`** | `'auto' \| 'range-request' \| 'full-fetch'` | Loading mode. `'auto'` lets the engine decide, `'range-request'` uses HTTP range requests, `'full-fetch'` downloads the entire file first. |
| **`requestOptions`** | `PdfRequestOptions` | Custom fetch options (headers, credentials, etc.). |
| **`scale`** | `number` | Initial scale factor for the document. |
| **`rotation`** | `Rotation` | Initial rotation for the document. |
| **`autoActivate`** | `boolean` | Whether to make this document active when opened. Default: `true`. |

**`openDocumentBuffer` Options:**

| Option | Type | Description |
| :--- | :--- | :--- |
| **`buffer`** | `ArrayBuffer` | **(Required)** The PDF file content as an ArrayBuffer. |
| **`name`** | `string` | **(Required)** The name of the document (used for display). |
| **`documentId`** | `string` | Optional custom document ID. If not provided, a unique ID will be generated. |
| **`password`** | `string` | Password for password-protected documents. |
| **`scale`** | `number` | Initial scale factor for the document. |
| **`rotation`** | `Rotation` | Initial rotation for the document. |
| **`autoActivate`** | `boolean` | Whether to make this document active when opened. Default: `true`. |

**`OpenFileDialogOptions`:**

| Option | Type | Description |
| :--- | :--- | :--- |
| **`documentId`** | `string` | Optional custom document ID. If not provided, a unique ID will be generated. |
| **`scale`** | `number` | Initial scale factor for the document. |
| **`rotation`** | `Rotation` | Initial rotation for the document. |
| **`autoActivate`** | `boolean` | Whether to make this document active when opened. Default: `true`. |

<Callout type="info">
When opening a document with a known password, you can provide it directly in the options. If the password is incorrect or not provided, the document will enter an error state and you can use `retryDocument` to try again with a different password.
</Callout>

## Live Examples

### Multi-Document Viewer with Tabs

This example demonstrates a complete PDF viewer with a tab bar for managing multiple documents. You can open multiple PDFs, switch between them using tabs, and close documents.

import { PDFViewer } from '../code-examples/document-manager-example'

<CodeExample 
  codePaths={[
    "content/docs/react/code-examples/document-manager-example.tsx"
  ]}
>
  <PDFViewer />
</CodeExample>

### Password-Protected Document

This example shows how to handle password-protected documents. When you open a protected PDF, you'll be prompted to enter the password. The example demonstrates detecting password errors, retrying with a password, and handling incorrect password attempts.

<Callout type="info">
Try entering an incorrect password first to see the error handling, then enter the correct password to open the document.
</Callout>

import { PDFViewer as PasswordPDFViewer } from '../code-examples/password-example'

<CodeExample 
  codePaths={[
    "content/docs/react/code-examples/document-manager-example.tsx"
  ]}
>
  <PasswordPDFViewer />
</CodeExample>

## API Reference

### Configuration (`DocumentManagerPluginConfig`)

You can pass these options when registering the plugin with `createPluginRegistration`:

| Option | Type | Description |
| :--- | :--- | :--- |
| **`initialDocuments`** | `InitialDocumentOptions[]` | An array of documents to load automatically when the plugin initializes. Each item can be either `{ url: string, documentId?: string, ... }` or `{ buffer: ArrayBuffer, name: string, documentId?: string, ... }`. |
| **`maxDocuments`** | `number` | The maximum number of documents that can be open simultaneously. If not specified, there is no limit. |

### Hook: `useDocumentManagerCapability()`

This hook provides access to all document management operations.

#### Returns

| Property | Type | Description |
| :--- | :--- | :--- |
| **`provides`** | `DocumentManagerCapability \| null` | An object with methods to manage documents, or `null` if the plugin is not ready. |

#### `DocumentManagerCapability` Methods

| Method | Description |
| :--- | :--- |
| **`openDocumentUrl(options)`** | Opens a document from a URL. Returns a `Task<OpenDocumentResponse, PdfErrorReason>`. |
| **`openDocumentBuffer(options)`** | Opens a document from an `ArrayBuffer`. Returns a `Task<OpenDocumentResponse, PdfErrorReason>`. |
| **`openFileDialog(options?)`** | Opens the browser's native file picker. Returns a `Task<OpenDocumentResponse, PdfErrorReason>`. |
| **`closeDocument(documentId)`** | Closes a specific document. Returns a `Task<void, PdfErrorReason>`. |
| **`closeAllDocuments()`** | Closes all open documents. Returns a `Task<void[], PdfErrorReason>`. |
| **`setActiveDocument(documentId)`** | Sets the active document. Throws an error if the document is not open. |
| **`getActiveDocumentId()`** | Returns the ID of the currently active document, or `null` if none. |
| **`getActiveDocument()`** | Returns the `PdfDocumentObject` of the active document, or `null` if none. |
| **`getDocumentOrder()`** | Returns an array of document IDs in their current tab order. |
| **`moveDocument(documentId, toIndex)`** | Moves a document to a specific position in the tab order. |
| **`swapDocuments(documentId1, documentId2)`** | Swaps the positions of two documents in the tab order. |
| **`getDocument(documentId)`** | Returns the `PdfDocumentObject` for a specific document, or `null` if not found. |
| **`getDocumentState(documentId)`** | Returns the `DocumentState` for a specific document, or `null` if not found. |
| **`getOpenDocuments()`** | Returns an array of all open `DocumentState` objects in tab order. |
| **`isDocumentOpen(documentId)`** | Returns `true` if the document is currently open. |
| **`getDocumentCount()`** | Returns the number of currently open documents. |
| **`getDocumentIndex(documentId)`** | Returns the index of a document in the tab order, or `-1` if not found. |
| **`retryDocument(documentId, options?)`** | Retries loading a document that failed to load (e.g., with a new password). Returns a `Task<OpenDocumentResponse, PdfErrorReason>`. |

### Hook: `useActiveDocument()`

A convenience hook for accessing the active document.

#### Returns

| Property | Type | Description |
| :--- | :--- | :--- |
| **`activeDocumentId`** | `string \| null` | The ID of the currently active document. |
| **`activeDocument`** | `DocumentState \| null` | The state of the currently active document. |

### Hook: `useOpenDocuments(documentIds?)`

A hook for accessing all open documents.

#### Returns

| Property | Type | Description |
| :--- | :--- | :--- |
| **`documentStates`** | `DocumentState[]` | An array of all open documents in tab order. If `documentIds` is provided, returns only those documents in the specified order. |

### Component: `<DocumentContent />`

A headless component that provides loading, error, and loaded states for a specific document.

#### Props

| Prop | Type | Description |
| :--- | :--- | :--- |
| **`documentId`** | `string \| null` | **(Required)** The ID of the document to render content for. |
| **`children`** | `(props: DocumentContentRenderProps) => ReactNode` | **(Required)** A render prop function that receives document state information. |

#### `DocumentContentRenderProps`

| Property | Type | Description |
| :--- | :--- | :--- |
| **`documentState`** | `DocumentState` | The full state object for the document. |
| **`isLoading`** | `boolean` | `true` if the document is currently loading. |
| **`isError`** | `boolean` | `true` if the document failed to load. |
| **`isLoaded`** | `boolean` | `true` if the document has loaded successfully. |

### Events

The plugin emits events that you can subscribe to for reacting to document lifecycle changes:

| Event | Type | Description |
| :--- | :--- | :--- |
| **`onDocumentOpened`** | `EventHook<DocumentState>` | Emitted when a document is successfully loaded. |
| **`onDocumentClosed`** | `EventHook<string>` | Emitted when a document is closed. The payload is the document ID. |
| **`onActiveDocumentChanged`** | `EventHook<DocumentChangeEvent>` | Emitted when the active document changes. |
| **`onDocumentOrderChanged`** | `EventHook<DocumentOrderChangeEvent>` | Emitted when documents are reordered. |
| **`onDocumentError`** | `EventHook<DocumentErrorEvent>` | Emitted when a document fails to load. |

