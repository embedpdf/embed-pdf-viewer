---
title: View Manager Plugin
description: Manage multi-view layouts, split-screens, and document tab groups within your Svelte viewer.
searchable: true
---

# View Manager Plugin

The View Manager Plugin adds advanced layout capabilities to your application. It allows you to organize documents into distinct **Views** (panes), enabling features like split-screen comparisons, tabbed groups, and multi-monitor style layouts.

While the `DocumentManager` handles the lifecycle of loading and closing files, the `ViewManager` handles *where* those files are displayed and which one is currently visible to the user.

## Installation

The plugin is available as a separate NPM package.

```sh npm2yarn
npm install @embedpdf/plugin-view-manager @embedpdf/plugin-document-manager
````

## Registration

Import `ViewManagerPluginPackage` and add it to your plugin configuration.

```typescript {10-12}
import { createPluginRegistration } from '@embedpdf/core';
import { DocumentManagerPluginPackage } from '@embedpdf/plugin-document-manager/svelte';
import { ViewManagerPluginPackage } from '@embedpdf/plugin-view-manager/svelte';

const plugins = [
  // ... other plugins
  createPluginRegistration(DocumentManagerPluginPackage),
  
  // Register View Manager
  createPluginRegistration(ViewManagerPluginPackage, {
    defaultViewCount: 1, // Start with one main view
  }),
];
```

## Core Concepts

To effectively use this plugin, it helps to understand the hierarchy:

1.  **View Manager:** The global controller that holds the list of all views.
2.  **View:** A specific layout container (e.g., a div in a CSS Grid). It holds a list of `documentIds`.
3.  **Active Document:** Each View has exactly one *active* document visible at a time.
4.  **Focused View:** The View currently receiving user input.

## Usage

The View Manager is primarily used to build **Split Layouts** or **Tabbed Interfaces**. The plugin provides a `ViewContext` component that simplifies managing state for individual views.

### 1. The `<ViewContext />` Component

This is a headless component that connects a specific `viewId` to the plugin state. It provides all necessary data (documents list, active document) to render that specific view.

```svelte
<script lang="ts">
import { ViewContext } from '@embedpdf/plugin-view-manager/svelte';

let { viewId }: { viewId: string } = $props();
</script>

<ViewContext {viewId}>
  {#snippet children({ documentIds, activeDocumentId, setActiveDocument, isFocused, focus })}
    <div 
      class:focused={isFocused}
      onclick={focus}
    >
      <!-- Render Tabs -->
      <div class="tabs">
        {#each documentIds as docId}
          <button
            onclick={() => setActiveDocument(docId)}
            class:active={docId === activeDocumentId}
          >
            {docId}
          </button>
        {/each}
      </div>

      <!-- Render Active Document Content -->
      {#if activeDocumentId}
        <MyDocumentRenderer documentId={activeDocumentId} />
      {/if}
    </div>
  {/snippet}
</ViewContext>
```

### 2. Building a Split View Layout

To create a dynamic layout, use the `useAllViews` store to iterate over available views and render them.

```svelte
<script lang="ts">
import { useAllViews } from '@embedpdf/plugin-view-manager/svelte';

const views = useAllViews();

// Simple grid based on number of views
const gridClass = $derived(views.current.length > 1 ? 'grid-cols-2' : 'grid-cols-1');
</script>

<div class="grid h-full {gridClass} gap-4">
  {#each views.current as view (view.id)}
    <MyViewPane viewId={view.id} />
  {/each}
</div>
```

### 3. Opening Documents into Views

When you open a document using the `DocumentManager`, it exists in memory but isn't visible yet. You must assign it to a View using the `ViewManager`.

```svelte
<script lang="ts">
import { useDocumentManagerCapability } from '@embedpdf/plugin-document-manager/svelte';
import { useViewManagerCapability } from '@embedpdf/plugin-view-manager/svelte';

const docManager = useDocumentManagerCapability();
const viewManager = useViewManagerCapability();

const handleOpen = async () => {
  if (!docManager.provides || !viewManager.provides) return;
  
  // 1. Open the file in the engine
  const task = docManager.provides.openFileDialog();
  const result = await task.toPromise();

  // 2. Get the currently focused view (or the first one)
  const targetViewId = viewManager.provides.getFocusedViewId() || viewManager.provides.getAllViews()[0].id;

  // 3. Add the document to that view
  viewManager.provides.addDocumentToView(targetViewId, result.documentId);
  
  // 4. Make it visible immediately
  viewManager.provides.setViewActiveDocument(targetViewId, result.documentId);
};
</script>

<button onclick={handleOpen}>Open File</button>
```

## Live Example

This example demonstrates a split-view PDF viewer. Two views are created on initialization, each containing a document. You can add more panes (up to 3), switch between documents using the tab bar in each pane, and open additional files. Each view maintains its own state—zoom, scroll position, and active document—independently.

import { ViewManagerExample } from '../code-examples/view-manager-example'

<CodeExample 
  codePaths={[
    "../../examples/svelte-tailwind/src/examples/view-manager-example.svelte",
    "../../examples/svelte-tailwind/src/examples/view-manager-example-content.svelte",
    "../../examples/svelte-tailwind/src/examples/view-manager-example-tab-bar.svelte"
  ]}
>
  <ViewManagerExample />
</CodeExample>

## API Reference

### Configuration (`ViewManagerPluginConfig`)

| Option | Type | Description |
| :--- | :--- | :--- |
| **`defaultViewCount`** | `number` | The number of views to create automatically when the plugin initializes. <br />**Default**: `1` |

### Store: `useViewManagerCapability()`

Provides global control over the view system.

#### `ViewManagerCapability` Methods

| Method | Description |
| :--- | :--- |
| **`createView(viewId?)`** | Creates a new view container. Returns the `viewId`. |
| **`removeView(viewId)`** | Removes a view container. Documents inside are detached from the view (but remain open in DocumentManager). |
| **`addDocumentToView(...)`** | Assigns a document ID to a specific view. <br />`addDocumentToView(viewId, docId, index?)` |
| **`removeDocumentFromView(...)`** | Removes a document from a specific view. |
| **`setViewActiveDocument(...)`** | Sets which document is currently visible in a specific view. |
| **`moveDocumentBetweenViews(...)`** | Moves a document tab from one view to another. |
| **`setFocusedView(viewId)`** | Sets the global application focus to a specific view. |
| **`getAllViews()`** | Returns an array of all `View` objects. |

### Store: `useView(viewId)`

Returns the state for a specific view.

#### Parameters

| Parameter | Type | Description |
| :--- | :--- | :--- |
| **`viewId`** | `() => string` | A getter function that returns the view ID to track. |

#### Returns (`View | null`)

| Property | Type | Description |
| :--- | :--- | :--- |
| **`id`** | `string` | The unique ID of the view. |
| **`documentIds`** | `string[]` | Array of document IDs assigned to this view. |
| **`activeDocumentId`** | `string \| null` | The ID of the currently visible document. |

### Store: `useAllViews()`

Returns a reactive object containing all views.

#### Returns

| Property | Type | Description |
| :--- | :--- | :--- |
| **`current`** | `View[]` | An array of all view objects. Access via `.current` property. |

### Component: `<ViewContext />`

A headless provider that exposes data and actions for a specific view via a snippet.

#### Props

| Prop | Type | Description |
| :--- | :--- | :--- |
| **`viewId`** | `string` | **(Required)** The ID of the view to render. |

#### Snippet Props

| Prop | Type | Description |
| :--- | :--- | :--- |
| **`view`** | `View` | The view object. |
| **`documentIds`** | `string[]` | List of documents in this view. |
| **`activeDocumentId`** | `string` | The currently active document. |
| **`isFocused`** | `boolean` | True if this view currently has focus. |
| **`focus`** | `() => void` | Helper to set focus to this view. |
| **`addDocument`** | `(id) => void` | Helper to add a doc to this view. |
| **`removeDocument`** | `(id) => void` | Helper to remove a doc from this view. |
| **`setActiveDocument`**| `(id) => void` | Helper to switch the active tab. |

