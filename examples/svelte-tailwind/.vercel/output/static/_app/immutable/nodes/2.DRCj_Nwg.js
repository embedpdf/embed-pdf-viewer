import"../chunks/NZTpNUN0.js";import{bq as xt,aE as ke,t as yt,R as wt,e as Ye,N as _t,br as za,aP as be,u as F,G as Z,ax as R,aB as D,y as de,A as re,q as h,C as y,H as q,D as S,E as O,J as f,aC as B,a$ as Le,b0 as Pt,I as m,B as Xe,F as Ke,aX as xe,K as b,a6 as ue,a_ as Ea,aZ as La}from"../chunks/i0-F6fyi.js";import{p as ye,i as N,r as Fe,b as Te}from"../chunks/CJHWDyO9.js";import{c as Y,d as St,b as se,a as He,s as kt,S as $a,r as ce,e as Aa,f as Me}from"../chunks/8PSIAql6.js";import{K as oe,a5 as Ie,L as J,ak as Fa,al as Ha,S as Mt,O as $e,am as Da,an as Oa,ao as ja,X as le,ap as Rt,i as ze,aq as Na,ar as Za,as as qa,_ as ge,a as Re,at as gt,au as Ua,$ as _e,P as Ce,T as Ct,av as De,aw as Wa,ax as Ba,a1 as we,ay as Tt,a0 as Je,az as Va,aA as Ga,aB as Qe,aC as Ya,M as Ae,ab as Xa,ac as Ka,aD as Ja,ad as X,ae as Qa,af as ei,ag as ti,ah as ai,aj as ii,ai as ri,a6 as ni,a7 as si,a8 as oi,a9 as li,aa as ci}from"../chunks/2PxcrNm-.js";import{s as ie}from"../chunks/DvitKH49.js";import{i as di}from"../chunks/DlEPbKaS.js";function It(a,e,t=e){var i=new WeakSet;xt(a,"input",async r=>{var n=r?a.defaultValue:a.value;if(n=Ue(a)?We(n):n,t(n),ke!==null&&i.add(ke),await yt(),n!==(n=e())){var s=a.selectionStart,o=a.selectionEnd;a.value=n??"",o!==null&&(a.selectionStart=s,a.selectionEnd=Math.min(o,a.value.length))}}),(wt&&a.defaultValue!==a.value||Ye(e)==null&&a.value)&&(t(Ue(a)?We(a.value):a.value),ke!==null&&i.add(ke)),_t(()=>{var r=e();if(a===document.activeElement){var n=za??ke;if(i.has(n))return}Ue(a)&&r===We(a.value)||a.type==="date"&&!r&&!a.value||r!==a.value&&(a.value=r??"")})}function hi(a,e,t=e){xt(a,"change",i=>{var r=i?a.defaultChecked:a.checked;t(r)}),(wt&&a.defaultChecked!==a.checked||Ye(e)==null)&&t(a.checked),_t(()=>{var i=e();a.checked=!!i})}function Ue(a){var e=a.type;return e==="number"||e==="range"}function We(a){return a===""?null:+a}var Q=(a=>(a.Automatic="automatic",a.FitPage="fit-page",a.FitWidth="fit-width",a))(Q||{}),me=(a=>(a[a.Center=0]="Center",a[a.Top=1]="Top",a))(me||{});const zt="zoom",ui={id:zt,name:"Zoom Plugin",version:"1.0.0",provides:["zoom"],requires:["viewport","scroll"],optional:["interaction-manager"],defaultConfig:{enabled:!0,defaultZoomLevel:Q.Automatic,minZoom:.2,maxZoom:60,zoomStep:.1,zoomRanges:[{min:.2,max:.5,step:.05},{min:.5,max:1,step:.1},{min:1,max:2,step:.2},{min:2,max:4,step:.4},{min:4,max:10,step:.8},{min:10,max:20,step:1.6},{min:20,max:40,step:3.2},{min:40,max:60,step:6.4}],presets:[{name:"Fit Page",value:Q.FitPage},{name:"Fit Width",value:Q.FitWidth},{name:"Automatic",value:Q.Automatic},{name:"25%",value:.25},{name:"50%",value:.5},{name:"100%",value:1},{name:"125%",value:1.25},{name:"150%",value:1.5},{name:"200%",value:2},{name:"400%",value:4},{name:"800%",value:8},{name:"1600%",value:16}]}},Et="SET_ZOOM_LEVEL",Lt="SET_INITIAL_ZOOM_LEVEL";function gi(a,e){return{type:Et,payload:{zoomLevel:a,currentZoomLevel:e}}}function pi(a){return{type:Lt,payload:{zoomLevel:a}}}const et={zoomLevel:Q.Automatic,currentZoomLevel:1},vi=(a=et,e)=>{switch(e.type){case Et:return{...a,zoomLevel:e.payload.zoomLevel,currentZoomLevel:e.payload.currentZoomLevel};case Lt:return{...a,zoomLevel:e.payload.zoomLevel};default:return a}};function fi(a){const{pageSize:e,scale:t,minDragPx:i=5,onPreview:r,onCommit:n,onSmallDrag:s}=a;let o=null,d=null;return{onPointerDown:(c,u)=>{o=c,d={origin:{x:c.x,y:c.y},size:{width:0,height:0}},r?.(d),u.setPointerCapture?.()},onPointerMove:c=>{if(!o)return;const u=$e(c.x,0,e.width),g=$e(c.y,0,e.height);d={origin:{x:Math.min(o.x,u),y:Math.min(o.y,g)},size:{width:Math.abs(u-o.x),height:Math.abs(g-o.y)}},r?.(d)},onPointerUp:(c,u)=>{d&&(Math.max(d.size.width,d.size.height)*t>i?n?.(d):s?.()),o=null,d=null,r?.(null),u.releasePointerCapture?.()},onPointerCancel:(c,u)=>{o=null,d=null,r?.(null),u.releasePointerCapture?.()}}}const $t=class extends oe{constructor(e,t,i){super(e,t),this.zoom$=Ie(),this.state$=J(),this.viewportPlugin=t.getPlugin("viewport"),this.viewport=this.viewportPlugin.provides(),this.scroll=t.getPlugin("scroll").provides();const r=t.getPlugin("interaction-manager");this.interactionManager=r?.provides()??null,this.minZoom=i.minZoom??.25,this.maxZoom=i.maxZoom??10,this.zoomStep=i.zoomStep??.1,this.presets=i.presets??[],this.zoomRanges=this.normalizeRanges(i.zoomRanges??[]),this.dispatch(pi(i.defaultZoomLevel)),this.viewport.onViewportResize(()=>this.recalcAuto(me.Top),{mode:"debounce",wait:150}),this.coreStore.onAction(Fa,()=>this.recalcAuto(me.Top)),this.coreStore.onAction(Ha,()=>this.recalcAuto(me.Top)),this.coreStore.onAction(Mt,()=>this.recalcAuto(me.Top)),this.interactionManager?.registerMode({id:"marqueeZoom",scope:"page",exclusive:!0,cursor:"zoom-in"}),this.resetReady()}buildCapability(){return{onZoomChange:this.zoom$.on,onStateChange:this.state$.on,zoomIn:()=>this.zoomIn(),zoomOut:()=>this.zoomOut(),zoomToArea:(e,t)=>this.zoomToArea(e,t),requestZoom:(e,t)=>this.handleRequest({level:e,center:t}),requestZoomBy:(e,t)=>{const i=this.state.currentZoomLevel,r=this.toZoom(i+e);return this.handleRequest({level:r,center:t})},enableMarqueeZoom:()=>{this.interactionManager?.activate("marqueeZoom")},disableMarqueeZoom:()=>{this.interactionManager?.activateDefaultMode()},toggleMarqueeZoom:()=>{this.interactionManager?.getActiveMode()==="marqueeZoom"?this.interactionManager?.activateDefaultMode():this.interactionManager?.activate("marqueeZoom")},isMarqueeZoomActive:()=>this.interactionManager?.getActiveMode()==="marqueeZoom",registerMarqueeOnPage:e=>this.registerMarqueeOnPage(e),getState:()=>this.state,getPresets:()=>this.presets}}zoomOut(){const e=this.state.currentZoomLevel;return this.handleRequest({level:e,delta:-this.stepFor(e)})}zoomIn(){const e=this.state.currentZoomLevel;return this.handleRequest({level:e,delta:this.stepFor(e)})}zoomToArea(e,t){this.handleZoomToArea(e,t)}async initialize(){this.markReady()}async destroy(){this.zoom$.clear()}normalizeRanges(e){return[...e].filter(t=>t.step>0&&t.max>t.min).sort((t,i)=>t.min-i.min)}stepFor(e){const t=this.zoomRanges.find(i=>e>=i.min&&e<i.max);return t?t.step:this.zoomStep}toZoom(e){return parseFloat($e(e,this.minZoom,this.maxZoom).toFixed(2))}handleRequest({level:e,delta:t=0,center:i,focus:r=me.Center,align:n="keep"}){const s=this.viewport.getMetrics(),o=this.state.currentZoomLevel;if(s.clientWidth===0||s.clientHeight===0)return;const d=typeof e=="number"?e:this.computeZoomForMode(e,s);if(d===!1)return;const c=$e(d+t,this.minZoom,this.maxZoom),u=Math.floor(c*100)/100,g=i??{vx:s.clientWidth/2,vy:r===me.Top?0:s.clientHeight/2},{desiredScrollLeft:l,desiredScrollTop:p}=this.computeScrollForZoomChange(s,o,u,g,n);!isNaN(l)&&!isNaN(p)&&this.viewportPlugin.setViewportScrollMetrics({scrollLeft:l,scrollTop:p}),this.dispatch(gi(typeof e=="number"?u:e,u)),this.dispatchCoreAction(Da(u)),this.markReady(),this.viewport.scrollTo({x:l,y:p,behavior:"instant"});const v={oldZoom:o,newZoom:u,level:e,center:g,desiredScrollLeft:l,desiredScrollTop:p,viewport:s};this.zoom$.emit(v)}computeZoomForMode(e,t){const i=Oa(this.coreState.core);if(!i.length)return!1;const r=this.scroll.getPageGap(),n=this.viewport.getViewportGap();if(t.clientWidth===0||t.clientHeight===0)return!1;const s=t.clientWidth-2*n,o=t.clientHeight-2*n;if(s<=0||o<=0)return!1;let d=0,c=0;switch(i.forEach(u=>{const g=u.reduce((p,v,x)=>p+v.rotatedSize.width+(x?r:0),0),l=Math.max(...u.map(p=>p.rotatedSize.height));d=Math.max(d,g),c=Math.max(c,l)}),e){case Q.FitWidth:return s/d;case Q.FitPage:return Math.min(s/d,o/c);case Q.Automatic:return Math.min(s/d,1);default:return 1}}computeScrollForZoomChange(e,t,i,r,n="keep"){const s=this.scroll.getLayout(),o=this.viewport.getViewportGap(),d=s.totalContentSize.width,c=s.totalContentSize.height,u=e.clientWidth-2*o,g=e.clientHeight-2*o,l=(M,E,H)=>E*H<M?(M-E*H)/2:0,p=l(u,d,t),v=l(g,c,t),x=l(u,d,i),w=l(g,c,i),k=(e.scrollLeft+r.vx-o-p)/t,z=(e.scrollTop+r.vy-o-v)/t,L=k*i+o+x,T=z*i+o+w,I=n==="center"?L-e.clientWidth/2:L-r.vx,C=n==="center"?T-e.clientHeight/2:T-r.vy;return{desiredScrollLeft:Math.max(0,I),desiredScrollTop:Math.max(0,C)}}handleZoomToArea(e,t){const i=this.coreState.core.rotation,r=this.viewport.getMetrics(),n=this.viewport.getViewportGap(),s=this.state.currentZoomLevel,o=r.clientWidth-2*n,d=r.clientHeight-2*n,c=this.scroll.getLayout(),u=c.virtualItems.find(M=>M.pageLayouts.some(E=>E.pageIndex===e));if(!u)return;const g=u.pageLayouts.find(M=>M.pageIndex===e),l=ja({width:g.width,height:g.height},t,i),p=this.toZoom(Math.min(o/l.size.width,d/l.size.height)),v=u.x+g.x,x=u.y+g.y,w=v+l.origin.x+l.size.width/2,k=x+l.origin.y+l.size.height/2,z=(M,E,H)=>E*H<M?(M-E*H)/2:0,L=z(o,c.totalContentSize.width,s),T=z(d,c.totalContentSize.height,s),I=n+L+w*s-r.scrollLeft,C=n+T+k*s-r.scrollTop;this.handleRequest({level:p,center:{vx:I,vy:C},align:"center"})}recalcAuto(e){const t=this.state;(t.zoomLevel===Q.Automatic||t.zoomLevel===Q.FitPage||t.zoomLevel===Q.FitWidth)&&this.handleRequest({level:t.zoomLevel,focus:e})}onStoreUpdated(e,t){this.state$.emit(t)}registerMarqueeOnPage(e){if(!this.interactionManager)return this.logger.warn("ZoomPlugin","MissingDependency","Interaction manager plugin not loaded, marquee zoom disabled"),()=>{};const t=this.coreState.core.document;if(!t)return this.logger.warn("ZoomPlugin","DocumentNotFound","Document not found"),()=>{};const i=t.pages[e.pageIndex];if(!i)return this.logger.warn("ZoomPlugin","PageNotFound",`Page ${e.pageIndex} not found`),()=>{};const r=fi({pageSize:i.size,scale:e.scale,onPreview:e.callback.onPreview,onCommit:s=>{this.zoomToArea(e.pageIndex,s),e.callback.onCommit?.(s)},onSmallDrag:()=>{this.zoomIn(),e.callback.onSmallDrag?.()}});return this.interactionManager.registerHandlers({modeId:"marqueeZoom",handlers:r,pageIndex:e.pageIndex})}};$t.id="zoom";let At=$t;const mi={manifest:ui,create:(a,e)=>new At(zt,a,e),reducer:vi,initialState:et},Ft=()=>le(At.id),bi=()=>{const a=Ft(),e=be({get provides(){return a.provides},state:et});return F(()=>{if(a.provides)return a.provides.onStateChange(t=>{e.state=t})}),e};var xi=S("<div></div>");function yi(a,e){Z(e,!0);let t=ye(e,"stroke",3,"rgba(33,150,243,0.8)"),i=ye(e,"fill",3,"rgba(33,150,243,0.15)");const r=Ft();let n=D(null);F(()=>{if(r.provides)return r.provides.registerMarqueeOnPage({pageIndex:e.pageIndex,scale:e.scale,callback:{onPreview:c=>R(n,c,!0)}})});var s=de(),o=re(s);{var d=c=>{var u=xi();let g;O(l=>{Y(u,1,St(e.class)),g=se(u,"",g,l)},[()=>({position:"absolute","pointer-events":"none",left:`${h(n).origin.x*e.scale}px`,top:`${h(n).origin.y*e.scale}px`,width:`${h(n).size.width*e.scale}px`,height:`${h(n).size.height*e.scale}px`,border:`1px solid ${t()}`,background:i(),"box-sizing":"border-box"})]),y(c,u)};N(o,c=>{h(n)&&c(d)})}y(a,s),q()}const Ht="tiling",wi={id:Ht,name:"Tiling Plugin",version:"1.0.0",provides:["tiling"],requires:["render","scroll","viewport"],optional:[],defaultConfig:{enabled:!0,tileSize:768,overlapPx:2.5,extraRings:0}},Dt="UPDATE_VISIBLE_TILES",Ot="MARK_TILE_STATUS",Be=a=>({type:Dt,payload:a}),pt=(a,e,t)=>({type:Ot,payload:{pageIndex:a,tileId:e,status:t}}),_i={visibleTiles:{}},Pi=(a,e)=>{switch(e.type){case Dt:{const t=e.payload,i={...a.visibleTiles};for(const r in t){const n=Number(r),s=t[n],o=i[n]??[],d=o.find(g=>!g.isFallback)?.srcScale,c=s[0].srcScale;if(d!==void 0&&d!==c){const g=o.filter(p=>!p.isFallback&&p.status==="ready").map(p=>({...p,isFallback:!0})),l=g.length>0?[]:o.filter(p=>p.isFallback);i[n]=[...l,...g,...s]}else{const g=new Set(s.map(v=>v.id)),l=[],p=new Set;for(const v of o)(v.isFallback||g.has(v.id))&&(l.push(v),p.add(v.id));for(const v of s)p.has(v.id)||l.push(v);i[n]=l}}return{...a,visibleTiles:i}}case Ot:{const{pageIndex:t,tileId:i,status:r}=e.payload,n=a.visibleTiles[t]?.map(c=>c.id===i?{...c,status:r}:c)??[],s=n.filter(c=>!c.isFallback),d=s.every(c=>c.status==="ready")?s:n;return{...a,visibleTiles:{...a.visibleTiles,[t]:d}}}default:return a}};function vt({tileSize:a=768,overlapPx:e=2.5,extraRings:t=0,scale:i,rotation:r,page:n,metric:s}){const o=n.size.width*i,d=n.size.height*i,c=a-e,u=Na(n.size,r,i),g={origin:{x:s.scaled.pageX,y:s.scaled.pageY},size:{width:s.scaled.visibleWidth,height:s.scaled.visibleHeight}},l=Za(u,g,r,1),p=l.origin.x,v=l.origin.y,x=p+l.size.width,w=v+l.size.height,k=Math.floor((o-1)/c),z=Math.floor((d-1)/c),L=Math.max(0,Math.floor(p/c)-t),T=Math.min(k,Math.floor((x-1)/c)+t),I=Math.max(0,Math.floor(v/c)-t),C=Math.min(z,Math.floor((w-1)/c)+t),M=[];for(let E=L;E<=T;E++){const H=E*c,U=Math.min(a,o-H),V=H/i,j=U/i;for(let A=I;A<=C;A++){const W=A*c,_=Math.min(a,d-W),P=W/i,$=_/i;M.push({id:`p${n.index}-${i}-x${H}-y${W}-w${U}-h${_}`,col:E,row:A,pageRect:{origin:{x:V,y:P},size:{width:j,height:$}},screenRect:{origin:{x:H,y:W},size:{width:U,height:_}},status:"queued",srcScale:i,isFallback:!1})}}return M}const jt=class extends oe{constructor(e,t,i){super(e,t),this.tileRendering$=J(),this.config=i,this.renderCapability=this.registry.getPlugin("render").provides(),this.scrollCapability=this.registry.getPlugin("scroll").provides(),this.viewportCapability=this.registry.getPlugin("viewport").provides(),this.scrollCapability.onScroll(r=>this.calculateVisibleTiles(r),{mode:"throttle",wait:50,throttleMode:"trailing"}),this.coreStore.onAction(Rt,r=>this.recalculateTiles(r.payload))}async recalculateTiles(e){const t=this.scrollCapability.getMetrics(this.viewportCapability.getMetrics()),i={},r=Date.now();for(const n of e){const s=t.pageVisibilityMetrics.find(d=>d.pageNumber===n+1);if(!s)continue;const o=this.coreState.core.document?.pages[n];o&&(i[n]=vt({page:o,metric:s,scale:this.coreState.core.scale,rotation:this.coreState.core.rotation,tileSize:this.config.tileSize,overlapPx:this.config.overlapPx,extraRings:this.config.extraRings}).map(d=>({...d,id:`${d.id}-r${r}`})))}Object.keys(i).length>0&&this.dispatch(Be(i))}async initialize(){}onCoreStoreUpdated(e,t){e.core.scale!==t.core.scale&&this.calculateVisibleTiles(this.scrollCapability.getMetrics(this.viewportCapability.getMetrics()))}calculateVisibleTiles(e){if(!this.config.enabled){this.dispatch(Be([]));return}const t=this.coreState.core.scale,i=this.coreState.core.rotation,r={};for(const n of e.pageVisibilityMetrics){const s=n.pageNumber-1,o=this.coreState.core.document?.pages[s];if(!o)continue;const d=vt({page:o,metric:n,scale:t,rotation:i,tileSize:this.config.tileSize,overlapPx:this.config.overlapPx,extraRings:this.config.extraRings});r[s]=d}this.dispatch(Be(r))}onStoreUpdated(e,t){this.tileRendering$.emit(t.visibleTiles)}buildCapability(){return{renderTile:this.renderTile.bind(this),onTileRendering:this.tileRendering$.on}}renderTile(e){if(!this.renderCapability)throw new Error("Render capability not available.");this.dispatch(pt(e.pageIndex,e.tile.id,"rendering"));const t=this.renderCapability.renderPageRect({pageIndex:e.pageIndex,rect:e.tile.pageRect,options:{scaleFactor:e.tile.srcScale,dpr:e.dpr}});return t.wait(()=>{this.dispatch(pt(e.pageIndex,e.tile.id,"ready"))},ze),t}};jt.id="tiling";let Nt=jt;const Si={manifest:wi,create:(a,e)=>new Nt(Ht,a,e),reducer:(a,e)=>Pi(a,e),initialState:_i},Zt=()=>le(Nt.id);var ki=S('<img alt=""/>');function Mi(a,e){Z(e,!0);const t=Zt();let i=D(""),r=null;const n=B(()=>e.tile.id),s=B(()=>e.tile.srcScale),o=B(()=>e.tile.screenRect),d=B(()=>e.scale/h(s)),c=v=>({...v,pageRect:{origin:{x:v.pageRect.origin.x,y:v.pageRect.origin.y},size:{width:v.pageRect.size.width,height:v.pageRect.size.height}},screenRect:{origin:{x:v.screenRect.origin.x,y:v.screenRect.origin.y},size:{width:v.screenRect.size.width,height:v.screenRect.size.height}}});F(()=>{h(n);const v=e.pageIndex;if(r||!t)return;const x=Ye(()=>c(e.tile)),w=t.provides?.renderTile({pageIndex:v,tile:x,dpr:e.dpr});return w?.wait(k=>{const z=URL.createObjectURL(k);r=z,R(i,z,!0)},ze),()=>{r?(URL.revokeObjectURL(r),r=null):w?.abort({code:Re.Cancelled,message:"canceled render task"})}});const u=()=>{r&&(URL.revokeObjectURL(r),r=null)};var g=de(),l=re(g);{var p=v=>{var x=ki();let w;O(k=>{kt(x,"src",h(i)),w=se(x,"",w,k)},[()=>({position:"absolute",left:`${h(o).origin.x*h(d)}px`,top:`${h(o).origin.y*h(d)}px`,width:`${h(o).size.width*h(d)}px`,height:`${h(o).size.height*h(d)}px`,display:"block"})]),Le("load",x,u),Pt(x),y(v,x)};N(l,v=>{h(i)&&v(p)})}y(a,g),q()}var Ri=S("<div></div>");function Ci(a,e){Z(e,!0);let t=Fe(e,["$$slots","$$events","$$legacy","pageIndex","scale","class"]);const i=Zt();let r=D(be([]));const n=qa();F(()=>{if(i.provides)return i.provides.onTileRendering(o=>{R(r,o[e.pageIndex]??[],!0)})});var s=Ri();He(s,()=>({class:e.class,...t})),ge(s,21,()=>h(r),o=>`${n.coreState?.document?.id}-${o.id}`,(o,d)=>{Mi(o,{get pageIndex(){return e.pageIndex},get tile(){return h(d)},dpr:window.devicePixelRatio,get scale(){return e.scale}})}),f(s),y(a,s),q()}var ee=(a=>(a.None="none",a.Odd="odd",a.Even="even",a))(ee||{});const qt="SET_SPREAD_MODE";function Ve(a){return{type:qt,payload:a}}const Ut=class extends oe{constructor(e,t,i){super(e,t),this.spreadEmitter$=J(),this.resetReady(),this.dispatch(Ve(i.defaultSpreadMode??ee.None)),t.getPlugin("loader").provides().onDocumentLoaded(n=>this.documentLoaded(n))}async initialize(e){e.defaultSpreadMode&&this.dispatch(Ve(e.defaultSpreadMode))}documentLoaded(e){this.dispatchCoreAction(gt(this.getSpreadPagesObjects(e.pages))),this.markReady()}getSpreadPagesObjects(e){if(!e.length)return[];switch(this.state.spreadMode){case ee.None:return e.map(t=>[t]);case ee.Odd:return Array.from({length:Math.ceil(e.length/2)},(t,i)=>e.slice(i*2,i*2+2));case ee.Even:return[[e[0]],...Array.from({length:Math.ceil((e.length-1)/2)},(t,i)=>e.slice(1+i*2,1+i*2+2))];default:return e.map(t=>[t])}}setSpreadMode(e){const t=this.state.spreadMode,i=this.coreState.core.document;if(!i)throw new Error("Document not loaded");t!==e&&(this.dispatch(Ve(e)),this.dispatchCoreAction(gt(this.getSpreadPagesObjects(i.pages))),this.notifySpreadChange(e))}notifySpreadChange(e){this.spreadEmitter$.emit(e)}buildCapability(){return{onSpreadChange:this.spreadEmitter$.on,setSpreadMode:e=>this.setSpreadMode(e),getSpreadMode:()=>this.state.spreadMode}}async destroy(){this.spreadEmitter$.clear()}};Ut.id="spread";let Wt=Ut;const Bt="spread",Ti={id:Bt,name:"Spread Plugin",version:"1.0.0",provides:["spread"],requires:["loader"],optional:[],defaultConfig:{enabled:!0}},Vt={spreadMode:ee.None},Ii=(a=Vt,e)=>{switch(e.type){case qt:return{...a,spreadMode:e.payload};default:return a}},zi={manifest:Ti,create:(a,e)=>new Wt(Bt,a,e),reducer:Ii,initialState:Vt},Ei=()=>le(Wt.id),Li=()=>{const a=Ei(),e=be({get provides(){return a.provides},spreadMode:ee.None});return F(()=>a.provides?(e.spreadMode=a.provides.getSpreadMode(),a.provides.onSpreadChange(i=>{e.spreadMode=i})):void 0),e},Gt="rotate",$i={id:Gt,name:"Rotate Plugin",version:"1.0.0",provides:["rotate"],requires:["loader"],optional:["spread"],defaultConfig:{enabled:!0}};function Ai(a,e,t){let i=1,r=0,n=0,s=1,o=0,d=0;switch(a){case 1:i=0,r=1,n=-1,s=0,o=t;break;case 2:i=-1,r=0,n=0,s=-1,o=e,d=t;break;case 3:i=0,r=-1,n=1,s=0,d=e;break}return[i,r,n,s,o,d]}function Fi(a,e,t){const[i,r,n,s,o,d]=Ai(a,e,t);return`matrix(${i},${r},${n},${s},${o},${d})`}function Hi(a){return(a+1)%4}function Di(a){return(a+3)%4}const Yt=class extends oe{constructor(e,t,i){super(e,t),this.rotate$=J(),this.resetReady();const r=i.defaultRotation??this.coreState.core.rotation;this.setRotation(r),this.markReady()}async initialize(e){}setRotation(e){if(!this.coreState.core.pages)throw new Error("Pages not loaded");this.rotate$.emit(e),this.dispatchCoreAction(Ua(e))}rotateForward(){const e=Hi(this.coreState.core.rotation);this.setRotation(e)}rotateBackward(){const e=Di(this.coreState.core.rotation);this.setRotation(e)}buildCapability(){return{onRotateChange:this.rotate$.on,setRotation:e=>this.setRotation(e),getRotation:()=>this.coreState.core.rotation,rotateForward:()=>this.rotateForward(),rotateBackward:()=>this.rotateBackward()}}getMatrixAsString(e={w:0,h:0}){return Fi(this.coreState.core.rotation,e.w,e.h)}async destroy(){this.rotate$.clear(),super.destroy()}};Yt.id="rotate";let tt=Yt;const Oi={manifest:$i,create:(a,e)=>new tt(Gt,a,e),reducer:()=>{},initialState:{}},ji=()=>_e(tt.id),Ni=()=>le(tt.id);var Zi=S("<div><!></div>");function qi(a,e){Z(e,!0);const t=ji(),i=B(()=>t.plugin?t.plugin.getMatrixAsString({w:e.pageSize.width,h:e.pageSize.height}):"matrix(1, 0, 0, 1, 0, 0)");var r=Zi();let n;var s=m(r);Xe(s,()=>e.children??Ke),f(r),O(o=>n=se(r,"",n,o),[()=>({position:"absolute","transform-origin":"0 0",transform:h(i)})]),y(a,r),q()}const Xt=class extends oe{constructor(e,t,i){super(e,t),this.downloadRequest$=Ie(),this.config=i}async initialize(e){}buildCapability(){return{saveAsCopy:this.saveAsCopy.bind(this),download:this.download.bind(this)}}onRequest(e){return this.downloadRequest$.on(e)}download(){this.downloadRequest$.emit("download")}saveAsCopyAndGetBufferAndName(){const e=new Ct,t=this.coreState.core.document;return t?(this.saveAsCopy().wait(i=>{e.resolve({buffer:i,name:t.name??this.config.defaultFileName})},e.fail),e):Ce.reject({code:Re.DocNotOpen,message:"Document not found"})}saveAsCopy(){const e=this.coreState.core.document;return e?this.engine.saveAsCopy(e):Ce.reject({code:Re.DocNotOpen,message:"Document not found"})}};Xt.id="export";let at=Xt;const Kt="export",Ui={id:Kt,name:"Export Plugin",version:"1.0.0",provides:["export"],requires:[],optional:[],defaultConfig:{enabled:!0,defaultFileName:"document.pdf"}},Wi={manifest:Ui,create:(a,e)=>new at(Kt,a,e),reducer:()=>{},initialState:{}},Bi=()=>_e(at.id),Jt=()=>le(at.id);var Vi=S('<a style="display: none" href="/" aria-label="Download link"></a>');function Gi(a,e){Z(e,!0);const t=Jt(),i=Bi();let r;F(()=>!t.provides||!i.plugin?void 0:i.plugin.onRequest(o=>{var d;if(o==="download"){const c=r;if(!c)return;const u=(d=i.plugin)==null?void 0:d.saveAsCopyAndGetBufferAndName();u?.wait(({buffer:g,name:l})=>{const p=URL.createObjectURL(new Blob([g]));c.href=p,c.download=l,c.click(),URL.revokeObjectURL(p)},ze)}}));var n=Vi();Te(n,s=>r=s,()=>r),y(a,n),q()}const Yi=De(Wi).addUtility(Gi).build(),Qt="fullscreen",Xi={id:Qt,name:"Fullscreen Plugin",version:"1.0.0",provides:["fullscreen"],requires:[],optional:[],defaultConfig:{enabled:!0}},ea="SET_FULLSCREEN";function Ki(a){return{type:ea,payload:a}}const ta=class extends oe{constructor(e,t){super(e,t),this.onStateChange$=J(),this.fullscreenRequest$=Ie()}async initialize(e){}buildCapability(){return{isFullscreen:()=>this.state.isFullscreen,enableFullscreen:()=>this.enableFullscreen(),exitFullscreen:()=>this.exitFullscreen(),toggleFullscreen:()=>this.toggleFullscreen(),onRequest:this.fullscreenRequest$.on,onStateChange:this.onStateChange$.on}}toggleFullscreen(){this.state.isFullscreen?this.exitFullscreen():this.enableFullscreen()}enableFullscreen(){this.fullscreenRequest$.emit("enter")}exitFullscreen(){this.fullscreenRequest$.emit("exit")}onStoreUpdated(e,t){this.onStateChange$.emit(t)}setFullscreenState(e){this.dispatch(Ki(e))}async destroy(){this.fullscreenRequest$.clear(),super.destroy()}};ta.id="fullscreen";let it=ta;const aa={isFullscreen:!1},Ji=(a,e)=>{switch(e.type){case ea:return{...a,isFullscreen:e.payload};default:return a}},Qi={manifest:Xi,create:a=>new it(Qt,a),reducer:Ji,initialState:aa},er=()=>_e(it.id),ia=()=>le(it.id),tr=()=>{const a=ia(),e=be({get provides(){return a.provides},state:aa});return F(()=>{if(a.provides)return a.provides.onStateChange(t=>{e.state=t})}),e};var ar=S("<div><!></div>");function ir(a,e){Z(e,!0);const t=ia(),i=er();let r;F(()=>t.provides?t.provides.onRequest(async d=>{if(d==="enter"){const c=r;c&&!document.fullscreenElement&&await c.requestFullscreen()}else document.fullscreenElement&&await document.exitFullscreen()}):void 0),F(()=>{if(!i.plugin)return;const o=()=>{i.plugin.setFullscreenState(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",o),()=>document.removeEventListener("fullscreenchange",o)});var n=ar(),s=m(n);Xe(s,()=>e.children),f(n),Te(n,o=>r=o,()=>r),O(()=>{Y(n,1,St(e.class)),se(n,`position: relative; width: 100%; height: 100%; ${(e.style||"")??""}`)}),y(a,n),q()}const rr=De(Qi).addWrapper(ir).build(),ra=class extends oe{constructor(e,t,i){var r,n;super(e,t),this.panMode$=J(),this.config=i,this.interactionManager=(r=t.getPlugin(Wa.id))==null?void 0:r.provides(),this.viewport=(n=t.getPlugin(Ba.id))==null?void 0:n.provides(),this.interactionManager&&(this.interactionManager.registerMode({id:"panMode",scope:"global",exclusive:!1,cursor:"grab",wantsRawTouch:!1}),this.unsubscribePanModeChange=this.interactionManager.onStateChange(s=>{s.activeMode==="panMode"?this.panMode$.emit(!0):this.panMode$.emit(!1)}),this.registerPanHandlers()),i.defaultMode==="always"&&this.makePanDefault(!0)}async initialize(e){}async destroy(){var e,t;(e=this.unregisterHandlers)==null||e.call(this),(t=this.unsubscribePanModeChange)==null||t.call(this),await super.destroy()}registerPanHandlers(){let e=null;const t={onMouseDown:(i,r)=>{const n=this.viewport.getMetrics();e={startX:r.clientX,startY:r.clientY,startLeft:n.scrollLeft,startTop:n.scrollTop},this.interactionManager.setCursor("panMode","grabbing",10)},onMouseMove:(i,r)=>{if(!e)return;const n=r.clientX-e.startX,s=r.clientY-e.startY;this.viewport.scrollTo({x:e.startLeft-n,y:e.startTop-s})},onMouseUp:()=>{e&&(e=null,this.interactionManager.removeCursor("panMode"))},onMouseLeave:()=>{e&&(e=null,this.interactionManager.removeCursor("panMode"))},onMouseCancel:()=>{e&&(e=null,this.interactionManager.removeCursor("panMode"))}};this.unregisterHandlers=this.interactionManager.registerHandlers({modeId:"panMode",handlers:t})}makePanDefault(e=!0){this.interactionManager&&(this.interactionManager.setDefaultMode("panMode"),e&&this.interactionManager.activateDefaultMode())}buildCapability(){return{onPanModeChange:this.panMode$.on,makePanDefault:(e=!0)=>this.makePanDefault(e),enablePan:()=>{var e;return(e=this.interactionManager)==null?void 0:e.activate("panMode")},disablePan:()=>{var e;return(e=this.interactionManager)==null?void 0:e.activateDefaultMode()},togglePan:()=>{var e,t,i;((e=this.interactionManager)==null?void 0:e.getActiveMode())==="panMode"?(t=this.interactionManager)==null||t.activateDefaultMode():(i=this.interactionManager)==null||i.activate("panMode")}}}};ra.id="pan";let rt=ra;const na="pan",nr={id:na,name:"Pan Plugin",version:"1.0.0",provides:["pan"],requires:["interaction-manager","viewport"],optional:[],defaultConfig:{enabled:!0,defaultMode:"mobile"}},sr={manifest:nr,create:(a,e)=>new rt(na,a,e),reducer:()=>{},initialState:{}},or=()=>_e(rt.id),sa=()=>le(rt.id),lr=()=>{const a=sa(),e=be({get provides(){return a.provides},isPanning:!1});return F(()=>{if(a.provides)return a.provides.onPanModeChange(t=>{e.isPanning=t})}),e};function cr(a,e){Z(e,!0);const{provides:t}=sa(),{plugin:i}=or();F(()=>{var r;if(!t||!i)return;const n=((r=i.config)==null?void 0:r.defaultMode)??"never",s=typeof window<"u"&&("ontouchstart"in window||navigator.maxTouchPoints>0);n==="mobile"&&s&&t.makePanDefault()}),q()}const dr=De(sr).addUtility(cr).build(),oa="thumbnail",hr={id:oa,name:"Thumbnail Plugin",version:"1.0.0",provides:["thumbnail"],requires:["render"],optional:["scroll"],defaultConfig:{enabled:!0,width:150,gap:10,buffer:3,labelHeight:16,autoScroll:!0,scrollBehavior:"smooth",imagePadding:0,paddingY:0}},la=class extends oe{constructor(e,t,i){var r;super(e,t),this.cfg=i,this.scrollCapability=null,this.thumbs=[],this.window=null,this.viewportH=0,this.scrollY=0,this.emitWindow=J(),this.refreshPages$=Ie(),this.taskCache=new Map,this.canAutoScroll=!0,this.scrollTo$=J(),this.renderCapability=this.registry.getPlugin("render").provides(),this.scrollCapability=((r=this.registry.getPlugin("scroll"))==null?void 0:r.provides())??null,this.coreStore.onAction(Mt,(n,s)=>{this.taskCache.clear(),this.setWindowState(s)}),this.coreStore.onAction(Rt,n=>{this.refreshPages$.emit(n.payload);for(const s of n.payload)this.taskCache.delete(s)}),this.scrollCapability&&this.cfg.autoScroll!==!1&&(this.scrollCapability.onPageChangeState(({isChanging:n,targetPage:s})=>{this.canAutoScroll=!n,n||this.scrollToThumb(s-1)}),this.scrollCapability.onPageChange(({pageNumber:n})=>{this.canAutoScroll&&this.scrollToThumb(n-1)}))}async initialize(){}onRefreshPages(e){return this.refreshPages$.on(e)}onWindow(e){return this.emitWindow.on(e)}onScrollTo(e){return this.scrollTo$.on(e)}setWindowState(e){const t=e.core;if(!t.document)return;const i=this.cfg.width??120,r=this.cfg.labelHeight??16,n=this.cfg.gap??8,s=this.cfg.imagePadding??0,o=this.cfg.paddingY??0,d=Math.max(1,i-2*s);let c=o;this.thumbs=t.document.pages.map(u=>{const g=u.size.height/u.size.width,l=Math.round(d*g),p=s+l+s+r,v={pageIndex:u.index,width:d,height:l,wrapperHeight:p,top:c,labelHeight:r,padding:s};return c+=p+n,v}),this.window={start:-1,end:-1,items:[],totalHeight:c-n+o},this.viewportH>0?this.updateWindow(this.scrollY,this.viewportH):this.emitWindow.emit(this.window)}buildCapability(){return{renderThumb:(e,t)=>this.renderThumb(e,t),scrollToThumb:e=>this.scrollToThumb(e)}}updateWindow(e,t){const i=this.cfg.buffer??3;if(this.scrollY=e,this.viewportH=t,!this.window||this.thumbs.length===0)return;let r=0,n=this.thumbs.length-1,s=0;for(;r<=n;){const u=r+n>>1,g=this.thumbs[u];g.top+g.wrapperHeight<e?r=u+1:(s=u,n=u-1)}let o=s;const d=e+t;for(;o+1<this.thumbs.length&&this.thumbs[o].top<d;)o++;o=Math.min(this.thumbs.length-1,o+i);const c=Math.max(0,s-i);c===this.window.start&&o===this.window.end||(this.window={start:c,end:o,items:this.thumbs.slice(c,o+1),totalHeight:this.window.totalHeight},this.emitWindow.emit(this.window))}scrollToThumb(e){if(!this.window)return;const t=this.thumbs[e];if(!t)return;const i=this.cfg.scrollBehavior??"smooth",r=this.cfg.paddingY??0;if(this.viewportH<=0){const u=Math.max(r,t.top-t.wrapperHeight);this.scrollTo$.emit({top:u,behavior:i});return}const n=8,s=t.top,o=t.top+t.wrapperHeight,d=s<this.scrollY+n+r,c=o>this.scrollY+this.viewportH-n;d?this.scrollTo$.emit({top:Math.max(0,s-r),behavior:i}):c&&this.scrollTo$.emit({top:Math.max(0,o-this.viewportH+r),behavior:i})}renderThumb(e,t){if(this.taskCache.has(e))return this.taskCache.get(e);const r=this.coreState.core.document.pages[e],n=this.cfg.width??120,s=this.cfg.imagePadding??0,d=Math.max(1,n-2*s)/r.size.width,c=this.renderCapability.renderPageRect({pageIndex:e,rect:{origin:{x:0,y:0},size:r.size},options:{scaleFactor:d,dpr:t}});return this.taskCache.set(e,c),c.wait(ze,()=>this.taskCache.delete(e)),c}};la.id="thumbnail";let nt=la;const ur={manifest:hr,create:(a,e)=>new nt(oa,a,e),reducer:()=>{},initialState:{}},ca=()=>_e(nt.id),gr=()=>le(nt.id);var pr=S("<img/>");function vr(a,e){Z(e,!0);const t=Fe(e,["$$slots","$$events","$$legacy","meta"]),i=gr(),r=ca();let n=D(void 0),s=null,o=D(0);F(()=>{if(r.plugin)return r.plugin.onRefreshPages(l=>{l.includes(e.meta.pageIndex)&&R(o,h(o)+1)})}),F(()=>{var l;const p=(l=i.provides)==null?void 0:l.renderThumb(e.meta.pageIndex,window.devicePixelRatio);return p?.wait(v=>{const x=URL.createObjectURL(v);s=x,R(n,x,!0)},ze),()=>{s?(URL.revokeObjectURL(s),s=null):p?.abort({code:Re.Cancelled,message:"canceled render task"})}});const d=()=>{s&&(URL.revokeObjectURL(s),s=null)};var c=de(),u=re(c);{var g=l=>{var p=pr();He(p,()=>({src:h(n),onload:d,...t,alt:"PDF thumbnail"})),Pt(p),y(l,p)};N(u,l=>{h(n)&&l(g)})}y(a,c),q()}var fr=S("<div><div></div></div>");function mr(a,e){Z(e,!0);const t=Fe(e,["$$slots","$$events","$$legacy","children"]),i=ca();let r,n=D(null);F(()=>{if(i.plugin)return i.plugin.onWindow(l=>{R(n,l,!0)})}),F(()=>{const l=r;if(!l||!i.plugin)return;const p=()=>{i.plugin.updateWindow(l.scrollTop,l.clientHeight)};return l.addEventListener("scroll",p),()=>l.removeEventListener("scroll",p)}),F(()=>{const l=r;if(!l||!i.plugin)return;const p=new ResizeObserver(()=>{i.plugin.updateWindow(l.scrollTop,l.clientHeight)});return p.observe(l),()=>p.disconnect()}),F(()=>{const l=r;!l||!i.plugin||!h(n)||i.plugin.updateWindow(l.scrollTop,l.clientHeight)}),F(()=>{const l=r;if(!(!l||!i.plugin||!h(n)))return i.plugin.onScrollTo(({top:p,behavior:v})=>{l.scrollTo({top:p,behavior:v})})});const s=B(()=>{var l;return((l=i?.plugin)==null?void 0:l.cfg.paddingY)??0}),o=B(()=>{var l;return((l=h(n))==null?void 0:l.totalHeight)??0}),d=B(()=>{var l;return((l=h(n))==null?void 0:l.items)??[]});var c=fr();He(c,l=>({...t,[$a]:l}),[()=>({"overflow-y":"auto",position:"relative","padding-top":`${h(s)??""}px`,"padding-bottom":`${h(s)??""}px`,height:"100%"})]);var u=m(c);let g;ge(u,21,()=>h(d),l=>l.pageIndex,(l,p)=>{var v=de(),x=re(v);Xe(x,()=>e.children,()=>h(p)),y(l,v)}),f(u),f(c),Te(c,l=>r=l,()=>r),O(l=>g=se(u,"",g,l),[()=>({height:`${h(o)??""}px`,position:"relative"})]),y(a,c),q()}const da="START_SEARCH_SESSION",ha="STOP_SEARCH_SESSION",ua="SET_SEARCH_FLAGS",ga="SET_SHOW_ALL_RESULTS",pa="START_SEARCH",va="SET_SEARCH_RESULTS",fa="APPEND_SEARCH_RESULTS",ma="SET_ACTIVE_RESULT_INDEX";function br(){return{type:da}}function xr(){return{type:ha}}function ft(a){return{type:ua,payload:a}}function mt(a){return{type:ga,payload:a}}function yr(a){return{type:pa,payload:a}}function Ge(a,e,t){return{type:va,payload:{results:a,total:e,activeResultIndex:t}}}function wr(a){return{type:fa,payload:{results:a}}}function bt(a){return{type:ma,payload:a}}const ba=class extends oe{constructor(e,t){super(e,t),this.searchStop$=J(),this.searchStart$=J(),this.searchResult$=J(),this.searchActiveResultChange$=J(),this.searchResultState$=J(),this.searchState$=J(),this.loader=this.registry.getPlugin("loader").provides(),this.loader.onDocumentLoaded(this.handleDocumentLoaded.bind(this)),this.loader.onLoaderEvent(this.handleLoaderEvent.bind(this))}handleDocumentLoaded(e){this.currentDocument=e,this.state.active&&this.startSearchSession()}handleLoaderEvent(e){(e.type==="error"||e.type==="start"&&this.currentDocument)&&(this.state.active&&this.stopSearchSession(),this.currentDocument=void 0)}async initialize(e){this.dispatch(ft(e.flags||[])),this.dispatch(mt(e.showAllResults!==void 0?e.showAllResults:!0))}onStoreUpdated(e,t){this.searchResultState$.emit({results:t.results,activeResultIndex:t.activeResultIndex,showAllResults:t.showAllResults,active:t.active}),this.searchState$.emit(t)}buildCapability(){return{startSearch:this.startSearchSession.bind(this),stopSearch:this.stopSearchSession.bind(this),searchAllPages:this.searchAllPages.bind(this),nextResult:this.nextResult.bind(this),previousResult:this.previousResult.bind(this),goToResult:this.goToResult.bind(this),setShowAllResults:e=>this.dispatch(mt(e)),getShowAllResults:()=>this.state.showAllResults,onSearchResult:this.searchResult$.on,onSearchStart:this.searchStart$.on,onSearchStop:this.searchStop$.on,onActiveResultChange:this.searchActiveResultChange$.on,onSearchResultStateChange:this.searchResultState$.on,onStateChange:this.searchState$.on,getFlags:()=>this.state.flags,setFlags:e=>this.setFlags(e),getState:()=>this.state}}setFlags(e){this.dispatch(ft(e)),this.state.active&&this.searchAllPages(this.state.query,!0)}notifySearchStart(){this.searchStart$.emit()}notifySearchStop(){this.searchStop$.emit()}notifyActiveResultChange(e){this.searchActiveResultChange$.emit(e)}startSearchSession(){this.currentDocument&&(this.dispatch(br()),this.notifySearchStart())}stopSearchSession(){var e,t;if(!(!this.currentDocument||!this.state.active)){try{(t=(e=this.currentTask)==null?void 0:e.abort)==null||t.call(e,{type:"abort",code:"cancelled",message:"search stopped"})}catch{}this.currentTask=void 0,this.dispatch(xr()),this.notifySearchStop()}}searchAllPages(e,t=!1){var i,r;const n=e.trim();if(this.state.query===n&&!t)return Ce.resolve({results:this.state.results,total:this.state.total});if(this.currentTask){try{(r=(i=this.currentTask).abort)==null||r.call(i,{type:"abort",code:"superseded",message:"new search"})}catch{}this.currentTask=void 0}if(this.dispatch(yr(n)),!n||!this.currentDocument)return this.dispatch(Ge([],0,-1)),Ce.resolve({results:[],total:0});this.state.active||this.startSearchSession();const s=this.currentTask=this.engine.searchAllPages(this.currentDocument,n,{flags:this.state.flags});return s.onProgress(o=>{var d;(d=o?.results)!=null&&d.length&&(this.dispatch(wr(o.results)),this.state.activeResultIndex===-1&&(this.dispatch(bt(0)),this.notifyActiveResultChange(0)))}),s.wait(o=>{this.currentTask=void 0;const d=o.total>0?0:-1;this.dispatch(Ge(o.results,o.total,d)),this.searchResult$.emit(o),o.total>0&&this.notifyActiveResultChange(0)},o=>{this.currentTask=void 0,console.error("Error during search:",o),this.dispatch(Ge([],0,-1))}),s}nextResult(){if(this.state.results.length===0)return-1;const e=this.state.activeResultIndex>=this.state.results.length-1?0:this.state.activeResultIndex+1;return this.goToResult(e)}previousResult(){if(this.state.results.length===0)return-1;const e=this.state.activeResultIndex<=0?this.state.results.length-1:this.state.activeResultIndex-1;return this.goToResult(e)}goToResult(e){return this.state.results.length===0||e<0||e>=this.state.results.length?-1:(this.dispatch(bt(e)),this.notifyActiveResultChange(e),e)}async destroy(){this.state.active&&this.currentDocument&&this.stopSearchSession(),this.searchResult$.clear(),this.searchStart$.clear(),this.searchStop$.clear(),this.searchActiveResultChange$.clear(),this.searchResultState$.clear(),this.searchState$.clear()}};ba.id="search";let xa=ba;const ya="search",_r={id:ya,name:"Search Plugin",version:"1.0.0",provides:["search"],requires:["loader"],optional:[],defaultConfig:{enabled:!0,flags:[]}},st={flags:[],results:[],total:0,activeResultIndex:-1,showAllResults:!0,query:"",loading:!1,active:!1},Pr=(a=st,e)=>{switch(e.type){case da:return{...a,active:!0};case ha:return{...a,results:[],total:0,activeResultIndex:-1,query:"",loading:!1,active:!1};case ua:return{...a,flags:e.payload};case ga:return{...a,showAllResults:e.payload};case pa:return{...a,loading:!0,query:e.payload,results:[],total:0,activeResultIndex:-1};case fa:{const t=[...a.results,...e.payload.results],i=a.activeResultIndex===-1&&t.length>0?0:a.activeResultIndex;return{...a,results:t,total:t.length,activeResultIndex:i,loading:!0}}case va:return{...a,results:e.payload.results,total:e.payload.total,activeResultIndex:e.payload.activeResultIndex,loading:!1};case ma:return{...a,activeResultIndex:e.payload};default:return a}},Sr={manifest:_r,create:a=>new xa(ya,a),reducer:Pr,initialState:st},wa=()=>le(xa.id),kr=()=>{const a=wa(),e=be({get provides(){return a.provides},state:st});return F(()=>{if(a.provides)return a.provides.onStateChange(t=>{e.state=t})}),e};var Mr=S("<div></div>"),Rr=S("<div></div>");function Cr(a,e){Z(e,!0);const t=ye(e,"highlightColor",3,"#FFFF00"),i=ye(e,"activeHighlightColor",3,"#FFBF00"),r=Fe(e,["$$slots","$$events","$$legacy","pageIndex","scale","highlightColor","activeHighlightColor"]),n=wa();let s=D(null);F(()=>{if(n.provides)return n.provides.onSearchResultStateChange(g=>{R(s,g,!0)})});const o=B(()=>h(s)?h(s).results.map((g,l)=>({result:g,originalIndex:l})).filter(({result:g})=>g.pageIndex===e.pageIndex):[]);var d=de(),c=re(d);{var u=g=>{var l=Rr();He(l,()=>({...r})),ge(l,21,()=>h(o),we,(p,v)=>{let x=()=>h(v).result,w=()=>h(v).originalIndex;var k=de(),z=re(k);ge(z,17,()=>x().rects,we,(L,T)=>{var I=Mr();let C;O(M=>C=se(I,"",C,M),[()=>({position:"absolute",top:`${h(T).origin.y*e.scale}px`,left:`${h(T).origin.x*e.scale}px`,width:`${h(T).size.width*e.scale}px`,height:`${h(T).size.height*e.scale}px`,"background-color":w()===h(s).activeResultIndex?i():t(),"mix-blend-mode":"multiply",transform:"scale(1.02)","transform-origin":"center",transition:"opacity .3s ease-in-out",opacity:"1"})]),y(L,I)}),y(p,k)}),f(l),y(g,l)};N(c,g=>{h(s)&&g(u)})}y(a,d),q()}const _a="print",Tr={id:_a,name:"Print Plugin",version:"1.0.0",provides:["print"],requires:[],optional:[],defaultConfig:{enabled:!0}},Pa=class extends oe{constructor(e,t,i){super(e,t),this.printReady$=Ie()}async initialize(e){}buildCapability(){return{print:this.print.bind(this)}}onPrintRequest(e){return this.printReady$.on(e)}print(e){const t=e??{},i=new Ct;return i.progress({stage:"preparing",message:"Preparing document..."}),this.preparePrintDocument(t).wait(n=>{i.progress({stage:"document-ready",message:"Document prepared successfully"}),this.printReady$.emit({options:t,buffer:n,task:i})},i.fail),i}preparePrintDocument(e){const t=this.coreState.core.document;return t?this.engine.preparePrintDocument(t,e):Ce.reject({code:Re.DocNotOpen,message:"Document not found"})}};Pa.id="print";let ot=Pa;const Ir={manifest:Tr,create:(a,e)=>new ot(_a,a,e),reducer:()=>{},initialState:{}},Sa=()=>le(ot.id),zr=()=>_e(ot.id);var Er=S('<iframe title="Print Document" src="about:blank" style="position: absolute; display: none;"></iframe>');function Lr(a,e){Z(e,!0);const t=Sa(),i=zr();let r=D(null),n=null;F(()=>{if(!t.provides||!i.plugin)return;const o=i.plugin.onPrintRequest(({buffer:d,task:c})=>{const u=h(r);if(!u)return;n&&(URL.revokeObjectURL(n),n=null);const g=URL.createObjectURL(new Blob([d],{type:"application/pdf"}));n=g,u.onload=()=>{var l,p;u.src===g&&(c.progress({stage:"iframe-ready",message:"Ready to print"}),(l=u.contentWindow)==null||l.focus(),(p=u.contentWindow)==null||p.print(),c.progress({stage:"printing",message:"Print dialog opened"}),c.resolve(d))},u.src=g});return()=>{o(),n&&(URL.revokeObjectURL(n),n=null)}});var s=Er();Te(s,o=>R(r,o),()=>h(r)),y(a,s),q()}const $r=De(Ir).addUtility(Lr).build();function lt(a,e){const t=i=>{a.contains(i.target)||e?.()};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}const Ar=(a,e)=>{R(e,!h(e))},Fr=(a,e)=>{e.provides?.zoomIn()},Hr=(a,e)=>{e.provides?.zoomOut()},Dr=(a,e,t)=>{e.provides?.toggleMarqueeZoom(),t()};var Or=(a,e,t)=>e(h(t).value),jr=S("<button><span> </span></button>"),Nr=(a,e,t)=>e(h(t).value),Zr=S("<button><span> </span></button>"),qr=S('<div class="absolute left-0 top-full z-50 mt-2 w-48 origin-top-left rounded border border-gray-200 bg-white shadow-lg"><div class="p-1"></div> <div class="my-1 h-px bg-gray-200"></div> <div class="p-1"></div></div>'),Ur=S('<div class="flex items-center gap-2"><button class="flex h-8 w-8 items-center justify-center text-gray-600 transition-colors hover:bg-gray-100 hover:text-gray-900" title="Zoom Out"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"></path><path d="M7 10l6 0"></path><path d="M21 21l-6 -6"></path></svg></button> <button class="flex h-8 w-8 items-center justify-center text-gray-600 transition-colors hover:bg-gray-100 hover:text-gray-900" title="Zoom In"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"></path><path d="M7 10l6 0"></path><path d="M10 7l0 6"></path><path d="M21 21l-6 -6"></path></svg></button> <div class="relative flex items-center"><button class="flex min-w-[70px] items-center justify-center gap-1 px-2 py-1 text-sm text-gray-700 transition-colors hover:bg-gray-100" title="Zoom Options"><span class="font-medium"> </span> <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6 9l6 6l6 -6"></path></svg></button> <!></div> <button><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M15 13v4"></path><path d="M13 15h4"></path><path d="M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"></path><path d="M22 22l-3 -3"></path><path d="M6 18h-1a2 2 0 0 1 -2 -2v-1"></path><path d="M3 11v-1"></path><path d="M3 6v-1a2 2 0 0 1 2 -2h1"></path><path d="M10 3h1"></path><path d="M15 3h1a2 2 0 0 1 2 2v1"></path></svg></button></div>');function Wr(a,e){Z(e,!0);const t=[{value:.5,label:"50%"},{value:1,label:"100%"},{value:1.5,label:"150%"},{value:2,label:"200%"},{value:4,label:"400%"},{value:8,label:"800%"},{value:16,label:"1600%"}],i=[{value:Q.FitPage,label:"Fit to Page"},{value:Q.FitWidth,label:"Fit to Width"}],r=bi(),n=Tt();let s=D(!1);const o=()=>{R(s,!1)},d=M=>{r.provides?.requestZoom(M),o()},c=M=>{r.provides?.requestZoom(M),o()},u=B(()=>Math.round(r.state.currentZoomLevel*100)),g=B(()=>n.state.activeMode==="marqueeZoom");var l=Ur(),p=m(l);p.__click=[Hr,r];var v=b(p,2);v.__click=[Fr,r];var x=b(v,2),w=m(x);w.__click=[Ar,s];var k=m(w),z=m(k);f(k);var L=b(k,2);f(w);var T=b(w,2);{var I=M=>{var E=qr(),H=m(E);ge(H,21,()=>t,we,(V,j)=>{var A=jr();A.__click=[Or,d,j];var W=m(A),_=m(W,!0);f(W),f(A),O(P=>{Y(A,1,`flex w-full items-center justify-between px-3 py-1.5 text-sm transition-colors ${P??""}`),ie(_,h(j).label)},[()=>Math.abs(r.state.currentZoomLevel-h(j).value)<.01?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"]),y(V,A)}),f(H);var U=b(H,4);ge(U,21,()=>i,we,(V,j)=>{var A=Zr();A.__click=[Nr,c,j];var W=m(A),_=m(W,!0);f(W),f(A),O(()=>{Y(A,1,`flex w-full items-center justify-between px-3 py-1.5 text-sm transition-colors ${r.state.zoomLevel===h(j).value?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}`),ie(_,h(j).label)}),y(V,A)}),f(U),f(E),y(M,E)};N(T,M=>{h(s)&&M(I)})}f(x),Je(x,(M,E)=>lt?.(M,E),()=>o);var C=b(x,2);C.__click=[Dr,r,o],f(l),O(()=>{ie(z,`${h(u)??""}%`),Y(L,0,`text-gray-400 transition-transform duration-200 ${h(s)?"rotate-180":""}`),Y(C,1,`flex h-8 w-8 items-center justify-center text-gray-600 transition-colors ${h(g)?"bg-gray-200 text-gray-900":"hover:bg-gray-100 hover:text-gray-900"}`),kt(C,"title",`${h(g)?"Disable":"Enable"} Area Zoom`)}),y(a,l),q()}xe(["click"]);const Br=(a,e)=>{R(e,!h(e))},Vr=(a,e,t)=>{e?.provides?.rotateForward(),t()},Gr=(a,e,t)=>{e?.provides?.rotateBackward(),t()};var Yr=(a,e)=>e(ee.None),Xr=(a,e)=>e(ee.Odd),Kr=(a,e)=>e(ee.Even),Jr=S('<div class="absolute left-0 top-full z-50 mt-2 w-56 origin-top-left rounded border border-gray-200 bg-white shadow-lg"><div class="p-1"><div class="mb-1 px-3 py-1 text-xs font-medium text-gray-500">Page Orientation</div> <button class="flex w-full items-center justify-start gap-2 px-3 py-1.5 text-left text-sm text-gray-700 transition-colors hover:bg-gray-50"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 text-gray-500"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M15 4.55a8 8 0 0 0 -6 14.9m0 -4.45v5h-5"></path><path d="M18.37 7.16l0 .01"></path><path d="M13 19.94l0 .01"></path><path d="M16.84 18.37l0 .01"></path><path d="M19.37 15.1l0 .01"></path><path d="M19.94 11l0 .01"></path></svg> <span>Rotate Clockwise</span></button> <button class="flex w-full items-center justify-start gap-2 px-3 py-1.5 text-left text-sm text-gray-700 transition-colors hover:bg-gray-50"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 text-gray-500"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9 4.55a8 8 0 0 1 6 14.9m0 -4.45v5h5"></path><path d="M5.63 7.16l0 .01"></path><path d="M4.06 11l0 .01"></path><path d="M4.63 15.1l0 .01"></path><path d="M7.16 18.37l0 .01"></path><path d="M11 19.94l0 .01"></path></svg> <span>Rotate Counter-clockwise</span></button></div> <div class="my-1 h-px bg-gray-200"></div> <div class="p-1"><div class="mb-1 px-3 py-1 text-xs font-medium text-gray-500">Page Layout</div> <button><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 text-gray-500"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M14 3v4a1 1 0 0 0 1 1h4"></path><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"></path><path d="M9 9l1 0"></path><path d="M9 13l6 0"></path><path d="M9 17l6 0"></path></svg> <span>Single Page</span></button> <button><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 text-gray-500"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M3 7h2m14 0h2"></path><path d="M3 11h2m14 0h2"></path><path d="M3 15h2m14 0h2"></path><path d="M12 3m0 2a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-4a2 2 0 0 1 -2 -2z"></path><path d="M4 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"></path></svg> <span>Odd Pages</span></button> <button><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 text-gray-500"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M3 7h2m14 0h2"></path><path d="M3 11h2m14 0h2"></path><path d="M3 15h2m14 0h2"></path><path d="M12 3m0 2a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-4a2 2 0 0 1 -2 -2z"></path><path d="M4 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"></path></svg> <span>Even Pages</span></button></div></div>'),Qr=S('<div class="relative flex items-center"><button title="Page Settings"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"></path><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"></path></svg></button> <!></div>');function en(a,e){Z(e,!0);const t=Ni(),i=Li();let r=D(!1);const n=()=>{R(r,!1)},s=g=>{i.provides?.setSpreadMode(g),n()};var o=Qr(),d=m(o);d.__click=[Br,r];var c=b(d,2);{var u=g=>{var l=Jr(),p=m(l),v=b(m(p),2);v.__click=[Vr,t,n];var x=b(v,2);x.__click=[Gr,t,n],f(p);var w=b(p,4),k=b(m(w),2);k.__click=[Yr,s];var z=b(k,2);z.__click=[Xr,s];var L=b(z,2);L.__click=[Kr,s],f(w),f(l),O(()=>{Y(k,1,`flex w-full items-center justify-start gap-2 px-3 py-1.5 text-left text-sm transition-colors ${i.spreadMode===ee.None?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}`),Y(z,1,`flex w-full items-center justify-start gap-2 px-3 py-1.5 text-left text-sm transition-colors ${i.spreadMode===ee.Odd?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}`),Y(L,1,`flex w-full items-center justify-start gap-2 px-3 py-1.5 text-left text-sm transition-colors ${i.spreadMode===ee.Even?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}`)}),y(g,l)};N(c,g=>{h(r)&&g(u)})}f(o),Je(o,(g,l)=>lt?.(g,l),()=>n),O(()=>Y(d,1,`flex h-8 w-8 items-center justify-center text-gray-600 transition-colors ${h(r)?"bg-gray-200 text-gray-900":"hover:bg-gray-100 hover:text-gray-900"}`)),y(a,o),q()}xe(["click"]);const tn=(a,e)=>{R(e,!h(e))},an=(a,e,t)=>{e.provides?.openFileDialog(),t()},rn=(a,e,t)=>{e.provides?.download(),t()},nn=(a,e,t)=>{e.onOpenPrint?.(),t()},sn=(a,e,t)=>{e.provides?.toggleFullscreen(),t()},on=(a,e)=>{e.provides?.togglePan()},ln=(a,e)=>{e.provides?.activate("pointerMode")};var cn=S('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 text-gray-500"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M15 19v-2a2 2 0 0 1 2 -2h2"></path><path d="M15 5v2a2 2 0 0 0 2 2h2"></path><path d="M5 15h2a2 2 0 0 1 2 2v2"></path><path d="M5 9h2a2 2 0 0 0 2 -2v-2"></path></svg> <span>Exit Fullscreen</span>',1),dn=S('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 text-gray-500"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M16 4l4 0l0 4"></path><path d="M14 10l6 -6"></path><path d="M8 20l-4 0l0 -4"></path><path d="M4 20l6 -6"></path><path d="M16 20l4 0l0 -4"></path><path d="M14 14l6 6"></path><path d="M8 4l-4 0l0 4"></path><path d="M4 4l6 6"></path></svg> <span>Fullscreen</span>',1),hn=S('<div class="absolute left-0 top-full z-50 mt-2 w-48 origin-top-left rounded border border-gray-200 bg-white shadow-lg"><div class="p-1"><button class="flex w-full items-center justify-start gap-2 px-3 py-1.5 text-left text-sm text-gray-700 transition-colors hover:bg-gray-50"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 text-gray-500"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M14 3v4a1 1 0 0 0 1 1h4"></path><path d="M12 21h-5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v4.5"></path><path d="M16.5 17.5m-2.5 0a2.5 2.5 0 1 0 5 0a2.5 2.5 0 1 0 -5 0"></path><path d="M18.5 19.5l2.5 2.5"></path></svg> <span>Open File</span></button> <button class="flex w-full items-center justify-start gap-2 px-3 py-1.5 text-left text-sm text-gray-700 transition-colors hover:bg-gray-50"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 text-gray-500"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"></path><path d="M7 11l5 5l5 -5"></path><path d="M12 4l0 12"></path></svg> <span>Download</span></button> <button class="flex w-full items-center justify-start gap-2 px-3 py-1.5 text-left text-sm text-gray-700 transition-colors hover:bg-gray-50"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="shrink-0 text-gray-500"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M17 17h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h2"></path><path d="M17 9v-4a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v4"></path><path d="M7 13m0 2a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2z"></path></svg> <span>Print</span></button> <button class="flex w-full items-center justify-start gap-2 px-3 py-1.5 text-left text-sm text-gray-700 transition-colors hover:bg-gray-50"><!></button></div></div>'),un=S('<div class="flex w-full items-center gap-3 border-b border-gray-200 bg-gray-50 px-4 py-2"><div class="relative"><button title="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 6l16 0"></path><path d="M4 12l16 0"></path><path d="M4 18l16 0"></path></svg></button> <!></div> <div class="h-6 w-px bg-gray-300"></div> <button title="Toggle Sidebar"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"></path><path d="M9 4l0 16"></path></svg></button> <div class="h-6 w-px bg-gray-300"></div> <!> <div class="h-6 w-px bg-gray-300"></div> <!> <div class="h-6 w-px bg-gray-300"></div> <button title="Pan Mode"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"></path><path d="M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"></path><path d="M14 5.5a1.5 1.5 0 0 1 3 0v6.5"></path><path d="M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"></path></svg></button> <button title="Pointer Mode"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M7.904 17.563a1.2 1.2 0 0 0 2.228 .308l2.09 -3.093l4.907 4.907a1.067 1.067 0 0 0 1.509 0l1.047 -1.047a1.067 1.067 0 0 0 0 -1.509l-4.907 -4.907l3.113 -2.09a1.2 1.2 0 0 0 -.309 -2.228l-13.582 -3.904l3.904 13.563z"></path></svg></button> <div class="flex-1"></div> <button title="Toggle Search"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg></button></div>');function gn(a,e){Z(e,!0);const t=ye(e,"isSidebarOpen",3,!1),i=ye(e,"isSearchOpen",3,!1),r=tr(),n=Jt(),s=Va(),o=lr(),d=Tt();let c=D(!1);const u=()=>{R(c,!1)};var g=un(),l=m(g),p=m(l);p.__click=[tn,c];var v=b(p,2);{var x=C=>{var M=hn(),E=m(M),H=m(E);H.__click=[an,s,u];var U=b(H,2);U.__click=[rn,n,u];var V=b(U,2);V.__click=[nn,e,u];var j=b(V,2);j.__click=[sn,r,u];var A=m(j);{var W=P=>{var $=cn();ue(2),y(P,$)},_=P=>{var $=dn();ue(2),y(P,$)};N(A,P=>{r.state.isFullscreen?P(W):P(_,!1)})}f(j),f(E),f(M),y(C,M)};N(v,C=>{h(c)&&C(x)})}f(l),Je(l,(C,M)=>lt?.(C,M),()=>u);var w=b(l,4);w.__click=function(...C){e.onToggleSidebar?.apply(this,C)};var k=b(w,4);en(k,{});var z=b(k,4);Wr(z,{});var L=b(z,4);L.__click=[on,o];var T=b(L,2);T.__click=[ln,d];var I=b(T,4);I.__click=function(...C){e.onToggleSearch?.apply(this,C)},f(g),O(()=>{Y(p,1,`flex h-8 w-8 items-center justify-center text-gray-600 transition-colors ${h(c)?"bg-gray-200 text-gray-900":"hover:bg-gray-100 hover:text-gray-900"}`),Y(w,1,`flex h-8 w-8 items-center justify-center text-gray-600 transition-colors ${t()?"bg-gray-200 text-gray-900":"hover:bg-gray-100 hover:text-gray-900"}`),Y(L,1,`flex h-8 w-8 items-center justify-center text-gray-600 transition-colors ${o.isPanning?"bg-gray-200 text-gray-900":"hover:bg-gray-100 hover:text-gray-900"}`),Y(T,1,`flex h-8 w-8 items-center justify-center text-gray-600 transition-colors ${d.state.activeMode==="pointerMode"?"bg-gray-200 text-gray-900":"hover:bg-gray-100 hover:text-gray-900"}`),Y(I,1,`flex h-8 w-8 items-center justify-center text-gray-600 transition-colors ${i()?"bg-gray-200 text-gray-900":"hover:bg-gray-100 hover:text-gray-900"}`)}),y(a,g),q()}xe(["click"]);const pn=(a,e)=>{e.state.currentPage>1&&e.provides?.scrollToPage?.({pageNumber:e.state.currentPage-1})},vn=(a,e)=>{e.state.currentPage<e.state.totalPages&&e.provides?.scrollToPage?.({pageNumber:e.state.currentPage+1})},fn=(a,e)=>{const i=a.target.value.replace(/[^0-9]/g,"");R(e,i,!0)};var mn=S('<div role="toolbar" aria-label="Page navigation" tabindex="-1" class="pointer-events-auto fixed bottom-4 left-1/2 z-[1000] -translate-x-1/2 transition-opacity duration-200 ease-in-out"><div class="flex items-center gap-2 rounded border border-gray-300 bg-gray-50 p-1 shadow-md"><button class="flex h-8 w-8 items-center justify-center text-gray-600 transition-colors hover:bg-gray-100 hover:text-gray-900 disabled:cursor-not-allowed disabled:text-gray-400 disabled:hover:bg-transparent" title="Previous Page"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M15 6l-6 6l6 6"></path></svg></button> <form class="flex items-center gap-2"><input type="text" name="page" class="h-7 w-12 rounded border border-gray-300 bg-white px-1 text-center text-sm focus:border-gray-400 focus:outline-none"/> <span class="text-sm text-gray-600"> </span></form> <button class="flex h-8 w-8 items-center justify-center text-gray-600 transition-colors hover:bg-gray-100 hover:text-gray-900 disabled:cursor-not-allowed disabled:text-gray-400 disabled:hover:bg-transparent" title="Next Page"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9 6l6 6l-6 6"></path></svg></button></div></div>');function bn(a,e){Z(e,!0);const t=Ga(),i=Qe();let r=D(!1),n=D(!1),s=null,o=D("1");F(()=>{R(o,i.state.currentPage.toString(),!0)});const d=()=>{s&&clearTimeout(s),s=setTimeout(()=>{h(n)||R(r,!1)},4e3)};F(()=>{if(!t.provides)return;const T=t.provides.onScrollActivity(I=>{I&&(R(r,!0),d())});return()=>{s&&clearTimeout(s),T?.()}});const c=()=>{R(n,!0),R(r,!0)},u=()=>{R(n,!1),d()},g=T=>{T.preventDefault();const I=parseInt(h(o));!isNaN(I)&&I>=1&&I<=i.state.totalPages&&i.provides?.scrollToPage?.({pageNumber:I})};var l=mn(),p=m(l),v=m(p);v.__click=[pn,i];var x=b(v,2),w=m(x);ce(w),w.__input=[fn,o];var k=b(w,2),z=m(k);f(k),f(x);var L=b(x,2);L.__click=[vn,i],f(p),f(l),O(()=>{se(l,`opacity: ${h(r)?1:0}`),v.disabled=i.state.currentPage===1,Aa(w,h(o)),ie(z,`/ ${i.state.totalPages??""}`),L.disabled=i.state.currentPage===i.state.totalPages}),Le("mouseenter",l,c),Le("mouseleave",l,u),Le("submit",x,g),y(a,l),q()}xe(["click","input"]);var xn=(a,e,t)=>e(t().pageIndex),yn=(a,e,t)=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),e(t().pageIndex))},wn=S('<div role="button" tabindex="0"><div class="thumb-img-wrapper svelte-129hoe0"><!></div> <div class="thumb-label svelte-129hoe0"> </div></div>'),_n=S('<div class="sidebar svelte-129hoe0"><!></div>');function Pn(a,e){Z(e,!1);const t=Qe(),i=o=>t.state.currentPage===o+1,r=o=>{t.provides?.scrollToPage({pageNumber:o+1,behavior:"smooth"})};di();var n=_n(),s=m(n);mr(s,{style:"width: 100%; height: 100%;",class:"thumbs-viewport",children:(d,c=Ke)=>{var u=wn();let g;u.__click=[xn,r,c],u.__keydown=[yn,r,c];let l;var p=m(u);let v;var x=m(p);vr(x,{class:"thumb-img",get meta(){return c()},get style(){return`width: ${c().width??""}px; height: ${c().height??""}px; display: block;`}}),f(p);var w=b(p,2);let k;var z=m(w);f(w),f(u),O((L,T,I,C)=>{g=Y(u,1,"thumb-row svelte-129hoe0",null,g,L),l=se(u,"",l,T),v=se(p,"",v,I),k=se(w,"",k,C),ie(z,`Page ${c().pageIndex+1}`)},[()=>({active:i(c().pageIndex)}),()=>({position:"absolute",top:`${c().top??""}px`,left:"0",right:"0",height:`${c().wrapperHeight??""}px`}),()=>({padding:`${(c().padding||0)??""}px`,"box-sizing":"content-box"}),()=>({height:`${c().labelHeight??""}px`})]),y(d,u)},$$slots:{default:!0}}),f(n),y(a,n),q()}xe(["click","keydown"]);var Sn=S('<button class="absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"><svg class="h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>'),kn=(a,e)=>e(Ae.MatchCase,a.currentTarget.checked),Mn=(a,e)=>e(Ae.MatchWholeWord,a.currentTarget.checked),Rn=(a,e)=>e.provides?.previousResult(),Cn=(a,e)=>e.provides?.nextResult(),Tn=S('<div class="flex gap-1"><button class="rounded p-1 text-gray-600 hover:bg-gray-100" title="Previous result"><svg class="h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline></svg></button> <button class="rounded p-1 text-gray-600 hover:bg-gray-100" title="Next result"><svg class="h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></button></div>'),In=S('<div class="flex items-center justify-between"><span class="text-sm text-blue-600"> </span> <!></div>'),zn=S('<div class="flex h-full items-center justify-center"><svg class="h-6 w-6 animate-spin text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>'),En=(a,e,t)=>e(t()),Ln=S("<span></span>"),$n=S("<span></span>"),An=S('<button><div class="text-gray-700"><!> <span> </span> <span class="font-bold text-blue-600"> </span> <span> </span> <!></div></button>'),Fn=S('<div class="mb-4"><div class="mb-2 text-xs font-medium text-gray-500"> </div> <div class="space-y-2"></div></div>'),Hn=S('<div class="flex h-full flex-col bg-white"><div class="p-3"><div class="relative"><input type="text" placeholder="Search" class="w-full rounded border border-gray-300 py-2 pl-9 pr-8 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"/> <svg class="absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg> <!></div> <div class="mt-3 space-y-2"><label class="flex items-center gap-2"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"/> <span class="text-sm text-gray-700">Case sensitive</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"/> <span class="text-sm text-gray-700">Whole word</span></label></div> <div class="my-3 border-t border-gray-200"></div> <!></div> <div class="flex-1 overflow-y-auto px-3 pb-3"><!></div></div>');function Dn(a,e){Z(e,!0);const t=kr(),i=Ya();let r=D(be(t.state.query||"")),n;F(()=>{yt().then(()=>{n?.focus(),R(r,t.state.query||"",!0)})}),F(()=>{h(r)===""?t.provides?.stopSearch():t.provides?.searchAllPages(h(r))}),F(()=>{typeof t.state.activeResultIndex=="number"&&!t.state.loading&&t.state.results.length>0&&d(t.state.activeResultIndex)});const s=(_,P)=>{const $=t.state.flags;P?t.provides?.setFlags([...$,_]):t.provides?.setFlags($.filter(K=>K!==_))},o=()=>{R(r,""),n?.focus()},d=_=>{const P=t.state.results[_];if(!P)return;const $=P.rects.reduce((K,te)=>({x:Math.min(K.x,te.origin.x),y:Math.min(K.y,te.origin.y)}),{x:1/0,y:1/0});i.provides?.scrollToPage({pageNumber:P.pageIndex+1,pageCoordinates:$,center:!0})},c=_=>_.reduce((P,$,K)=>((P[$.pageIndex]??=[]).push({hit:$,index:K}),P),{}),u=B(()=>c(t.state.results)),g=_=>{t.provides?.goToResult(_)},l=B(()=>t.state.flags.includes(Ae.MatchCase)),p=B(()=>t.state.flags.includes(Ae.MatchWholeWord));var v=Hn(),x=m(v),w=m(x),k=m(w);ce(k),Te(k,_=>n=_,()=>n);var z=b(k,4);{var L=_=>{var P=Sn();P.__click=o,y(_,P)};N(z,_=>{h(r)&&_(L)})}f(w);var T=b(w,2),I=m(T),C=m(I);ce(C),C.__change=[kn,s],ue(2),f(I);var M=b(I,2),E=m(M);ce(E),E.__change=[Mn,s],ue(2),f(M),f(T);var H=b(T,4);{var U=_=>{var P=In(),$=m(P),K=m($);f($);var te=b($,2);{var ne=ae=>{var pe=Tn(),he=m(pe);he.__click=[Rn,t];var G=b(he,2);G.__click=[Cn,t],f(pe),y(ae,pe)};N(te,ae=>{t.state.total>1&&ae(ne)})}f(P),O(()=>ie(K,`${t.state.total??""} result${t.state.total!==1?"s":""} found`)),y(_,P)};N(H,_=>{t.state.active&&!t.state.loading&&_(U)})}f(x);var V=b(x,2),j=m(V);{var A=_=>{var P=zn();y(_,P)},W=_=>{var P=de(),$=re(P);ge($,17,()=>Object.entries(h(u)),we,(K,te)=>{var ne=B(()=>Ea(h(te),2));let ae=()=>h(ne)[0],pe=()=>h(ne)[1];var he=Fn(),G=m(he),ve=m(G);f(G);var Ee=b(G,2);ge(Ee,21,pe,we,(Oe,ct)=>{let Pe=()=>h(ct).hit,dt=()=>h(ct).index;var Se=An();Se.__click=[En,g,dt];var ht=m(Se),ut=m(ht);{var ka=fe=>{var qe=Ln();y(fe,qe)};N(ut,fe=>{Pe().context.truncatedLeft&&fe(ka)})}var je=b(ut,2),Ma=m(je,!0);f(je);var Ne=b(je,2),Ra=m(Ne,!0);f(Ne);var Ze=b(Ne,2),Ca=m(Ze,!0);f(Ze);var Ta=b(Ze,2);{var Ia=fe=>{var qe=$n();y(fe,qe)};N(Ta,fe=>{Pe().context.truncatedRight&&fe(Ia)})}f(ht),f(Se),O(()=>{Y(Se,1,`w-full cursor-pointer rounded border p-3 text-left text-sm transition-all hover:-translate-y-0.5 ${dt()===t.state.activeResultIndex?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`),ie(Ma,Pe().context.before),ie(Ra,Pe().context.match),ie(Ca,Pe().context.after)}),y(Oe,Se)}),f(Ee),f(he),O(Oe=>ie(ve,`Page ${Oe??""}`),[()=>Number(ae())+1]),y(K,he)}),y(_,P)};N(j,_=>{t.state.loading?_(A):_(W,!1)})}f(V),f(v),O(()=>{Me(C,h(l)),Me(E,h(p))}),It(k,()=>h(r),_=>R(r,_)),y(a,v),q()}xe(["click","change"]);const On=(a,e)=>{a.target===a.currentTarget&&e()};var jn=(a,e)=>R(e,"all"),Nn=(a,e)=>R(e,"current"),Zn=(a,e)=>R(e,"custom"),qn=S('<p class="mt-1 text-xs text-gray-500"> </p>'),Un=La('<svg class="h-4 w-4 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Wn=S('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50" role="presentation"><div class="w-full max-w-md rounded-lg bg-white shadow-xl" role="dialog" aria-modal="true" aria-labelledby="print-dialog-title"><div class="border-b border-gray-200 px-6 py-4"><h2 id="print-dialog-title" class="text-lg font-semibold text-gray-900">Print Settings</h2></div> <div class="space-y-6 px-6 py-4"><div><div class="mb-2 block text-sm font-medium text-gray-700">Pages to print</div> <div class="space-y-2"><label class="flex items-center gap-2"><input type="radio" name="pageSelection" value="all" class="h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500"/> <span class="text-sm text-gray-700">All pages</span></label> <label class="flex items-center gap-2"><input type="radio" name="pageSelection" value="current" class="h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500"/> <span class="text-sm text-gray-700"> </span></label> <label class="flex items-center gap-2"><input type="radio" name="pageSelection" value="custom" class="h-4 w-4 border-gray-300 text-blue-600 focus:ring-blue-500"/> <span class="text-sm text-gray-700">Specify pages</span></label></div> <div class="mt-2"><input type="text" placeholder="e.g., 1-3, 5, 8-10" class="w-full rounded border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:bg-gray-100 disabled:text-gray-500"/> <!></div></div> <div><label class="flex items-center gap-2"><input type="checkbox" class="h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"/> <span class="text-sm text-gray-700">Include annotations</span></label></div></div> <div class="flex justify-end gap-2 border-t border-gray-200 px-6 py-4"><button class="rounded px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50">Cancel</button> <button class="flex items-center gap-2 rounded bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:cursor-not-allowed disabled:bg-gray-400"><!> <span>Print</span></button></div></div></div>');function Bn(a,e){Z(e,!0);const t=Sa(),i=Qe();let r=D("all"),n=D(""),s=D(!0),o=D(!1);const d=B(()=>!h(o)&&(h(r)!=="custom"||h(n).trim().length>0)),c=()=>{e.onClose(),R(r,"all"),R(n,""),R(s,!0),R(o,!1)},u=async()=>{if(!t||!h(d))return;R(o,!0);let v;h(r)==="current"?v=String(i.state.currentPage):h(r)==="custom"&&(v=h(n).trim()||void 0);const x={includeAnnotations:h(s),pageRange:v};try{const w=t.provides?.print(x);w&&w.wait(()=>{c()},k=>{console.error("Print failed:",k),R(o,!1)})}catch(w){console.error("Print failed:",w),R(o,!1)}};var g=de(),l=re(g);{var p=v=>{var x=Wn();x.__click=[On,c];var w=m(x),k=b(m(w),2),z=m(k),L=b(m(z),2),T=m(L),I=m(T);ce(I),I.__change=[jn,r],ue(2),f(T);var C=b(T,2),M=m(C);ce(M),M.__change=[Nn,r];var E=b(M,2),H=m(E);f(E),f(C);var U=b(C,2),V=m(U);ce(V),V.__change=[Zn,r],ue(2),f(U),f(L);var j=b(L,2),A=m(j);ce(A);var W=b(A,2);{var _=G=>{var ve=qn(),Ee=m(ve);f(ve),O(()=>ie(Ee,`Total pages in document: ${i.state.totalPages??""}`)),y(G,ve)};N(W,G=>{h(n).trim()&&i.state.totalPages>0&&G(_)})}f(j),f(z);var P=b(z,2),$=m(P),K=m($);ce(K),ue(2),f($),f(P),f(k);var te=b(k,2),ne=m(te);ne.__click=c;var ae=b(ne,2);ae.__click=u;var pe=m(ae);{var he=G=>{var ve=Un();y(G,ve)};N(pe,G=>{h(o)&&G(he)})}ue(2),f(ae),f(te),f(w),f(x),O(()=>{Me(I,h(r)==="all"),Me(M,h(r)==="current"),ie(H,`Current page (${i.state.currentPage??""})`),Me(V,h(r)==="custom"),A.disabled=h(r)!=="custom",ne.disabled=h(o),ae.disabled=!h(d)}),It(A,()=>h(n),G=>R(n,G)),hi(K,()=>h(s),G=>R(s,G)),y(v,x)};N(l,v=>{e.open&&v(p)})}y(a,g),q()}xe(["click","change"]);const Vn=(a,e)=>{let t=()=>e?.().pageIndex,i=()=>e?.().scale;var r=Yn(),n=re(r);li(n,{get pageIndex(){return t()},scale:1});var s=b(n,2);Ci(s,{get pageIndex(){return t()},get scale(){return i()}});var o=b(s,2);ci(o,{get pageIndex(){return t()},get scale(){return i()}});var d=b(o,2);Cr(d,{get pageIndex(){return t()},get scale(){return i()}});var c=b(d,2);yi(c,{get pageIndex(){return t()},get scale(){return i()}}),y(a,r)},Gn=(a,e=Ke)=>{var t=Xn();let i;var r=m(t);{let n=B(()=>({width:e().width,height:e().height}));qi(r,{get pageSize(){return h(n)},children:(s,o)=>{oi(s,{get pageIndex(){return e().pageIndex},get pageWidth(){return e().width},get pageHeight(){return e().height},get rotation(){return e().rotation},get scale(){return e().scale},children:(d,c)=>{Vn(d,e)},$$slots:{default:!0}})},$$slots:{default:!0}})}f(t),O(n=>i=se(t,"",i,n),[()=>({width:`${e().width}`,height:`${e().height}`,position:"relative"})]),y(a,t)};var Yn=S("<!> <!> <!> <!> <!>",1),Xn=S("<div><!></div>"),Kn=S('<div class="flex h-screen items-center justify-center bg-gray-100"><div class="flex flex-col items-center gap-4"><svg class="h-12 w-12 animate-spin text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p class="text-sm text-gray-600">Loading PDF...</p></div></div>'),Jn=S('<div class="w-64 shrink-0 overflow-hidden border-r border-gray-200"><!></div>'),Qn=S("<!> <!>",1),es=S('<div class="w-80 shrink-0 overflow-hidden border-l border-gray-200"><!></div>'),ts=S('<div class="flex h-full flex-col"><!> <div class="flex flex-1 overflow-hidden"><!> <div class="flex-1 overflow-hidden"><!></div> <!></div></div> <!>',1),as=S('<div id="view-page" class="flex h-screen flex-1 flex-col overflow-hidden"><!></div>');function ys(a,e){Z(e,!0);const t=Xa();let i=D(!1),r=D(!1),n=D(!1);const s=()=>{R(i,!h(i))},o=()=>{R(r,!h(r))},d=()=>{R(n,!0)},c=()=>{R(n,!1)};let u=B(()=>[X(Qa,{loadingOptions:{type:"url",pdfFile:{id:"1",url:"https://snippet.embedpdf.com/ebook.pdf"}}}),X(ei),X(ti),X(ai),X(Si),X(mi),X(ii),X(ri),X(zi),X(Oi),X(Yi),X(rr),X(dr),X(Sr),X($r),X(ur,{imagePadding:10,labelHeight:25})]);var g=de(),l=re(g);{var p=x=>{var w=Kn();y(x,w)},v=x=>{var w=as(),k=m(w);Ka(k,{get engine(){return t.engine},logger:void 0,get plugins(){return h(u)},children:(z,L)=>{var T=ts(),I=re(T),C=m(I);gn(C,{get isSidebarOpen(){return h(i)},onToggleSidebar:s,get isSearchOpen(){return h(r)},onToggleSearch:o,onOpenPrint:d});var M=b(C,2),E=m(M);{var H=_=>{var P=Jn(),$=m(P);Pn($,{}),f(P),y(_,P)};N(E,_=>{h(i)&&_(H)})}var U=b(E,2),V=m(U);Ja(V,{children:(_,P)=>{ni(_,{class:"h-full w-full overflow-auto select-none bg-gray-100",children:($,K)=>{var te=Qn(),ne=re(te);si(ne,{get RenderPageSnippet(){return Gn}});var ae=b(ne,2);bn(ae,{}),y($,te)},$$slots:{default:!0}})},$$slots:{default:!0}}),f(U);var j=b(U,2);{var A=_=>{var P=es(),$=m(P);Dn($,{}),f(P),y(_,P)};N(j,_=>{h(r)&&_(A)})}f(M),f(I);var W=b(I,2);Bn(W,{get open(){return h(n)},onClose:c}),y(z,T)},$$slots:{default:!0}}),f(w),y(x,w)};N(l,x=>{!t.engine||t.isLoading?x(p):x(v,!1)})}y(a,g),q()}export{ys as component};
