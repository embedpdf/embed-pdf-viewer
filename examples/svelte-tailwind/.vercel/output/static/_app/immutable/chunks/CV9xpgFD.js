import{N as zr,P as S,a as x,p as tt,i as Hr,b as Yt,u as Kt,c as w,d as $r,e as Yr,f as Kr,g as Me,h as ne,j as Le,k as Xr,l as be,m as Xt,w as Jt,n as Jr,o as ct,q as qr,r as qt,t as Qr,v as Ne,x as Zr,y as eo,z as nt,R as Qt,A as Ve,B as Zt,C as to,D as en,T as tn,E as ge,F as ie,M as nn,G as no}from"./2PxcrNm-.js";function ae($,r,n,e=100){let i=$.wasmExports.malloc(e);for(let d=0;d<e;d++)$.HEAP8[i+d]=0;const u=r(i,e);let m;if(u>e){$.wasmExports.free(i),i=$.wasmExports.malloc(u);for(let d=0;d<u;d++)$.HEAP8[i+d]=0;r(i,u),m=n(i)}else m=n(i);return $.wasmExports.free(i),m}function _t($,r){const n=r(0,0),e=$.wasmExports.malloc(n);r(e,n);const i=new ArrayBuffer(n),u=new DataView(i);for(let m=0;m<n;m++)u.setInt8(m,$.getValue(e+m,"i8"));return $.wasmExports.free(e),i}const ro=new Set(["Title","Author","Subject","Keywords","Producer","Creator","CreationDate","ModDate","Trapped"]);function oo($){if(!$||$.length>127||ro.has($)||$[0]==="/")return!1;for(let r=0;r<$.length;r++){const n=$.charCodeAt(r);if(n<32||n>126)return!1}return!0}const io={pageTtl:5e3,maxPagesPerDocument:10};class ao{constructor(r,n={}){this.pdfium=r,this.docs=new Map,this.config={...io,...n}}setDocument(r,n,e){let i=this.docs.get(r);i||(i=new so(n,e,this.pdfium,this.config),this.docs.set(r,i))}getContext(r){return this.docs.get(r)}closeDocument(r){const n=this.docs.get(r);return n?(n.dispose(),this.docs.delete(r),!0):!1}closeAllDocuments(){for(const r of this.docs.values())r.dispose();this.docs.clear()}updateConfig(r){Object.assign(this.config,r);for(const n of this.docs.values())n.updateConfig(this.config)}getCacheStats(){const r={};let n=0;for(const[e,i]of this.docs.entries()){const u=i.getCacheSize();r[e]=u,n+=u}return{documents:this.docs.size,totalPages:n,pagesByDocument:r}}}class so{constructor(r,n,e,i){this.filePtr=r,this.docPtr=n,this.pageCache=new uo(e,n,i)}acquirePage(r){return this.pageCache.acquire(r)}borrowPage(r,n){return this.pageCache.borrowPage(r,n)}updateConfig(r){this.pageCache.updateConfig(r)}getCacheSize(){return this.pageCache.size()}dispose(){this.pageCache.forceReleaseAll(),this.pageCache.pdf.FPDF_CloseDocument(this.docPtr),this.pageCache.pdf.pdfium.wasmExports.free(this.filePtr)}}class uo{constructor(r,n,e){this.pdf=r,this.docPtr=n,this.cache=new Map,this.accessOrder=[],this.config=e}acquire(r){let n=this.cache.get(r);if(!n){this.evictIfNeeded();const e=this.pdf.FPDF_LoadPage(this.docPtr,r);n=new mo(this.pdf,this.docPtr,r,e,this.config.pageTtl,()=>{this.cache.delete(r),this.removeFromAccessOrder(r)}),this.cache.set(r,n)}return this.updateAccessOrder(r),n.clearExpiryTimer(),n.bumpRefCount(),n}borrowPage(r,n){const e=this.cache.has(r),i=this.acquire(r);try{return n(i)}finally{e?i.release():i.disposeImmediate()}}forceReleaseAll(){for(const r of this.cache.values())r.disposeImmediate();this.cache.clear(),this.accessOrder.length=0}updateConfig(r){this.config=r;for(const n of this.cache.values())n.updateTtl(r.pageTtl);this.evictIfNeeded()}size(){return this.cache.size}evictIfNeeded(){for(;this.cache.size>=this.config.maxPagesPerDocument;){const r=this.accessOrder[0];if(r!==void 0){const n=this.cache.get(r);if(n)if(n.getRefCount()===0)n.disposeImmediate();else break;else this.removeFromAccessOrder(r)}else break}}updateAccessOrder(r){this.removeFromAccessOrder(r),this.accessOrder.push(r)}removeFromAccessOrder(r){const n=this.accessOrder.indexOf(r);n>-1&&this.accessOrder.splice(n,1)}}class mo{constructor(r,n,e,i,u,m){this.pdf=r,this.docPtr=n,this.pageIdx=e,this.pagePtr=i,this.onFinalDispose=m,this.refCount=0,this.disposed=!1,this.ttl=u}bumpRefCount(){if(this.disposed)throw new Error("Context already disposed");this.refCount++}getRefCount(){return this.refCount}clearExpiryTimer(){this.expiryTimer&&(clearTimeout(this.expiryTimer),this.expiryTimer=void 0)}updateTtl(r){this.ttl=r,this.expiryTimer&&this.refCount===0&&(this.clearExpiryTimer(),this.expiryTimer=setTimeout(()=>this.disposeImmediate(),this.ttl))}release(){this.disposed||(this.refCount--,this.refCount===0&&(this.expiryTimer=setTimeout(()=>this.disposeImmediate(),this.ttl)))}disposeImmediate(){this.disposed||(this.disposed=!0,this.clearExpiryTimer(),this.textPagePtr!==void 0&&this.pdf.FPDFText_ClosePage(this.textPagePtr),this.formHandle!==void 0&&(this.pdf.FORM_OnBeforeClosePage(this.pagePtr,this.formHandle),this.pdf.PDFiumExt_ExitFormFillEnvironment(this.formHandle)),this.formInfoPtr!==void 0&&this.pdf.PDFiumExt_CloseFormFillInfo(this.formInfoPtr),this.pdf.FPDF_ClosePage(this.pagePtr),this.onFinalDispose())}getTextPage(){return this.ensureAlive(),this.textPagePtr===void 0&&(this.textPagePtr=this.pdf.FPDFText_LoadPage(this.pagePtr)),this.textPagePtr}getFormHandle(){return this.ensureAlive(),this.formHandle===void 0&&(this.formInfoPtr=this.pdf.PDFiumExt_OpenFormFillInfo(),this.formHandle=this.pdf.PDFiumExt_InitFormFillEnvironment(this.docPtr,this.formInfoPtr),this.pdf.FORM_OnAfterLoadPage(this.pagePtr,this.formHandle)),this.formHandle}withAnnotation(r,n){this.ensureAlive();const e=this.pdf.FPDFPage_GetAnnot(this.pagePtr,r);try{return n(e)}finally{this.pdf.FPDFPage_CloseAnnot(e)}}ensureAlive(){if(this.disposed)throw new Error("PageContext already disposed")}}const rt=$=>$,Fo={MAX_TOTAL_MEMORY:2*1024*1024*1024},rn={MEMORY:Fo},Pt="PDFiumEngine",gt="MemoryManager";class lo{constructor(r,n){this.pdfiumModule=r,this.logger=n,this.allocations=new Map,this.totalAllocated=0}malloc(r){if(this.totalAllocated+r>rn.MEMORY.MAX_TOTAL_MEMORY)throw new Error(`Total memory usage would exceed limit: ${this.totalAllocated+r} > ${rn.MEMORY.MAX_TOTAL_MEMORY}`);const n=this.pdfiumModule.pdfium.wasmExports.malloc(r);if(!n)throw new Error(`Failed to allocate ${r} bytes`);const e={ptr:rt(n),size:r,timestamp:Date.now(),stack:this.logger.isEnabled("debug")?new Error().stack:void 0};return this.allocations.set(n,e),this.totalAllocated+=r,rt(n)}free(r){const n=this.allocations.get(r);n?(this.totalAllocated-=n.size,this.allocations.delete(r)):this.logger.warn(Pt,gt,`Freeing untracked pointer: ${r}`),this.pdfiumModule.pdfium.wasmExports.free(r)}getStats(){return{totalAllocated:this.totalAllocated,allocationCount:this.allocations.size,allocations:this.logger.isEnabled("debug")?Array.from(this.allocations.values()):[]}}checkLeaks(){if(this.allocations.size>0){this.logger.warn(Pt,gt,`Potential memory leak: ${this.allocations.size} unfreed allocations`);for(const[r,n]of this.allocations)this.logger.warn(Pt,gt,`  - ${r}: ${n.size} bytes`,n.stack)}}}const f="PDFiumEngine",D="Engine";class ft extends Error{constructor(r){super(r),this.name="OffscreenCanvasError"}}const co=($,r="image/webp",n)=>{if(typeof OffscreenCanvas>"u")return Promise.reject(new ft("OffscreenCanvas is not available in this environment. This converter is intended for browser use only. Falling back to WASM-based image encoding."));const e=$(),i=new ImageData(e.data,e.width,e.height),u=new OffscreenCanvas(i.width,i.height);return u.getContext("2d").putImageData(i,0,0),u.convertToBlob({type:r,quality:n})};class _o{constructor(r,n={}){this.pdfiumModule=r,this.memoryLeakCheckInterval=null;const{logger:e=new zr,imageDataConverter:i=co}=n;this.cache=new ao(this.pdfiumModule),this.logger=e,this.imageDataConverter=i,this.memoryManager=new lo(this.pdfiumModule,this.logger),this.logger.isEnabled("debug")&&(this.memoryLeakCheckInterval=setInterval(()=>{this.memoryManager.checkLeaks()},1e4))}initialize(){return this.logger.debug(f,D,"initialize"),this.logger.perf(f,D,"Initialize","Begin","General"),this.pdfiumModule.PDFiumExt_Init(),this.logger.perf(f,D,"Initialize","End","General"),S.resolve(!0)}destroy(){return this.logger.debug(f,D,"destroy"),this.logger.perf(f,D,"Destroy","Begin","General"),this.pdfiumModule.FPDF_DestroyLibrary(),this.memoryLeakCheckInterval&&(clearInterval(this.memoryLeakCheckInterval),this.memoryLeakCheckInterval=null),this.logger.perf(f,D,"Destroy","End","General"),S.resolve(!0)}withWString(r,n){const e=(r.length+1)*2,i=this.memoryManager.malloc(e);try{return this.pdfiumModule.pdfium.stringToUTF16(r,i,e),n(i)}finally{this.memoryManager.free(i)}}withFloatArray(r,n){const e=r??[],i=e.length*4,u=i?this.memoryManager.malloc(i):rt(0);try{if(i)for(let m=0;m<e.length;m++)this.pdfiumModule.pdfium.setValue(u+m*4,e[m],"float");return n(u,e.length)}finally{i&&this.memoryManager.free(u)}}openDocumentUrl(r,n){const e=n?.mode??"auto",i=n?.password??"";this.logger.debug(f,D,"openDocumentUrl called",r.url,e);const u=S.create();return(async()=>{try{(await this.fetchFullAndOpen(r,i)).wait(d=>u.resolve(d),d=>u.reject(d.reason))}catch(m){this.logger.error(f,D,"openDocumentUrl error",m),u.reject({code:x.Unknown,message:String(m)})}})(),u}async checkRangeSupport(r){try{this.logger.debug(f,D,"checkRangeSupport",r);const n=await fetch(r,{method:"HEAD"}),e=n.headers.get("Content-Length");if(n.headers.get("Accept-Ranges")==="bytes")return{supportsRanges:!0,fileLength:parseInt(e??"0"),content:null};const u=await fetch(r,{headers:{Range:"bytes=0-1"}});if(u.status===200){const m=await u.arrayBuffer();return{supportsRanges:!1,fileLength:parseInt(e??"0"),content:m}}return{supportsRanges:u.status===206,fileLength:parseInt(e??"0"),content:null}}catch(n){throw this.logger.error(f,D,"checkRangeSupport failed",n),new Error("Failed to check range support: "+n)}}async fetchFullAndOpen(r,n){this.logger.debug(f,D,"fetchFullAndOpen",r.url);const e=await fetch(r.url);if(!e.ok)throw new Error(`Could not fetch PDF: ${e.statusText}`);const i=await e.arrayBuffer(),u={id:r.id,name:r.name,content:i};return this.openDocumentBuffer(u,{password:n})}async openDocumentWithRangeRequest(r,n,e){this.logger.debug(f,D,"openDocumentWithRangeRequest",r.url);const i=e??(await this.retrieveFileLength(r.url)).fileLength,u=(m,d)=>{const _=new XMLHttpRequest;if(_.open("GET",r.url,!1),_.overrideMimeType("text/plain; charset=x-user-defined"),_.setRequestHeader("Range",`bytes=${m}-${m+d-1}`),_.send(null),_.status===206||_.status===200)return this.convertResponseToUint8Array(_.responseText);throw new Error(`Range request failed with status ${_.status}`)};return this.openDocumentFromLoader({id:r.id,fileLength:i,callback:u},n)}async retrieveFileLength(r){this.logger.debug(f,D,"retrieveFileLength",r);const n=await fetch(r,{method:"HEAD"});if(!n.ok)throw new Error(`Failed HEAD request for file length: ${n.statusText}`);const e=n.headers.get("Content-Length")||"0",i=parseInt(e,10)||0;if(!i)throw new Error("Content-Length not found or zero.");return{fileLength:i}}convertResponseToUint8Array(r){const n=new Uint8Array(r.length);for(let e=0;e<r.length;e++)n[e]=r.charCodeAt(e)&255;return n}openDocumentBuffer(r,n){this.logger.debug(f,D,"openDocumentBuffer",r,n),this.logger.perf(f,D,"OpenDocumentBuffer","Begin",r.id);const e=new Uint8Array(r.content),i=e.length,u=this.memoryManager.malloc(i);this.pdfiumModule.pdfium.HEAPU8.set(e,u);const m=this.pdfiumModule.FPDF_LoadMemDocument(u,i,n?.password??"");if(!m){const b=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(f,D,`FPDF_LoadMemDocument failed with ${b}`),this.memoryManager.free(u),this.logger.perf(f,D,"OpenDocumentBuffer","End",r.id),S.reject({code:b,message:"FPDF_LoadMemDocument failed"})}const d=this.pdfiumModule.FPDF_GetPageCount(m),_=[],g=this.memoryManager.malloc(8);for(let b=0;b<d;b++){if(!this.pdfiumModule.FPDF_GetPageSizeByIndexF(m,b,g)){const G=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(f,D,`FPDF_GetPageSizeByIndexF failed with ${G}`),this.memoryManager.free(g),this.pdfiumModule.FPDF_CloseDocument(m),this.memoryManager.free(u),this.logger.perf(f,D,"OpenDocumentBuffer","End",r.id),S.reject({code:G,message:"FPDF_GetPageSizeByIndexF failed"})}const M=this.pdfiumModule.EPDF_GetPageRotationByIndex(m,b),y={index:b,size:{width:this.pdfiumModule.pdfium.getValue(g,"float"),height:this.pdfiumModule.pdfium.getValue(g+4,"float")},rotation:M};_.push(y)}this.memoryManager.free(g);const h={id:r.id,name:r.name,pageCount:d,pages:_};return this.cache.setDocument(r.id,u,m),this.logger.perf(f,D,"OpenDocumentBuffer","End",r.id),S.resolve(h)}openDocumentFromLoader(r,n=""){const{fileLength:e,callback:i,...u}=r;this.logger.debug(f,D,"openDocumentFromLoader",u,n),this.logger.perf(f,D,"OpenDocumentFromLoader","Begin",u.id);const m=(G,O,v,I)=>{try{if(this.logger.debug(f,D,"readBlock",O,I,v),O<0||O>=e)return this.logger.error(f,D,"Offset out of bounds:",O),0;const j=i(O,I);return new Uint8Array(this.pdfiumModule.pdfium.HEAPU8.buffer,v,j.length).set(j),j.length}catch(j){return this.logger.error(f,D,"ReadBlock error:",j),0}},d=this.pdfiumModule.pdfium.addFunction(m,"iiiii"),g=this.memoryManager.malloc(12);this.pdfiumModule.pdfium.setValue(g,e,"i32"),this.pdfiumModule.pdfium.setValue(g+4,d,"i32"),this.pdfiumModule.pdfium.setValue(g+8,0,"i32");const h=this.pdfiumModule.FPDF_LoadCustomDocument(g,n);if(!h){const G=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(f,D,`FPDF_LoadCustomDocument failed with ${G}`),this.memoryManager.free(g),this.logger.perf(f,D,"OpenDocumentFromLoader","End",u.id),S.reject({code:G,message:"FPDF_LoadCustomDocument failed"})}const b=this.pdfiumModule.FPDF_GetPageCount(h),E=[],M=this.memoryManager.malloc(8);for(let G=0;G<b;G++){if(!this.pdfiumModule.FPDF_GetPageSizeByIndexF(h,G,M)){const j=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(f,D,`FPDF_GetPageSizeByIndexF failed with ${j}`),this.memoryManager.free(M),this.pdfiumModule.FPDF_CloseDocument(h),this.memoryManager.free(g),this.logger.perf(f,D,"OpenDocumentFromLoader","End",u.id),S.reject({code:j,message:"FPDF_GetPageSizeByIndexF failed"})}const v=this.pdfiumModule.EPDF_GetPageRotationByIndex(h,G),I={index:G,size:{width:this.pdfiumModule.pdfium.getValue(M,"float"),height:this.pdfiumModule.pdfium.getValue(M+4,"float")},rotation:v};E.push(I)}this.memoryManager.free(M);const y={id:u.id,name:u.name,pageCount:b,pages:E};return this.cache.setDocument(u.id,g,h),this.logger.perf(f,D,"OpenDocumentFromLoader","End",u.id),S.resolve(y)}getMetadata(r){this.logger.debug(f,D,"getMetadata",r),this.logger.perf(f,D,"GetMetadata","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(f,D,"GetMetadata","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});const e=this.readMetaText(n.docPtr,"CreationDate"),i=this.readMetaText(n.docPtr,"ModDate"),u={title:this.readMetaText(n.docPtr,"Title"),author:this.readMetaText(n.docPtr,"Author"),subject:this.readMetaText(n.docPtr,"Subject"),keywords:this.readMetaText(n.docPtr,"Keywords"),producer:this.readMetaText(n.docPtr,"Producer"),creator:this.readMetaText(n.docPtr,"Creator"),creationDate:e?tt(e)??null:null,modificationDate:i?tt(i)??null:null,trapped:this.getMetaTrapped(n.docPtr),custom:this.readAllMeta(n.docPtr,!0)};return this.logger.perf(f,D,"GetMetadata","End",r.id),S.resolve(u)}setMetadata(r,n){this.logger.debug(f,D,"setMetadata",r,n),this.logger.perf(f,D,"SetMetadata","Begin",r.id);const e=this.cache.getContext(r.id);if(!e)return this.logger.perf(f,D,"SetMetadata","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});const i=[["title","Title"],["author","Author"],["subject","Subject"],["keywords","Keywords"],["producer","Producer"],["creator","Creator"]];let u=!0;for(const[d,_]of i){const g=n[d];if(g===void 0)continue;const h=g===null?null:g;this.setMetaText(e.docPtr,_,h)||(u=!1)}const m=(d,_)=>{const g=n[d];if(g===void 0)return;if(g===null){this.setMetaText(e.docPtr,_,null)||(u=!1);return}const b=ct(g);this.setMetaText(e.docPtr,_,b)||(u=!1)};if(m("creationDate","CreationDate"),m("modificationDate","ModDate"),n.trapped!==void 0&&(this.setMetaTrapped(e.docPtr,n.trapped??null)||(u=!1)),n.custom!==void 0)for(const[d,_]of Object.entries(n.custom)){if(!oo(d)){this.logger.warn(f,D,"Invalid custom metadata key skipped",d);continue}this.setMetaText(e.docPtr,d,_??null)||(u=!1)}return this.logger.perf(f,D,"SetMetadata","End",r.id),u?S.resolve(!0):S.reject({code:x.Unknown,message:"one or more metadata fields could not be written"})}getDocPermissions(r){this.logger.debug(f,D,"getDocPermissions",r),this.logger.perf(f,D,"getDocPermissions","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(f,D,"getDocPermissions","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});const e=this.pdfiumModule.FPDF_GetDocPermissions(n.docPtr);return S.resolve(e)}getDocUserPermissions(r){this.logger.debug(f,D,"getDocUserPermissions",r),this.logger.perf(f,D,"getDocUserPermissions","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(f,D,"getDocUserPermissions","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});const e=this.pdfiumModule.FPDF_GetDocUserPermissions(n.docPtr);return S.resolve(e)}getSignatures(r){this.logger.debug(f,D,"getSignatures",r),this.logger.perf(f,D,"GetSignatures","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(f,D,"GetSignatures","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});const e=[],i=this.pdfiumModule.FPDF_GetSignatureCount(n.docPtr);for(let u=0;u<i;u++){const m=this.pdfiumModule.FPDF_GetSignatureObject(n.docPtr,u),d=_t(this.pdfiumModule.pdfium,(M,y)=>this.pdfiumModule.FPDFSignatureObj_GetContents(m,M,y)),_=_t(this.pdfiumModule.pdfium,(M,y)=>this.pdfiumModule.FPDFSignatureObj_GetByteRange(m,M,y)*4),g=_t(this.pdfiumModule.pdfium,(M,y)=>this.pdfiumModule.FPDFSignatureObj_GetSubFilter(m,M,y)),h=ae(this.pdfiumModule.pdfium,(M,y)=>this.pdfiumModule.FPDFSignatureObj_GetReason(m,M,y),this.pdfiumModule.pdfium.UTF16ToString),b=ae(this.pdfiumModule.pdfium,(M,y)=>this.pdfiumModule.FPDFSignatureObj_GetTime(m,M,y),this.pdfiumModule.pdfium.UTF8ToString),E=this.pdfiumModule.FPDFSignatureObj_GetDocMDPPermission(m);e.push({contents:d,byteRange:_,subFilter:g,reason:h,time:b,docMDP:E})}return this.logger.perf(f,D,"GetSignatures","End",r.id),S.resolve(e)}getBookmarks(r){this.logger.debug(f,D,"getBookmarks",r),this.logger.perf(f,D,"GetBookmarks","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(f,D,"getBookmarks","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});const e=this.readPdfBookmarks(n.docPtr,0);return this.logger.perf(f,D,"GetBookmarks","End",r.id),S.resolve({bookmarks:e})}setBookmarks(r,n){this.logger.debug(f,D,"setBookmarks",r,n),this.logger.perf(f,D,"SetBookmarks","Begin",r.id);const e=this.cache.getContext(r.id);if(!e)return this.logger.perf(f,D,"SetBookmarks","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});if(!this.pdfiumModule.EPDFBookmark_Clear(e.docPtr))return this.logger.perf(f,D,"SetBookmarks","End",r.id),S.reject({code:x.Unknown,message:"failed to clear existing bookmarks"});const i=(m,d)=>{for(const _ of d){const g=this.withWString(_.title??"",h=>this.pdfiumModule.EPDFBookmark_AppendChild(e.docPtr,m,h));if(!g||_.target&&!this.applyBookmarkTarget(e.docPtr,g,_.target)||_.children?.length&&!i(g,_.children))return!1}return!0},u=i(0,n);return this.logger.perf(f,D,"SetBookmarks","End",r.id),u?S.resolve(!0):S.reject({code:x.Unknown,message:"failed to build bookmark tree"})}deleteBookmarks(r){this.logger.debug(f,D,"deleteBookmarks",r),this.logger.perf(f,D,"DeleteBookmarks","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(f,D,"DeleteBookmarks","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});const e=this.pdfiumModule.EPDFBookmark_Clear(n.docPtr);return this.logger.perf(f,D,"DeleteBookmarks","End",r.id),e?S.resolve(!0):S.reject({code:x.Unknown,message:"failed to clear bookmarks"})}renderPage(r,n,e){this.logger.debug(f,D,"renderPage",r,n,e),this.logger.perf(f,D,"RenderPage","Begin",`${r.id}-${n.index}`);const i={origin:{x:0,y:0},size:n.size},u=this.renderRectEncoded(r,n,i,e);return this.logger.perf(f,D,"RenderPage","End",`${r.id}-${n.index}`),u}renderPageRect(r,n,e,i){this.logger.debug(f,D,"renderPageRect",r,n,e,i),this.logger.perf(f,D,"RenderPageRect","Begin",`${r.id}-${n.index}`);const u=this.renderRectEncoded(r,n,e,i);return this.logger.perf(f,D,"RenderPageRect","End",`${r.id}-${n.index}`),u}getAllAnnotations(r){this.logger.debug(f,D,"getAllAnnotations-with-progress",r),this.logger.perf(f,D,"GetAllAnnotations","Begin",r.id);const n=S.create();let e=!1;n.wait(Hr,_=>{_.type==="abort"&&(e=!0)});const i=this.cache.getContext(r.id);if(!i)return this.logger.perf(f,D,"GetAllAnnotations","End",r.id),n.reject({code:x.DocNotOpen,message:"document does not open"}),n;const u=100,m={},d=_=>{if(e)return;const g=Math.min(_+u,r.pageCount);for(let h=_;h<g&&!e;++h){this.logger.debug(f,D,"GetAllAnnotations","Begin",r.id,h);const b=this.readPageAnnotationsRaw(i,r.pages[h]);m[h]=b,this.logger.debug(f,D,"GetAllAnnotations","End",r.id,h),n.progress({page:h,annotations:b})}if(!e){if(g>=r.pageCount){this.logger.perf(f,D,"GetAllAnnotations","End",r.id),n.resolve(m);return}setTimeout(()=>d(g),0)}};return d(0),n}readAllAnnotations(r,n){const e={};for(let i=0;i<r.pageCount;i++){const u=this.readPageAnnotations(n,r.pages[i]);e[i]=u}return e}getPageAnnotations(r,n){this.logger.debug(f,D,"getPageAnnotations",r,n),this.logger.perf(f,D,"GetPageAnnotations","Begin",`${r.id}-${n.index}`);const e=this.cache.getContext(r.id);if(!e)return this.logger.perf(f,D,"GetPageAnnotations","End",`${r.id}-${n.index}`),S.reject({code:x.DocNotOpen,message:"document does not open"});const i=this.readPageAnnotations(e,n);return this.logger.perf(f,D,"GetPageAnnotations","End",`${r.id}-${n.index}`),this.logger.debug(f,D,"GetPageAnnotations",`${r.id}-${n.index}`,i),S.resolve(i)}createPageAnnotation(r,n,e,i){this.logger.debug(f,D,"createPageAnnotation",r,n,e),this.logger.perf(f,D,"CreatePageAnnotation","Begin",`${r.id}-${n.index}`);const u=this.cache.getContext(r.id);if(!u)return this.logger.perf(f,D,"CreatePageAnnotation","End",`${r.id}-${n.index}`),S.reject({code:x.DocNotOpen,message:"document does not open"});const m=u.acquirePage(n.index),d=this.pdfiumModule.EPDFPage_CreateAnnot(m.pagePtr,e.type);if(!d)return this.logger.perf(f,D,"CreatePageAnnotation","End",`${r.id}-${n.index}`),m.release(),S.reject({code:x.CantCreateAnnot,message:"can not create annotation with specified type"});if(Yt(e.id)||(e.id=Kt()),!this.setAnnotString(d,"NM",e.id))return this.pdfiumModule.FPDFPage_CloseAnnot(d),m.release(),S.reject({code:x.CantSetAnnotString,message:"can not set the name of the annotation"});if(!this.setPageAnnoRect(n,d,e.rect))return this.pdfiumModule.FPDFPage_CloseAnnot(d),m.release(),this.logger.perf(f,D,"CreatePageAnnotation","End",`${r.id}-${n.index}`),S.reject({code:x.CantSetAnnotRect,message:"can not set the rect of the annotation"});let _=!1;switch(e.type){case w.INK:_=this.addInkStroke(n,m.pagePtr,d,e);break;case w.STAMP:_=this.addStampContent(u.docPtr,n,m.pagePtr,d,e,i?.imageData);break;case w.TEXT:_=this.addTextContent(n,m.pagePtr,d,e);break;case w.FREETEXT:_=this.addFreeTextContent(n,m.pagePtr,d,e);break;case w.LINE:_=this.addLineContent(n,m.pagePtr,d,e);break;case w.POLYLINE:case w.POLYGON:_=this.addPolyContent(n,m.pagePtr,d,e);break;case w.CIRCLE:case w.SQUARE:_=this.addShapeContent(n,m.pagePtr,d,e);break;case w.UNDERLINE:case w.STRIKEOUT:case w.SQUIGGLY:case w.HIGHLIGHT:_=this.addTextMarkupContent(n,m.pagePtr,d,e);break}return _?(e.blendMode!==void 0?this.pdfiumModule.EPDFAnnot_GenerateAppearanceWithBlend(d,e.blendMode):this.pdfiumModule.EPDFAnnot_GenerateAppearance(d),this.pdfiumModule.FPDFPage_GenerateContent(m.pagePtr),this.pdfiumModule.FPDFPage_CloseAnnot(d),m.release(),this.logger.perf(f,D,"CreatePageAnnotation","End",`${r.id}-${n.index}`),S.resolve(e.id)):(this.pdfiumModule.FPDFPage_RemoveAnnot(m.pagePtr,d),m.release(),this.logger.perf(f,D,"CreatePageAnnotation","End",`${r.id}-${n.index}`),S.reject({code:x.CantSetAnnotContent,message:"can not add content of the annotation"}))}updatePageAnnotation(r,n,e){this.logger.debug(f,D,"updatePageAnnotation",r,n,e),this.logger.perf(f,D,"UpdatePageAnnotation","Begin",`${r.id}-${n.index}`);const i=this.cache.getContext(r.id);if(!i)return this.logger.perf(f,D,"UpdatePageAnnotation","End",`${r.id}-${n.index}`),S.reject({code:x.DocNotOpen,message:"document does not open"});const u=i.acquirePage(n.index),m=this.getAnnotationByName(u.pagePtr,e.id);if(!m)return u.release(),this.logger.perf(f,D,"UpdatePageAnnotation","End",`${r.id}-${n.index}`),S.reject({code:x.NotFound,message:"annotation not found"});if(!this.setPageAnnoRect(n,m,e.rect))return this.pdfiumModule.FPDFPage_CloseAnnot(m),u.release(),this.logger.perf(f,D,"UpdatePageAnnotation","End",`${r.id}-${n.index}`),S.reject({code:x.CantSetAnnotRect,message:"failed to move annotation"});let d=!1;switch(e.type){case w.INK:{if(!this.pdfiumModule.FPDFAnnot_RemoveInkList(m))break;d=this.addInkStroke(n,u.pagePtr,m,e);break}case w.STAMP:{d=this.addStampContent(i.docPtr,n,u.pagePtr,m,e);break}case w.TEXT:{d=this.addTextContent(n,u.pagePtr,m,e);break}case w.FREETEXT:{d=this.addFreeTextContent(n,u.pagePtr,m,e);break}case w.CIRCLE:case w.SQUARE:{d=this.addShapeContent(n,u.pagePtr,m,e);break}case w.LINE:{d=this.addLineContent(n,u.pagePtr,m,e);break}case w.POLYGON:case w.POLYLINE:{d=this.addPolyContent(n,u.pagePtr,m,e);break}case w.HIGHLIGHT:case w.UNDERLINE:case w.STRIKEOUT:case w.SQUIGGLY:{d=this.addTextMarkupContent(n,u.pagePtr,m,e);break}default:d=!1}return d&&(e.blendMode!==void 0?this.pdfiumModule.EPDFAnnot_GenerateAppearanceWithBlend(m,e.blendMode):this.pdfiumModule.EPDFAnnot_GenerateAppearance(m),this.pdfiumModule.FPDFPage_GenerateContent(u.pagePtr)),this.pdfiumModule.FPDFPage_CloseAnnot(m),u.release(),this.logger.perf(f,D,"UpdatePageAnnotation","End",`${r.id}-${n.index}`),d?S.resolve(!0):S.reject({code:x.CantSetAnnotContent,message:"failed to update annotation"})}removePageAnnotation(r,n,e){this.logger.debug(f,D,"removePageAnnotation",r,n,e),this.logger.perf(f,D,"RemovePageAnnotation","Begin",`${r.id}-${n.index}`);const i=this.cache.getContext(r.id);if(!i)return this.logger.perf(f,D,"RemovePageAnnotation","End",`${r.id}-${n.index}`),S.reject({code:x.DocNotOpen,message:"document does not open"});const u=i.acquirePage(n.index);let m=!1;return m=this.removeAnnotationByName(u.pagePtr,e.id),m?(m=this.pdfiumModule.FPDFPage_GenerateContent(u.pagePtr),m||this.logger.error(f,D,"FPDFPage_GenerateContent Failed",`${r.id}-${n.index}`)):this.logger.error(f,D,"FPDFPage_RemoveAnnot Failed",`${r.id}-${n.index}`),u.release(),this.logger.perf(f,D,"RemovePageAnnotation","End",`${r.id}-${n.index}`),S.resolve(m)}getPageTextRects(r,n){this.logger.debug(f,D,"getPageTextRects",r,n),this.logger.perf(f,D,"GetPageTextRects","Begin",`${r.id}-${n.index}`);const e=this.cache.getContext(r.id);if(!e)return this.logger.perf(f,D,"GetPageTextRects","End",`${r.id}-${n.index}`),S.reject({code:x.DocNotOpen,message:"document does not open"});const i=e.acquirePage(n.index),u=this.pdfiumModule.FPDFText_LoadPage(i.pagePtr),m=this.readPageTextRects(n,i.docPtr,i.pagePtr,u);return this.pdfiumModule.FPDFText_ClosePage(u),i.release(),this.logger.perf(f,D,"GetPageTextRects","End",`${r.id}-${n.index}`),S.resolve(m)}renderThumbnail(r,n,e){const{scaleFactor:i=1,...u}=e??{};if(this.logger.debug(f,D,"renderThumbnail",r,n,e),this.logger.perf(f,D,"RenderThumbnail","Begin",`${r.id}-${n.index}`),!this.cache.getContext(r.id))return this.logger.perf(f,D,"RenderThumbnail","End",`${r.id}-${n.index}`),S.reject({code:x.DocNotOpen,message:"document does not open"});const d=this.renderPage(r,n,{scaleFactor:Math.max(i,.5),...u});return this.logger.perf(f,D,"RenderThumbnail","End",`${r.id}-${n.index}`),d}getAttachments(r){this.logger.debug(f,D,"getAttachments",r),this.logger.perf(f,D,"GetAttachments","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(f,D,"GetAttachments","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});const e=[],i=this.pdfiumModule.FPDFDoc_GetAttachmentCount(n.docPtr);for(let u=0;u<i;u++){const m=this.readPdfAttachment(n.docPtr,u);e.push(m)}return this.logger.perf(f,D,"GetAttachments","End",r.id),S.resolve(e)}addAttachment(r,n){this.logger.debug(f,D,"addAttachment",r,n?.name),this.logger.perf(f,D,"AddAttachment","Begin",r.id);const e=this.cache.getContext(r.id);if(!e)return this.logger.perf(f,D,"AddAttachment","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});const{name:i,description:u,mimeType:m,data:d}=n??{};if(!i)return this.logger.perf(f,D,"AddAttachment","End",r.id),S.reject({code:x.NotFound,message:"attachment name is required"});if(!d||(d instanceof Uint8Array,d.byteLength===0))return this.logger.perf(f,D,"AddAttachment","End",r.id),S.reject({code:x.NotFound,message:"attachment data is empty"});const _=this.withWString(i,E=>this.pdfiumModule.FPDFDoc_AddAttachment(e.docPtr,E));if(!_)return this.logger.perf(f,D,"AddAttachment","End",r.id),S.reject({code:x.Unknown,message:`An attachment named "${i}" already exists`});this.withWString(u,E=>this.pdfiumModule.EPDFAttachment_SetDescription(_,E)),this.pdfiumModule.EPDFAttachment_SetSubtype(_,m);const g=d instanceof Uint8Array?d:new Uint8Array(d),h=g.byteLength,b=this.memoryManager.malloc(h);try{if(this.pdfiumModule.pdfium.HEAPU8.set(g,b),!this.pdfiumModule.FPDFAttachment_SetFile(_,e.docPtr,b,h))return this.logger.perf(f,D,"AddAttachment","End",r.id),S.reject({code:x.Unknown,message:"failed to write attachment bytes"})}finally{this.memoryManager.free(b)}return this.logger.perf(f,D,"AddAttachment","End",r.id),S.resolve(!0)}removeAttachment(r,n){this.logger.debug(f,D,"deleteAttachment",r,n),this.logger.perf(f,D,"DeleteAttachment","Begin",r.id);const e=this.cache.getContext(r.id);if(!e)return this.logger.perf(f,D,"DeleteAttachment","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});const i=this.pdfiumModule.FPDFDoc_GetAttachmentCount(e.docPtr);if(n.index<0||n.index>=i)return this.logger.perf(f,D,"DeleteAttachment","End",r.id),S.reject({code:x.Unknown,message:`attachment index ${n.index} out of range`});const u=this.pdfiumModule.FPDFDoc_DeleteAttachment(e.docPtr,n.index);return this.logger.perf(f,D,"DeleteAttachment","End",r.id),u?S.resolve(!0):S.reject({code:x.Unknown,message:"failed to delete attachment"})}readAttachmentContent(r,n){this.logger.debug(f,D,"readAttachmentContent",r,n),this.logger.perf(f,D,"ReadAttachmentContent","Begin",r.id);const e=this.cache.getContext(r.id);if(!e)return this.logger.perf(f,D,"ReadAttachmentContent","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});const i=this.pdfiumModule.FPDFDoc_GetAttachment(e.docPtr,n.index),u=this.memoryManager.malloc(4);if(!this.pdfiumModule.FPDFAttachment_GetFile(i,0,0,u))return this.memoryManager.free(u),this.logger.perf(f,D,"ReadAttachmentContent","End",r.id),S.reject({code:x.CantReadAttachmentSize,message:"can not read attachment size"});const m=this.pdfiumModule.pdfium.getValue(u,"i32")>>>0,d=this.memoryManager.malloc(m);if(!this.pdfiumModule.FPDFAttachment_GetFile(i,d,m,u))return this.memoryManager.free(u),this.memoryManager.free(d),this.logger.perf(f,D,"ReadAttachmentContent","End",r.id),S.reject({code:x.CantReadAttachmentContent,message:"can not read attachment content"});const _=new ArrayBuffer(m),g=new DataView(_);for(let h=0;h<m;h++)g.setInt8(h,this.pdfiumModule.pdfium.getValue(d+h,"i8"));return this.memoryManager.free(u),this.memoryManager.free(d),this.logger.perf(f,D,"ReadAttachmentContent","End",r.id),S.resolve(_)}setFormFieldValue(r,n,e,i){this.logger.debug(f,D,"SetFormFieldValue",r,e,i),this.logger.perf(f,D,"SetFormFieldValue","Begin",`${r.id}-${e.id}`);const u=this.cache.getContext(r.id);if(!u)return this.logger.debug(f,D,"SetFormFieldValue","document is not opened"),this.logger.perf(f,D,"SetFormFieldValue","End",`${r.id}-${e.id}`),S.reject({code:x.DocNotOpen,message:"document does not open"});const m=this.pdfiumModule.PDFiumExt_OpenFormFillInfo(),d=this.pdfiumModule.PDFiumExt_InitFormFillEnvironment(u.docPtr,m),_=u.acquirePage(n.index);this.pdfiumModule.FORM_OnAfterLoadPage(_.pagePtr,d);const g=this.getAnnotationByName(_.pagePtr,e.id);if(!g)return _.release(),this.logger.perf(f,D,"SetFormFieldValue","End",`${r.id}-${n.index}`),S.reject({code:x.NotFound,message:"annotation not found"});if(!this.pdfiumModule.FORM_SetFocusedAnnot(d,g))return this.logger.debug(f,D,"SetFormFieldValue","failed to set focused annotation"),this.logger.perf(f,D,"SetFormFieldValue","End",`${r.id}-${e.id}`),this.pdfiumModule.FPDFPage_CloseAnnot(g),this.pdfiumModule.FORM_OnBeforeClosePage(_.pagePtr,d),_.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(d),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(m),S.reject({code:x.CantFocusAnnot,message:"failed to set focused annotation"});switch(i.kind){case"text":{if(!this.pdfiumModule.FORM_SelectAllText(d,_.pagePtr))return this.logger.debug(f,D,"SetFormFieldValue","failed to select all text"),this.logger.perf(f,D,"SetFormFieldValue","End",`${r.id}-${e.id}`),this.pdfiumModule.FORM_ForceToKillFocus(d),this.pdfiumModule.FPDFPage_CloseAnnot(g),this.pdfiumModule.FORM_OnBeforeClosePage(_.pagePtr,d),_.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(d),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(m),S.reject({code:x.CantSelectText,message:"failed to select all text"});const h=2*(i.text.length+1),b=this.memoryManager.malloc(h);this.pdfiumModule.pdfium.stringToUTF16(i.text,b,h),this.pdfiumModule.FORM_ReplaceSelection(d,_.pagePtr,b),this.memoryManager.free(b)}break;case"selection":if(!this.pdfiumModule.FORM_SetIndexSelected(d,_.pagePtr,i.index,i.isSelected))return this.logger.debug(f,D,"SetFormFieldValue","failed to set index selected"),this.logger.perf(f,D,"SetFormFieldValue","End",`${r.id}-${e.id}`),this.pdfiumModule.FORM_ForceToKillFocus(d),this.pdfiumModule.FPDFPage_CloseAnnot(g),this.pdfiumModule.FORM_OnBeforeClosePage(_.pagePtr,d),_.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(d),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(m),S.reject({code:x.CantSelectOption,message:"failed to set index selected"});break;case"checked":if(!this.pdfiumModule.FORM_OnChar(d,_.pagePtr,13,0))return this.logger.debug(f,D,"SetFormFieldValue","failed to set field checked"),this.logger.perf(f,D,"SetFormFieldValue","End",`${r.id}-${e.id}`),this.pdfiumModule.FORM_ForceToKillFocus(d),this.pdfiumModule.FPDFPage_CloseAnnot(g),this.pdfiumModule.FORM_OnBeforeClosePage(_.pagePtr,d),_.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(d),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(m),S.reject({code:x.CantCheckField,message:"failed to set field checked"});break}return this.pdfiumModule.FORM_ForceToKillFocus(d),this.pdfiumModule.FPDFPage_CloseAnnot(g),this.pdfiumModule.FORM_OnBeforeClosePage(_.pagePtr,d),_.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(d),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(m),S.resolve(!0)}flattenPage(r,n,e){const{flag:i=$r.Display}=e??{};this.logger.debug(f,D,"flattenPage",r,n,i),this.logger.perf(f,D,"flattenPage","Begin",r.id);const u=this.cache.getContext(r.id);if(!u)return this.logger.perf(f,D,"flattenPage","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});const m=u.acquirePage(n.index),d=this.pdfiumModule.FPDFPage_Flatten(m.pagePtr,i);return m.release(),this.logger.perf(f,D,"flattenPage","End",r.id),S.resolve(d)}extractPages(r,n){this.logger.debug(f,D,"extractPages",r,n),this.logger.perf(f,D,"ExtractPages","Begin",r.id);const e=this.cache.getContext(r.id);if(!e)return this.logger.perf(f,D,"ExtractPages","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});const i=this.pdfiumModule.FPDF_CreateNewDocument();if(!i)return this.logger.perf(f,D,"ExtractPages","End",r.id),S.reject({code:x.CantCreateNewDoc,message:"can not create new document"});const u=this.memoryManager.malloc(n.length*4);for(let d=0;d<n.length;d++)this.pdfiumModule.pdfium.setValue(u+d*4,n[d],"i32");if(!this.pdfiumModule.FPDF_ImportPagesByIndex(i,e.docPtr,u,n.length,0))return this.pdfiumModule.FPDF_CloseDocument(i),this.logger.perf(f,D,"ExtractPages","End",r.id),S.reject({code:x.CantImportPages,message:"can not import pages to new document"});const m=this.saveDocument(i);return this.pdfiumModule.FPDF_CloseDocument(i),this.logger.perf(f,D,"ExtractPages","End",r.id),S.resolve(m)}extractText(r,n){this.logger.debug(f,D,"extractText",r,n),this.logger.perf(f,D,"ExtractText","Begin",r.id);const e=this.cache.getContext(r.id);if(!e)return this.logger.perf(f,D,"ExtractText","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});const i=[];for(let m=0;m<n.length;m++){const d=e.acquirePage(n[m]),_=this.pdfiumModule.FPDFText_LoadPage(d.pagePtr),g=this.pdfiumModule.FPDFText_CountChars(_),h=this.memoryManager.malloc((g+1)*2);this.pdfiumModule.FPDFText_GetText(_,0,g,h);const b=this.pdfiumModule.pdfium.UTF16ToString(h);this.memoryManager.free(h),i.push(b),this.pdfiumModule.FPDFText_ClosePage(_),d.release()}const u=i.join(`

`);return this.logger.perf(f,D,"ExtractText","End",r.id),S.resolve(u)}getTextSlices(r,n){if(this.logger.debug(f,D,"getTextSlices",r,n),this.logger.perf(f,D,"GetTextSlices","Begin",r.id),n.length===0)return this.logger.perf(f,D,"GetTextSlices","End",r.id),S.resolve([]);const e=this.cache.getContext(r.id);if(!e)return this.logger.perf(f,D,"GetTextSlices","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});try{const i=new Array(n.length),u=new Map;n.forEach((m,d)=>{(u.get(m.pageIndex)??u.set(m.pageIndex,[]).get(m.pageIndex)).push({slice:m,pos:d})});for(const[m,d]of u){const _=e.acquirePage(m),g=_.getTextPage();for(const{slice:h,pos:b}of d){const E=this.memoryManager.malloc(2*(h.charCount+1));this.pdfiumModule.FPDFText_GetText(g,h.charIndex,h.charCount,E),i[b]=Yr(this.pdfiumModule.pdfium.UTF16ToString(E)),this.memoryManager.free(E)}_.release()}return this.logger.perf(f,D,"GetTextSlices","End",r.id),S.resolve(i)}catch(i){return this.logger.error(f,D,"getTextSlices error",i),this.logger.perf(f,D,"GetTextSlices","End",r.id),S.reject({code:x.Unknown,message:String(i)})}}merge(r){this.logger.debug(f,D,"merge",r);const n=r.map(d=>d.id).join(".");this.logger.perf(f,D,"Merge","Begin",n);const e=this.pdfiumModule.FPDF_CreateNewDocument();if(!e)return this.logger.perf(f,D,"Merge","End",n),S.reject({code:x.CantCreateNewDoc,message:"can not create new document"});const i=[];for(const d of r.reverse()){const _=new Uint8Array(d.content),g=_.length,h=this.memoryManager.malloc(g);this.pdfiumModule.pdfium.HEAPU8.set(_,h);const b=this.pdfiumModule.FPDF_LoadMemDocument(h,g,"");if(!b){const E=this.pdfiumModule.FPDF_GetLastError();this.logger.error(f,D,`FPDF_LoadMemDocument failed with ${E}`),this.memoryManager.free(h);for(const M of i)this.pdfiumModule.FPDF_CloseDocument(M.docPtr),this.memoryManager.free(M.filePtr);return this.logger.perf(f,D,"Merge","End",n),S.reject({code:E,message:"FPDF_LoadMemDocument failed"})}if(i.push({filePtr:h,docPtr:b}),!this.pdfiumModule.FPDF_ImportPages(e,b,"",0)){this.pdfiumModule.FPDF_CloseDocument(e);for(const E of i)this.pdfiumModule.FPDF_CloseDocument(E.docPtr),this.memoryManager.free(E.filePtr);return this.logger.perf(f,D,"Merge","End",n),S.reject({code:x.CantImportPages,message:"can not import pages to new document"})}}const u=this.saveDocument(e);this.pdfiumModule.FPDF_CloseDocument(e);for(const d of i)this.pdfiumModule.FPDF_CloseDocument(d.docPtr),this.memoryManager.free(d.filePtr);const m={id:`${Math.random()}`,content:u};return this.logger.perf(f,D,"Merge","End",n),S.resolve(m)}mergePages(r){const n=r.map(i=>`${i.docId}:${i.pageIndices.join(",")}`).join("|");this.logger.debug(f,D,"mergePages",r),this.logger.perf(f,D,"MergePages","Begin",n);const e=this.pdfiumModule.FPDF_CreateNewDocument();if(!e)return this.logger.perf(f,D,"MergePages","End",n),S.reject({code:x.CantCreateNewDoc,message:"Cannot create new document"});try{for(const m of[...r].reverse()){const d=this.cache.getContext(m.docId);if(!d){this.logger.warn(f,D,`Document ${m.docId} is not open, skipping`);continue}const _=this.pdfiumModule.FPDF_GetPageCount(d.docPtr),g=m.pageIndices.filter(b=>b>=0&&b<_);if(g.length===0)continue;const h=g.map(b=>b+1).join(",");try{if(!this.pdfiumModule.FPDF_ImportPages(e,d.docPtr,h,0))throw new Error(`Failed to import pages ${h} from document ${m.docId}`)}finally{}}const i=this.saveDocument(e),u={id:`${Math.random()}`,content:i};return this.logger.perf(f,D,"MergePages","End",n),S.resolve(u)}catch(i){return this.logger.error(f,D,"mergePages failed",i),this.logger.perf(f,D,"MergePages","End",n),S.reject({code:x.CantImportPages,message:i instanceof Error?i.message:"Failed to merge pages"})}finally{e&&this.pdfiumModule.FPDF_CloseDocument(e)}}saveAsCopy(r){this.logger.debug(f,D,"saveAsCopy",r),this.logger.perf(f,D,"SaveAsCopy","Begin",r.id);const n=this.cache.getContext(r.id);if(!n)return this.logger.perf(f,D,"SaveAsCopy","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});const e=this.saveDocument(n.docPtr);return this.logger.perf(f,D,"SaveAsCopy","End",r.id),S.resolve(e)}closeDocument(r){this.logger.debug(f,D,"closeDocument",r),this.logger.perf(f,D,"CloseDocument","Begin",r.id);const n=this.cache.getContext(r.id);return n?(n.dispose(),this.logger.perf(f,D,"CloseDocument","End",r.id),S.resolve(!0)):(this.logger.perf(f,D,"CloseDocument","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"}))}closeAllDocuments(){return this.logger.debug(f,D,"closeAllDocuments"),this.logger.perf(f,D,"CloseAllDocuments","Begin"),this.cache.closeAllDocuments(),this.logger.perf(f,D,"CloseAllDocuments","End"),S.resolve(!0)}addTextContent(r,n,e,i){return!(!this.setAnnotString(e,"Contents",i.contents??"")||!this.setAnnotString(e,"T",i.author||"")||i.modified&&!this.setAnnotationDate(e,"M",i.modified)||i.created&&!this.setAnnotationDate(e,"CreationDate",i.created)||i.inReplyToId&&!this.setInReplyToId(n,e,i.inReplyToId)||!this.setAnnotationIcon(e,i.icon||Kr.Comment)||!this.setAnnotationFlags(e,i.flags||["print","noZoom","noRotate"])||i.state&&!this.setAnnotString(e,"State",i.state)||i.stateModel&&!this.setAnnotString(e,"StateModel",i.stateModel))}addFreeTextContent(r,n,e,i){if(i.created&&!this.setAnnotationDate(e,"CreationDate",i.created)||i.flags&&!this.setAnnotationFlags(e,i.flags)||i.modified&&!this.setAnnotationDate(e,"M",i.modified)||!this.setBorderStyle(e,Me.SOLID,0)||!this.setAnnotString(e,"Contents",i.contents??"")||!this.setAnnotString(e,"T",i.author||"")||!this.setAnnotationOpacity(e,i.opacity??1)||!this.setAnnotationTextAlignment(e,i.textAlign)||!this.setAnnotationVerticalAlignment(e,i.verticalAlign)||!this.setAnnotationDefaultAppearance(e,i.fontFamily,i.fontSize,i.fontColor)||i.intent&&!this.setAnnotIntent(e,i.intent))return!1;if(!i.backgroundColor||i.backgroundColor==="transparent"){if(!this.pdfiumModule.EPDFAnnot_ClearColor(e,ne.Color))return!1}else if(!this.setAnnotationColor(e,i.backgroundColor??"#FFFFFF",ne.Color))return!1;return!0}addInkStroke(r,n,e,i){return!(i.created&&!this.setAnnotationDate(e,"CreationDate",i.created)||i.flags&&!this.setAnnotationFlags(e,i.flags)||i.modified&&!this.setAnnotationDate(e,"M",i.modified)||!this.setAnnotString(e,"Contents",i.contents??"")||!this.setBorderStyle(e,Me.SOLID,i.strokeWidth)||!this.setInkList(r,e,i.inkList)||!this.setAnnotString(e,"T",i.author||"")||!this.setAnnotationOpacity(e,i.opacity??1)||!this.setAnnotationColor(e,i.color??"#FFFF00",ne.Color))}addLineContent(r,n,e,i){if(i.created&&!this.setAnnotationDate(e,"CreationDate",i.created)||i.flags&&!this.setAnnotationFlags(e,i.flags)||i.modified&&!this.setAnnotationDate(e,"M",i.modified)||!this.setLinePoints(r,e,i.linePoints.start,i.linePoints.end)||!this.setLineEndings(e,i.lineEndings?.start??Le.None,i.lineEndings?.end??Le.None)||!this.setAnnotString(e,"Contents",i.contents??"")||!this.setAnnotString(e,"T",i.author||"")||!this.setBorderStyle(e,i.strokeStyle,i.strokeWidth)||!this.setBorderDashPattern(e,i.strokeDashArray??[])||i.intent&&!this.setAnnotIntent(e,i.intent))return!1;if(!i.color||i.color==="transparent"){if(!this.pdfiumModule.EPDFAnnot_ClearColor(e,ne.InteriorColor))return!1}else if(!this.setAnnotationColor(e,i.color??"#FFFF00",ne.InteriorColor))return!1;return!(!this.setAnnotationOpacity(e,i.opacity??1)||!this.setAnnotationColor(e,i.strokeColor??"#FFFF00",ne.Color))}addPolyContent(r,n,e,i){if(i.created&&!this.setAnnotationDate(e,"CreationDate",i.created)||i.modified&&!this.setAnnotationDate(e,"M",i.modified)||i.flags&&!this.setAnnotationFlags(e,i.flags)||i.type===w.POLYLINE&&!this.setLineEndings(e,i.lineEndings?.start??Le.None,i.lineEndings?.end??Le.None)||!this.setPdfAnnoVertices(r,e,i.vertices)||!this.setAnnotString(e,"Contents",i.contents??"")||!this.setAnnotString(e,"T",i.author||"")||!this.setBorderStyle(e,i.strokeStyle,i.strokeWidth)||!this.setBorderDashPattern(e,i.strokeDashArray??[])||i.intent&&!this.setAnnotIntent(e,i.intent))return!1;if(!i.color||i.color==="transparent"){if(!this.pdfiumModule.EPDFAnnot_ClearColor(e,ne.InteriorColor))return!1}else if(!this.setAnnotationColor(e,i.color??"#FFFF00",ne.InteriorColor))return!1;return!(!this.setAnnotationOpacity(e,i.opacity??1)||!this.setAnnotationColor(e,i.strokeColor??"#FFFF00",ne.Color))}addShapeContent(r,n,e,i){if(i.created&&!this.setAnnotationDate(e,"CreationDate",i.created)||i.modified&&!this.setAnnotationDate(e,"M",i.modified)||!this.setAnnotString(e,"Contents",i.contents??"")||!this.setAnnotString(e,"T",i.author||"")||!this.setBorderStyle(e,i.strokeStyle,i.strokeWidth)||!this.setBorderDashPattern(e,i.strokeDashArray??[])||!this.setAnnotationFlags(e,i.flags))return!1;if(!i.color||i.color==="transparent"){if(!this.pdfiumModule.EPDFAnnot_ClearColor(e,ne.InteriorColor))return!1}else if(!this.setAnnotationColor(e,i.color??"#FFFF00",ne.InteriorColor))return!1;return!(!this.setAnnotationOpacity(e,i.opacity??1)||!this.setAnnotationColor(e,i.strokeColor??"#FFFF00",ne.Color))}addTextMarkupContent(r,n,e,i){return!(i.created&&!this.setAnnotationDate(e,"CreationDate",i.created)||i.custom&&!this.setAnnotCustom(e,i.custom)||i.flags&&!this.setAnnotationFlags(e,i.flags)||i.modified&&!this.setAnnotationDate(e,"M",i.modified)||!this.syncQuadPointsAnno(r,e,i.segmentRects)||!this.setAnnotString(e,"Contents",i.contents??"")||!this.setAnnotString(e,"T",i.author||"")||!this.setAnnotationOpacity(e,i.opacity??1)||!this.setAnnotationColor(e,i.color??"#FFFF00",ne.Color))}addStampContent(r,n,e,i,u,m){if(u.created&&!this.setAnnotationDate(i,"CreationDate",u.created)||u.flags&&!this.setAnnotationFlags(i,u.flags)||u.modified&&!this.setAnnotationDate(i,"M",u.modified)||u.icon&&!this.setAnnotationIcon(i,u.icon)||u.subject&&!this.setAnnotString(i,"Subj",u.subject)||!this.setAnnotString(i,"Contents",u.contents??""))return!1;if(m){for(let d=this.pdfiumModule.FPDFAnnot_GetObjectCount(i)-1;d>=0;d--)this.pdfiumModule.FPDFAnnot_RemoveObject(i,d);if(!this.addImageObject(r,n,e,i,u.rect,m))return!1}return!!this.pdfiumModule.EPDFAnnot_UpdateAppearanceToRect(i,Xr.Cover)}addImageObject(r,n,e,i,u,m){const _=m.width*m.height,g=this.memoryManager.malloc(4*_);if(!g)return!1;for(let G=0;G<_;G++){const O=m.data[G*4],v=m.data[G*4+1],I=m.data[G*4+2],j=m.data[G*4+3];this.pdfiumModule.pdfium.setValue(g+G*4,I,"i8"),this.pdfiumModule.pdfium.setValue(g+G*4+1,v,"i8"),this.pdfiumModule.pdfium.setValue(g+G*4+2,O,"i8"),this.pdfiumModule.pdfium.setValue(g+G*4+3,j,"i8")}const b=this.pdfiumModule.FPDFBitmap_CreateEx(m.width,m.height,4,g,0);if(!b)return this.memoryManager.free(g),!1;const E=this.pdfiumModule.FPDFPageObj_NewImageObj(r);if(!E)return this.pdfiumModule.FPDFBitmap_Destroy(b),this.memoryManager.free(g),!1;if(!this.pdfiumModule.FPDFImageObj_SetBitmap(e,0,E,b))return this.pdfiumModule.FPDFBitmap_Destroy(b),this.pdfiumModule.FPDFPageObj_Destroy(E),this.memoryManager.free(g),!1;const M=this.memoryManager.malloc(6*4);if(this.pdfiumModule.pdfium.setValue(M,m.width,"float"),this.pdfiumModule.pdfium.setValue(M+4,0,"float"),this.pdfiumModule.pdfium.setValue(M+8,0,"float"),this.pdfiumModule.pdfium.setValue(M+12,m.height,"float"),this.pdfiumModule.pdfium.setValue(M+16,0,"float"),this.pdfiumModule.pdfium.setValue(M+20,0,"float"),!this.pdfiumModule.FPDFPageObj_SetMatrix(E,M))return this.memoryManager.free(M),this.pdfiumModule.FPDFBitmap_Destroy(b),this.pdfiumModule.FPDFPageObj_Destroy(E),this.memoryManager.free(g),!1;this.memoryManager.free(M);const y=this.convertDevicePointToPagePoint(n,{x:u.origin.x,y:u.origin.y+m.height});return this.pdfiumModule.FPDFPageObj_Transform(E,1,0,0,1,y.x,y.y),this.pdfiumModule.FPDFAnnot_AppendObject(i,E)?(this.pdfiumModule.FPDFBitmap_Destroy(b),this.memoryManager.free(g),!0):(this.pdfiumModule.FPDFBitmap_Destroy(b),this.pdfiumModule.FPDFPageObj_Destroy(E),this.memoryManager.free(g),!1)}saveDocument(r){const n=this.pdfiumModule.PDFiumExt_OpenFileWriter();this.pdfiumModule.PDFiumExt_SaveAsCopy(r,n);const e=this.pdfiumModule.PDFiumExt_GetFileWriterSize(n),i=this.memoryManager.malloc(e);this.pdfiumModule.PDFiumExt_GetFileWriterData(n,i,e);const u=new ArrayBuffer(e),m=new DataView(u);for(let d=0;d<e;d++)m.setInt8(d,this.pdfiumModule.pdfium.getValue(i+d,"i8"));return this.memoryManager.free(i),this.pdfiumModule.PDFiumExt_CloseFileWriter(n),u}readCatalogLanguage(r){const n=this.pdfiumModule.EPDFCatalog_GetLanguage(r,0,0)>>>0;return n===0?null:n===2?"":ae(this.pdfiumModule.pdfium,(e,i)=>this.pdfiumModule.EPDFCatalog_GetLanguage(r,e,i),this.pdfiumModule.pdfium.UTF16ToString,n)}readMetaText(r,n){if(!!!this.pdfiumModule.EPDF_HasMetaText(r,n))return null;const i=this.pdfiumModule.FPDF_GetMetaText(r,n,0,0);return i===2?"":ae(this.pdfiumModule.pdfium,(u,m)=>this.pdfiumModule.FPDF_GetMetaText(r,n,u,m),this.pdfiumModule.pdfium.UTF16ToString,i)}setMetaText(r,n,e){if(e==null||e.length===0)return!!this.pdfiumModule.EPDF_SetMetaText(r,n,0);const i=2*(e.length+1),u=this.memoryManager.malloc(i);try{return this.pdfiumModule.pdfium.stringToUTF16(e,u,i),!!this.pdfiumModule.EPDF_SetMetaText(r,n,u)}finally{this.memoryManager.free(u)}}getMetaTrapped(r){const n=Number(this.pdfiumModule.EPDF_GetMetaTrapped(r));switch(n){case be.NotSet:case be.True:case be.False:case be.Unknown:return n;default:return be.Unknown}}setMetaTrapped(r,n){const e=n==null||n===void 0?be.NotSet:n;return e===be.NotSet||e===be.True||e===be.False||e===be.Unknown?!!this.pdfiumModule.EPDF_SetMetaTrapped(r,e):!1}getMetaKeyCount(r,n){return Number(this.pdfiumModule.EPDF_GetMetaKeyCount(r,n))|0}getMetaKeyName(r,n,e){const i=this.pdfiumModule.EPDF_GetMetaKeyName(r,n,e,0,0);return i?ae(this.pdfiumModule.pdfium,(u,m)=>this.pdfiumModule.EPDF_GetMetaKeyName(r,n,e,u,m),this.pdfiumModule.pdfium.UTF8ToString,i):null}readAllMeta(r,n=!0){const e=this.getMetaKeyCount(r,n),i={};for(let u=0;u<e;u++){const m=this.getMetaKeyName(r,u,n);m&&(i[m]=this.readMetaText(r,m))}return i}readPdfBookmarks(r,n=0){let e=this.pdfiumModule.FPDFBookmark_GetFirstChild(r,n);const i=[];for(;e;){const u=this.readPdfBookmark(r,e);i.push(u),e=this.pdfiumModule.FPDFBookmark_GetNextSibling(r,e)}return i}readPdfBookmark(r,n){const e=ae(this.pdfiumModule.pdfium,(m,d)=>this.pdfiumModule.FPDFBookmark_GetTitle(n,m,d),this.pdfiumModule.pdfium.UTF16ToString),i=this.readPdfBookmarks(r,n),u=this.readPdfBookmarkTarget(r,()=>this.pdfiumModule.FPDFBookmark_GetAction(n),()=>this.pdfiumModule.FPDFBookmark_GetDest(r,n));return{title:e,target:u,children:i}}readPageTextRects(r,n,e,i){const u=this.pdfiumModule.FPDFText_CountRects(i,0,-1),m=[];for(let d=0;d<u;d++){const _=this.memoryManager.malloc(8),g=this.memoryManager.malloc(8),h=this.memoryManager.malloc(8),b=this.memoryManager.malloc(8);if(!this.pdfiumModule.FPDFText_GetRect(i,d,g,_,h,b)){this.memoryManager.free(g),this.memoryManager.free(_),this.memoryManager.free(h),this.memoryManager.free(b);continue}const M=this.pdfiumModule.pdfium.getValue(g,"double"),y=this.pdfiumModule.pdfium.getValue(_,"double"),G=this.pdfiumModule.pdfium.getValue(h,"double"),O=this.pdfiumModule.pdfium.getValue(b,"double");this.memoryManager.free(g),this.memoryManager.free(_),this.memoryManager.free(h),this.memoryManager.free(b);const v=this.memoryManager.malloc(4),I=this.memoryManager.malloc(4);this.pdfiumModule.FPDF_PageToDevice(e,0,0,r.size.width,r.size.height,0,M,y,v,I);const j=this.pdfiumModule.pdfium.getValue(v,"i32"),Y=this.pdfiumModule.pdfium.getValue(I,"i32");this.memoryManager.free(v),this.memoryManager.free(I);const C={origin:{x:j,y:Y},size:{width:Math.ceil(Math.abs(G-M)),height:Math.ceil(Math.abs(y-O))}},H=this.pdfiumModule.FPDFText_GetBoundedText(i,M,y,G,O,0,0),Q=(H+1)*2,K=this.memoryManager.malloc(Q);this.pdfiumModule.FPDFText_GetBoundedText(i,M,y,G,O,K,H);const de=this.pdfiumModule.pdfium.UTF16ToString(K);this.memoryManager.free(K);const k=this.pdfiumModule.FPDFText_GetCharIndexAtPos(i,M,y,2,2);let X="",Fe=C.size.height;if(k>=0){Fe=this.pdfiumModule.FPDFText_GetFontSize(i,k);const se=this.pdfiumModule.FPDFText_GetFontInfo(i,k,0,0,0)+1,Se=this.memoryManager.malloc(se),Ue=this.memoryManager.malloc(4);this.pdfiumModule.FPDFText_GetFontInfo(i,k,Se,se,Ue),X=this.pdfiumModule.pdfium.UTF8ToString(Se),this.memoryManager.free(Se),this.memoryManager.free(Ue)}const pe={content:de,rect:C,font:{family:X,size:Fe}};m.push(pe)}return m}getPageGeometry(r,n){const e="getPageGeometry";this.logger.perf(f,D,e,"Begin",r.id);const i=this.cache.getContext(r.id);if(!i)return this.logger.perf(f,D,e,"End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});const u=i.acquirePage(n.index),m=u.getTextPage(),d=this.pdfiumModule.FPDFText_CountChars(m),_=[];for(let h=0;h<d;h++){const b=this.readGlyphInfo(n,u.pagePtr,m,h);_.push(b)}const g=this.buildRunsFromGlyphs(_,m);return u.release(),this.logger.perf(f,D,e,"End",r.id),S.resolve({runs:g})}buildRunsFromGlyphs(r,n){const e=[];let i=null,u=null,m=null;for(let d=0;d<r.length;d++){const _=r[d],g=this.pdfiumModule.FPDFText_GetTextObject(n,d);if(g!==u&&(u=g,i={rect:{x:_.origin.x,y:_.origin.y,width:_.size.width,height:_.size.height},charStart:d,glyphs:[]},m={minX:_.origin.x,minY:_.origin.y,maxX:_.origin.x+_.size.width,maxY:_.origin.y+_.size.height},e.push(i)),i.glyphs.push({x:_.origin.x,y:_.origin.y,width:_.size.width,height:_.size.height,flags:_.isEmpty?2:_.isSpace?1:0}),_.isEmpty)continue;const h=_.origin.x+_.size.width,b=_.origin.y+_.size.height;m.minX=Math.min(m.minX,_.origin.x),m.minY=Math.min(m.minY,_.origin.y),m.maxX=Math.max(m.maxX,h),m.maxY=Math.max(m.maxY,b),i.rect.x=m.minX,i.rect.y=m.minY,i.rect.width=m.maxX-m.minX,i.rect.height=m.maxY-m.minY}return e}readGlyphInfo(r,n,e,i){const u=this.memoryManager.malloc(4),m=this.memoryManager.malloc(4),d=this.memoryManager.malloc(4),_=this.memoryManager.malloc(4),g=this.memoryManager.malloc(16);let h=0,b=0,E=0,M=0,y=!1;if(this.pdfiumModule.FPDFText_GetLooseCharBox(e,i,g)){const G=this.pdfiumModule.pdfium.getValue(g,"float"),O=this.pdfiumModule.pdfium.getValue(g+4,"float"),v=this.pdfiumModule.pdfium.getValue(g+8,"float"),I=this.pdfiumModule.pdfium.getValue(g+12,"float");if(G===v||O===I)return[g,u,m,d,_].forEach(K=>this.memoryManager.free(K)),{origin:{x:0,y:0},size:{width:0,height:0},isEmpty:!0};this.pdfiumModule.FPDF_PageToDevice(n,0,0,r.size.width,r.size.height,0,G,O,u,m),this.pdfiumModule.FPDF_PageToDevice(n,0,0,r.size.width,r.size.height,0,v,I,d,_);const j=this.pdfiumModule.pdfium.getValue(u,"i32"),Y=this.pdfiumModule.pdfium.getValue(m,"i32"),C=this.pdfiumModule.pdfium.getValue(d,"i32"),H=this.pdfiumModule.pdfium.getValue(_,"i32");h=Math.min(j,C),b=Math.min(Y,H),E=Math.max(1,Math.abs(C-j)),M=Math.max(1,Math.abs(H-Y)),y=this.pdfiumModule.FPDFText_GetUnicode(e,i)===32}return[g,u,m,d,_].forEach(G=>this.memoryManager.free(G)),{origin:{x:h,y:b},size:{width:E,height:M},...y&&{isSpace:y}}}getPageGlyphs(r,n){this.logger.debug(f,D,"getPageGlyphs",r,n),this.logger.perf(f,D,"getPageGlyphs","Begin",r.id);const e=this.cache.getContext(r.id);if(!e)return this.logger.perf(f,D,"getPageGlyphs","End",r.id),S.reject({code:x.DocNotOpen,message:"document does not open"});const i=e.acquirePage(n.index),u=i.getTextPage(),m=this.pdfiumModule.FPDFText_CountChars(u),d=new Array(m);for(let _=0;_<m;_++){const g=this.readGlyphInfo(n,i.pagePtr,u,_);g.isEmpty||(d[_]={...g})}return i.release(),this.logger.perf(f,D,"getPageGlyphs","End",r.id),S.resolve(d)}readCharBox(r,n,e,i){const u=this.memoryManager.malloc(8),m=this.memoryManager.malloc(8),d=this.memoryManager.malloc(8),_=this.memoryManager.malloc(8);let g=0,h=0,b=0,E=0;if(this.pdfiumModule.FPDFText_GetCharBox(e,i,m,_,d,u)){const M=this.pdfiumModule.pdfium.getValue(u,"double"),y=this.pdfiumModule.pdfium.getValue(m,"double"),G=this.pdfiumModule.pdfium.getValue(d,"double"),O=this.pdfiumModule.pdfium.getValue(_,"double"),v=this.memoryManager.malloc(4),I=this.memoryManager.malloc(4);this.pdfiumModule.FPDF_PageToDevice(n,0,0,r.size.width,r.size.height,0,y,M,v,I),g=this.pdfiumModule.pdfium.getValue(v,"i32"),h=this.pdfiumModule.pdfium.getValue(I,"i32"),this.memoryManager.free(v),this.memoryManager.free(I),b=Math.ceil(Math.abs(O-y)),E=Math.ceil(Math.abs(M-G))}return this.memoryManager.free(u),this.memoryManager.free(m),this.memoryManager.free(d),this.memoryManager.free(_),{origin:{x:g,y:h},size:{width:b,height:E}}}readPageAnnotations(r,n){return r.borrowPage(n.index,e=>{const i=this.pdfiumModule.FPDFPage_GetAnnotCount(e.pagePtr),u=[];for(let m=0;m<i;m++)e.withAnnotation(m,d=>{const _=this.readPageAnnotation(r.docPtr,n,d,e);_&&u.push(_)});return u})}readPageAnnotationsRaw(r,n){const e=this.pdfiumModule.EPDFPage_GetAnnotCountRaw(r.docPtr,n.index);if(e<=0)return[];const i=[];for(let u=0;u<e;++u){const m=this.pdfiumModule.EPDFPage_GetAnnotRaw(r.docPtr,n.index,u);if(m)try{const d=this.readPageAnnotation(r.docPtr,n,m);d&&i.push(d)}finally{this.pdfiumModule.FPDFPage_CloseAnnot(m)}}return i}readPageAnnotation(r,n,e,i){let u=this.getAnnotString(e,"NM");(!u||!Yt(u))&&(u=Kt(),this.setAnnotString(e,"NM",u));const m=this.pdfiumModule.FPDFAnnot_GetSubtype(e);let d;switch(m){case w.TEXT:d=this.readPdfTextAnno(n,e,u);break;case w.FREETEXT:d=this.readPdfFreeTextAnno(n,e,u);break;case w.LINK:d=this.readPdfLinkAnno(n,r,e,u);break;case w.WIDGET:if(i)return this.readPdfWidgetAnno(n,e,i.getFormHandle(),u);case w.FILEATTACHMENT:d=this.readPdfFileAttachmentAnno(n,e,u);break;case w.INK:d=this.readPdfInkAnno(n,e,u);break;case w.POLYGON:d=this.readPdfPolygonAnno(n,e,u);break;case w.POLYLINE:d=this.readPdfPolylineAnno(n,e,u);break;case w.LINE:d=this.readPdfLineAnno(n,e,u);break;case w.HIGHLIGHT:d=this.readPdfHighlightAnno(n,e,u);break;case w.STAMP:d=this.readPdfStampAnno(n,e,u);break;case w.SQUARE:d=this.readPdfSquareAnno(n,e,u);break;case w.CIRCLE:d=this.readPdfCircleAnno(n,e,u);break;case w.UNDERLINE:d=this.readPdfUnderlineAnno(n,e,u);break;case w.SQUIGGLY:d=this.readPdfSquigglyAnno(n,e,u);break;case w.STRIKEOUT:d=this.readPdfStrikeOutAnno(n,e,u);break;case w.CARET:d=this.readPdfCaretAnno(n,e,u);break;default:d=this.readPdfAnno(n,m,e,u);break}return d}readAnnotationColor(r,n=ne.Color){const e=this.memoryManager.malloc(4),i=this.memoryManager.malloc(4),u=this.memoryManager.malloc(4),m=this.pdfiumModule.EPDFAnnot_GetColor(r,n,e,i,u);let d;return m&&(d={red:this.pdfiumModule.pdfium.getValue(e,"i32")&255,green:this.pdfiumModule.pdfium.getValue(i,"i32")&255,blue:this.pdfiumModule.pdfium.getValue(u,"i32")&255}),this.memoryManager.free(e),this.memoryManager.free(i),this.memoryManager.free(u),d}getAnnotationColor(r,n=ne.Color){const e=this.readAnnotationColor(r,n);return e?Xt(e):void 0}setAnnotationColor(r,n,e=ne.Color){const i=Jt(n);return this.pdfiumModule.EPDFAnnot_SetColor(r,e,i.red&255,i.green&255,i.blue&255)}getAnnotationOpacity(r){const n=this.memoryManager.malloc(4),i=this.pdfiumModule.EPDFAnnot_GetOpacity(r,n)?this.pdfiumModule.pdfium.getValue(n,"i32"):255;return this.memoryManager.free(n),Jr(i)}setAnnotationOpacity(r,n){const e=no(n);return this.pdfiumModule.EPDFAnnot_SetOpacity(r,e&255)}getAnnotationTextAlignment(r){return this.pdfiumModule.EPDFAnnot_GetTextAlignment(r)}setAnnotationTextAlignment(r,n){return!!this.pdfiumModule.EPDFAnnot_SetTextAlignment(r,n)}getAnnotationVerticalAlignment(r){return this.pdfiumModule.EPDFAnnot_GetVerticalAlignment(r)}setAnnotationVerticalAlignment(r,n){return!!this.pdfiumModule.EPDFAnnot_SetVerticalAlignment(r,n)}getAnnotationDefaultAppearance(r){const n=this.memoryManager.malloc(4),e=this.memoryManager.malloc(4),i=this.memoryManager.malloc(4),u=this.memoryManager.malloc(4),m=this.memoryManager.malloc(4);if(!!!this.pdfiumModule.EPDFAnnot_GetDefaultAppearance(r,n,e,i,u,m)){[n,e,i,u,m].forEach(y=>this.memoryManager.free(y));return}const _=this.pdfiumModule.pdfium,g=_.getValue(n,"i32"),h=_.getValue(e,"float"),b=_.getValue(i,"i32")&255,E=_.getValue(u,"i32")&255,M=_.getValue(m,"i32")&255;return[n,e,i,u,m].forEach(y=>this.memoryManager.free(y)),{fontFamily:g,fontSize:h,fontColor:Xt({red:b,green:E,blue:M})}}setAnnotationDefaultAppearance(r,n,e,i){const{red:u,green:m,blue:d}=Jt(i);return!!this.pdfiumModule.EPDFAnnot_SetDefaultAppearance(r,n,e,u&255,m&255,d&255)}getBorderStyle(r){const n=this.memoryManager.malloc(4);let e=0,i=Me.UNKNOWN,u=!1;return i=this.pdfiumModule.EPDFAnnot_GetBorderStyle(r,n),e=this.pdfiumModule.pdfium.getValue(n,"float"),u=i!==Me.UNKNOWN,this.memoryManager.free(n),{ok:u,style:i,width:e}}setBorderStyle(r,n,e){return this.pdfiumModule.EPDFAnnot_SetBorderStyle(r,n,e)}getAnnotationIcon(r){return this.pdfiumModule.EPDFAnnot_GetIcon(r)}setAnnotationIcon(r,n){return this.pdfiumModule.EPDFAnnot_SetIcon(r,n)}getBorderEffect(r){const n=this.memoryManager.malloc(4),e=!!this.pdfiumModule.EPDFAnnot_GetBorderEffect(r,n),i=e?this.pdfiumModule.pdfium.getValue(n,"float"):0;return this.memoryManager.free(n),{ok:e,intensity:i}}getRectangleDifferences(r){const n=this.memoryManager.malloc(4),e=this.memoryManager.malloc(4),i=this.memoryManager.malloc(4),u=this.memoryManager.malloc(4),m=!!this.pdfiumModule.EPDFAnnot_GetRectangleDifferences(r,n,e,i,u),d=this.pdfiumModule.pdfium,_=d.getValue(n,"float"),g=d.getValue(e,"float"),h=d.getValue(i,"float"),b=d.getValue(u,"float");return this.memoryManager.free(n),this.memoryManager.free(e),this.memoryManager.free(i),this.memoryManager.free(u),{ok:m,left:_,top:g,right:h,bottom:b}}getAnnotationDate(r,n){const e=this.getAnnotString(r,n);return e?tt(e):void 0}setAnnotationDate(r,n,e){const i=ct(e);return this.setAnnotString(r,n,i)}getAttachmentDate(r,n){const e=this.getAttachmentString(r,n);return e?tt(e):void 0}setAttachmentDate(r,n,e){const i=ct(e);return this.setAttachmentString(r,n,i)}getBorderDashPattern(r){const n=this.pdfiumModule.EPDFAnnot_GetBorderDashPatternCount(r);if(n===0)return{ok:!1,pattern:[]};const e=this.memoryManager.malloc(4*n),i=!!this.pdfiumModule.EPDFAnnot_GetBorderDashPattern(r,e,n),u=[];if(i){const m=this.pdfiumModule.pdfium;for(let d=0;d<n;d++)u.push(m.getValue(e+4*d,"float"))}return this.memoryManager.free(e),{ok:i,pattern:u}}setBorderDashPattern(r,n){if(!n||n.length===0)return this.pdfiumModule.EPDFAnnot_SetBorderDashPattern(r,0,0);const e=n.map(d=>Number.isFinite(d)&&d>0?d:0).filter(d=>d>0);if(e.length===0)return this.pdfiumModule.EPDFAnnot_SetBorderDashPattern(r,0,0);const i=4*e.length,u=this.memoryManager.malloc(i);for(let d=0;d<e.length;d++)this.pdfiumModule.pdfium.setValue(u+4*d,e[d],"float");const m=!!this.pdfiumModule.EPDFAnnot_SetBorderDashPattern(r,u,e.length);return this.memoryManager.free(u),m}getLineEndings(r){const n=this.memoryManager.malloc(4),e=this.memoryManager.malloc(4);if(!!!this.pdfiumModule.EPDFAnnot_GetLineEndings(r,n,e)){this.memoryManager.free(n),this.memoryManager.free(e);return}const u=this.pdfiumModule.pdfium.getValue(n,"i32"),m=this.pdfiumModule.pdfium.getValue(e,"i32");return this.memoryManager.free(n),this.memoryManager.free(e),{start:u,end:m}}setLineEndings(r,n,e){return!!this.pdfiumModule.EPDFAnnot_SetLineEndings(r,n,e)}getLinePoints(r,n){const e=this.memoryManager.malloc(8),i=this.memoryManager.malloc(8);if(!this.pdfiumModule.FPDFAnnot_GetLine(n,e,i)){this.memoryManager.free(e),this.memoryManager.free(i);return}const m=this.pdfiumModule.pdfium,d=m.getValue(e+0,"float"),_=m.getValue(e+4,"float"),g=m.getValue(i+0,"float"),h=m.getValue(i+4,"float");this.memoryManager.free(e),this.memoryManager.free(i);const b=this.convertPagePointToDevicePoint(r,{x:d,y:_}),E=this.convertPagePointToDevicePoint(r,{x:g,y:h});return{start:b,end:E}}setLinePoints(r,n,e,i){const u=this.convertDevicePointToPagePoint(r,e),m=this.convertDevicePointToPagePoint(r,i);if(!u||!m)return!1;const d=this.memoryManager.malloc(16),_=this.pdfiumModule.pdfium;_.setValue(d+0,u.x,"float"),_.setValue(d+4,u.y,"float"),_.setValue(d+8,m.x,"float"),_.setValue(d+12,m.y,"float");const g=this.pdfiumModule.EPDFAnnot_SetLine(n,d,d+8);return this.memoryManager.free(d),!!g}getQuadPointsAnno(r,n){const e=this.pdfiumModule.FPDFAnnot_CountAttachmentPoints(n);if(e===0)return[];const i=8*4,u=[];for(let m=0;m<e;m++){const d=this.memoryManager.malloc(i);if(this.pdfiumModule.FPDFAnnot_GetAttachmentPoints(n,m,d)){const g=[],h=[];for(let G=0;G<4;G++){const O=d+G*8;g.push(this.pdfiumModule.pdfium.getValue(O,"float")),h.push(this.pdfiumModule.pdfium.getValue(O+4,"float"))}const b=this.convertPagePointToDevicePoint(r,{x:g[0],y:h[0]}),E=this.convertPagePointToDevicePoint(r,{x:g[1],y:h[1]}),M=this.convertPagePointToDevicePoint(r,{x:g[2],y:h[2]}),y=this.convertPagePointToDevicePoint(r,{x:g[3],y:h[3]});u.push({p1:b,p2:E,p3:M,p4:y})}this.memoryManager.free(d)}return u.map(qr)}syncQuadPointsAnno(r,n,e){const u=this.pdfiumModule.pdfium,m=this.pdfiumModule.FPDFAnnot_CountAttachmentPoints(n),d=this.memoryManager.malloc(32),_=h=>{const b=qt(h),E=this.convertDevicePointToPagePoint(r,b.p1),M=this.convertDevicePointToPagePoint(r,b.p2),y=this.convertDevicePointToPagePoint(r,b.p3),G=this.convertDevicePointToPagePoint(r,b.p4);u.setValue(d+0,E.x,"float"),u.setValue(d+4,E.y,"float"),u.setValue(d+8,M.x,"float"),u.setValue(d+12,M.y,"float"),u.setValue(d+16,G.x,"float"),u.setValue(d+20,G.y,"float"),u.setValue(d+24,y.x,"float"),u.setValue(d+28,y.y,"float")},g=Math.min(m,e.length);for(let h=0;h<g;h++)if(_(e[h]),!this.pdfiumModule.FPDFAnnot_SetAttachmentPoints(n,h,d))return this.memoryManager.free(d),!1;for(let h=m;h<e.length;h++)if(_(e[h]),!this.pdfiumModule.FPDFAnnot_AppendAttachmentPoints(n,d))return this.memoryManager.free(d),!1;return this.memoryManager.free(d),!0}redactTextInRects(r,n,e,i){const{recurseForms:u=!0,drawBlackBoxes:m=!1}=i??{};this.logger.debug("PDFiumEngine","Engine","redactTextInQuads",r.id,n.index,e.length);const d="RedactTextInQuads";this.logger.perf("PDFiumEngine","Engine",d,"Begin",`${r.id}-${n.index}`);const _=this.cache.getContext(r.id);if(!_)return this.logger.perf("PDFiumEngine","Engine",d,"End",`${r.id}-${n.index}`),S.reject({code:x.DocNotOpen,message:"document does not open"});const g=(e??[]).filter(y=>y&&Number.isFinite(y.origin?.x)&&Number.isFinite(y.origin?.y)&&Number.isFinite(y.size?.width)&&Number.isFinite(y.size?.height)&&y.size.width>0&&y.size.height>0);if(g.length===0)return this.logger.perf("PDFiumEngine","Engine",d,"End",`${r.id}-${n.index}`),S.resolve(!1);const h=_.acquirePage(n.index),{ptr:b,count:E}=this.allocFSQuadsBufferFromRects(n,g);let M=!1;try{M=!!this.pdfiumModule.EPDFText_RedactInQuads(h.pagePtr,b,E,!!u,!!m)}finally{this.memoryManager.free(b)}return M&&(M=!!this.pdfiumModule.FPDFPage_GenerateContent(h.pagePtr)),h.disposeImmediate(),this.logger.perf("PDFiumEngine","Engine",d,"End",`${r.id}-${n.index}`),S.resolve(!!M)}allocFSQuadsBufferFromRects(r,n){const i=n.length,u=this.memoryManager.malloc(32*i),m=this.pdfiumModule.pdfium;for(let d=0;d<i;d++){const _=n[d],g=qt(_),h=this.convertDevicePointToPagePoint(r,g.p1),b=this.convertDevicePointToPagePoint(r,g.p2),E=this.convertDevicePointToPagePoint(r,g.p3),M=this.convertDevicePointToPagePoint(r,g.p4),y=u+d*32;m.setValue(y+0,h.x,"float"),m.setValue(y+4,h.y,"float"),m.setValue(y+8,b.x,"float"),m.setValue(y+12,b.y,"float"),m.setValue(y+16,M.x,"float"),m.setValue(y+20,M.y,"float"),m.setValue(y+24,E.x,"float"),m.setValue(y+28,E.y,"float")}return{ptr:u,count:i}}getInkList(r,n){const e=[],i=this.pdfiumModule.FPDFAnnot_GetInkListCount(n);if(i<=0)return e;const u=this.pdfiumModule.pdfium,m=8;for(let d=0;d<i;d++){const _=[],g=this.pdfiumModule.FPDFAnnot_GetInkListPath(n,d,0,0);if(g>0){const h=this.memoryManager.malloc(g*m);this.pdfiumModule.FPDFAnnot_GetInkListPath(n,d,h,g);for(let b=0;b<g;b++){const E=h+b*m,M=u.getValue(E+0,"float"),y=u.getValue(E+4,"float"),G=this.convertPagePointToDevicePoint(r,{x:M,y});_.push({x:G.x,y:G.y})}this.memoryManager.free(h)}e.push({points:_})}return e}setInkList(r,n,e){const i=this.pdfiumModule.pdfium,u=8;for(const m of e){const d=m.points.length;if(d===0)continue;const _=this.memoryManager.malloc(d*u);for(let h=0;h<d;h++){const b=m.points[h],E=this.convertDevicePointToPagePoint(r,b);i.setValue(_+h*u+0,E.x,"float"),i.setValue(_+h*u+4,E.y,"float")}const g=this.pdfiumModule.FPDFAnnot_AddInkStroke(n,_,d);if(this.memoryManager.free(_),g===-1)return!1}return!0}readPdfTextAnno(r,n,e){const i=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),g=this.getAnnotationDate(n,"CreationDate"),h=this.getAnnotString(n,"Contents")||"",b=this.getAnnotString(n,"State"),E=this.getAnnotString(n,"StateModel"),M=this.getAnnotationColor(n),y=this.getAnnotationOpacity(n),G=this.getInReplyToId(n),O=this.getAnnotationFlags(n),v=this.getAnnotationIcon(n);return{pageIndex:r.index,custom:i,id:e,type:w.TEXT,flags:O,contents:h,color:M??"#FFFF00",opacity:y,rect:m,inReplyToId:G,author:d,modified:_,created:g,state:b,stateModel:E,icon:v}}readPdfFreeTextAnno(r,n,e){const i=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"Contents")||"",_=this.getAnnotString(n,"T"),g=this.getAnnotationDate(n,"M"),h=this.getAnnotationDate(n,"CreationDate"),b=this.getAnnotString(n,"DS"),E=this.getAnnotationDefaultAppearance(n),M=this.getAnnotationColor(n),y=this.getAnnotationTextAlignment(n),G=this.getAnnotationVerticalAlignment(n),O=this.getAnnotationOpacity(n),v=this.getAnnotRichContent(n),I=this.getAnnotationFlags(n);return{pageIndex:r.index,custom:i,id:e,type:w.FREETEXT,fontFamily:E?.fontFamily??Qr.Unknown,fontSize:E?.fontSize??12,fontColor:E?.fontColor??"#000000",verticalAlign:G,backgroundColor:M,flags:I,opacity:O,textAlign:y,defaultStyle:b,richContent:v,contents:d,author:_,modified:g,created:h,rect:m}}readPdfLinkAnno(r,n,e,i){const u=this.getAnnotCustom(e),m=this.pdfiumModule.FPDFAnnot_GetLink(e);if(!m)return;const d=this.readPageAnnoRect(e),_=this.convertPageRectToDeviceRect(r,d),g=this.getAnnotString(e,"T"),h=this.getAnnotationDate(e,"M"),b=this.getAnnotationDate(e,"CreationDate"),E=this.getAnnotationFlags(e),M=this.readPdfLinkAnnoTarget(n,()=>this.pdfiumModule.FPDFLink_GetAction(m),()=>this.pdfiumModule.FPDFLink_GetDest(n,m));return{pageIndex:r.index,custom:u,id:i,type:w.LINK,flags:E,target:M,rect:_,author:g,modified:h,created:b}}readPdfWidgetAnno(r,n,e,i){const u=this.getAnnotCustom(n),m=this.readPageAnnoRect(n),d=this.convertPageRectToDeviceRect(r,m),_=this.getAnnotString(n,"T"),g=this.getAnnotationDate(n,"M"),h=this.getAnnotationDate(n,"CreationDate"),b=this.getAnnotationFlags(n),E=this.readPdfWidgetAnnoField(e,n);return{pageIndex:r.index,custom:u,id:i,type:w.WIDGET,flags:b,rect:d,field:E,author:_,modified:g,created:h}}readPdfFileAttachmentAnno(r,n,e){const i=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),g=this.getAnnotationDate(n,"CreationDate"),h=this.getAnnotationFlags(n);return{pageIndex:r.index,custom:i,id:e,type:w.FILEATTACHMENT,flags:h,rect:m,author:d,modified:_,created:g}}readPdfInkAnno(r,n,e){const i=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),g=this.getAnnotationDate(n,"CreationDate"),h=this.getAnnotationColor(n),b=this.getAnnotationOpacity(n),{width:E}=this.getBorderStyle(n),M=this.getInkList(r,n),y=this.pdfiumModule.EPDFAnnot_GetBlendMode(n),G=this.getAnnotIntent(n),O=this.getAnnotationFlags(n),v=this.getAnnotString(n,"Contents")||"";return{pageIndex:r.index,custom:i,id:e,type:w.INK,...G&&{intent:G},contents:v,blendMode:y,flags:O,color:h??"#FF0000",opacity:b,strokeWidth:E===0?1:E,rect:m,inkList:M,author:d,modified:_,created:g}}readPdfPolygonAnno(r,n,e){const i=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),g=this.getAnnotationDate(n,"CreationDate"),h=this.readPdfAnnoVertices(r,n),b=this.getAnnotString(n,"Contents")||"",E=this.getAnnotationFlags(n),M=this.getAnnotationColor(n),y=this.getAnnotationColor(n,ne.InteriorColor),G=this.getAnnotationOpacity(n);let{style:O,width:v}=this.getBorderStyle(n),I;if(O===Me.DASHED){const{ok:j,pattern:Y}=this.getBorderDashPattern(n);j&&(I=Y)}if(h.length>1){const j=h[0],Y=h[h.length-1];j.x===Y.x&&j.y===Y.y&&h.pop()}return{pageIndex:r.index,custom:i,id:e,type:w.POLYGON,contents:b,flags:E,strokeColor:M??"#FF0000",color:y??"transparent",opacity:G,strokeWidth:v===0?1:v,strokeStyle:O,strokeDashArray:I,rect:m,vertices:h,author:d,modified:_,created:g}}readPdfPolylineAnno(r,n,e){const i=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),g=this.getAnnotationDate(n,"CreationDate"),h=this.readPdfAnnoVertices(r,n),b=this.getAnnotString(n,"Contents")||"",E=this.getAnnotationColor(n),M=this.getAnnotationFlags(n),y=this.getAnnotationColor(n,ne.InteriorColor),G=this.getAnnotationOpacity(n);let{style:O,width:v}=this.getBorderStyle(n),I;if(O===Me.DASHED){const{ok:Y,pattern:C}=this.getBorderDashPattern(n);Y&&(I=C)}const j=this.getLineEndings(n);return{pageIndex:r.index,custom:i,id:e,type:w.POLYLINE,contents:b,flags:M,strokeColor:E??"#FF0000",color:y??"transparent",opacity:G,strokeWidth:v===0?1:v,strokeStyle:O,strokeDashArray:I,lineEndings:j,rect:m,vertices:h,author:d,modified:_,created:g}}readPdfLineAnno(r,n,e){const i=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),g=this.getAnnotationDate(n,"CreationDate"),h=this.getLinePoints(r,n),b=this.getLineEndings(n),E=this.getAnnotString(n,"Contents")||"",M=this.getAnnotationColor(n),y=this.getAnnotationFlags(n),G=this.getAnnotationColor(n,ne.InteriorColor),O=this.getAnnotationOpacity(n);let{style:v,width:I}=this.getBorderStyle(n),j;if(v===Me.DASHED){const{ok:Y,pattern:C}=this.getBorderDashPattern(n);Y&&(j=C)}return{pageIndex:r.index,custom:i,id:e,type:w.LINE,flags:y,rect:m,contents:E,strokeWidth:I===0?1:I,strokeStyle:v,strokeDashArray:j,strokeColor:M??"#FF0000",color:G??"transparent",opacity:O,linePoints:h||{start:{x:0,y:0},end:{x:0,y:0}},lineEndings:b||{start:Le.None,end:Le.None},author:d,modified:_,created:g}}readPdfHighlightAnno(r,n,e){const i=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getQuadPointsAnno(r,n),_=this.getAnnotationColor(n),g=this.getAnnotationOpacity(n),h=this.pdfiumModule.EPDFAnnot_GetBlendMode(n),b=this.getAnnotString(n,"T"),E=this.getAnnotationDate(n,"M"),M=this.getAnnotationDate(n,"CreationDate"),y=this.getAnnotString(n,"Contents")||"",G=this.getAnnotationFlags(n);return{pageIndex:r.index,custom:i,id:e,blendMode:h,type:w.HIGHLIGHT,rect:m,flags:G,contents:y,segmentRects:d,color:_??"#FFFF00",opacity:g,author:b,modified:E,created:M}}readPdfUnderlineAnno(r,n,e){const i=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),g=this.getAnnotationDate(n,"CreationDate"),h=this.getQuadPointsAnno(r,n),b=this.getAnnotString(n,"Contents")||"",E=this.getAnnotationColor(n),M=this.getAnnotationOpacity(n),y=this.pdfiumModule.EPDFAnnot_GetBlendMode(n),G=this.getAnnotationFlags(n);return{pageIndex:r.index,custom:i,id:e,blendMode:y,type:w.UNDERLINE,rect:m,flags:G,contents:b,segmentRects:h,color:E??"#FF0000",opacity:M,author:d,modified:_,created:g}}readPdfStrikeOutAnno(r,n,e){const i=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),g=this.getAnnotationDate(n,"CreationDate"),h=this.getQuadPointsAnno(r,n),b=this.getAnnotString(n,"Contents")||"",E=this.getAnnotationColor(n),M=this.getAnnotationOpacity(n),y=this.pdfiumModule.EPDFAnnot_GetBlendMode(n),G=this.getAnnotationFlags(n);return{pageIndex:r.index,custom:i,id:e,blendMode:y,type:w.STRIKEOUT,flags:G,rect:m,contents:b,segmentRects:h,color:E??"#FF0000",opacity:M,author:d,modified:_,created:g}}readPdfSquigglyAnno(r,n,e){const i=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),g=this.getAnnotationDate(n,"CreationDate"),h=this.getQuadPointsAnno(r,n),b=this.getAnnotString(n,"Contents")||"",E=this.getAnnotationColor(n),M=this.getAnnotationOpacity(n),y=this.pdfiumModule.EPDFAnnot_GetBlendMode(n),G=this.getAnnotationFlags(n);return{pageIndex:r.index,custom:i,id:e,blendMode:y,type:w.SQUIGGLY,rect:m,flags:G,contents:b,segmentRects:h,color:E??"#FF0000",opacity:M,author:d,modified:_,created:g}}readPdfCaretAnno(r,n,e){const i=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),g=this.getAnnotationDate(n,"CreationDate"),h=this.getAnnotationFlags(n);return{pageIndex:r.index,custom:i,id:e,type:w.CARET,rect:m,flags:h,author:d,modified:_,created:g}}readPdfStampAnno(r,n,e){const i=this.getAnnotCustom(n),u=this.readPageAnnoRect(n),m=this.convertPageRectToDeviceRect(r,u),d=this.getAnnotString(n,"T"),_=this.getAnnotationDate(n,"M"),g=this.getAnnotationDate(n,"CreationDate"),h=this.getAnnotationFlags(n),b=this.getAnnotString(n,"Contents")||"";return{pageIndex:r.index,custom:i,id:e,type:w.STAMP,contents:b,rect:m,author:d,modified:_,created:g,flags:h}}readPdfPageObject(r){switch(this.pdfiumModule.FPDFPageObj_GetType(r)){case Ne.PATH:return this.readPathObject(r);case Ne.IMAGE:return this.readImageObject(r);case Ne.FORM:return this.readFormObject(r)}}readPathObject(r){const n=this.pdfiumModule.FPDFPath_CountSegments(r),e=this.memoryManager.malloc(4),i=this.memoryManager.malloc(4),u=this.memoryManager.malloc(4),m=this.memoryManager.malloc(4);this.pdfiumModule.FPDFPageObj_GetBounds(r,e,i,u,m);const d=this.pdfiumModule.pdfium.getValue(e,"float"),_=this.pdfiumModule.pdfium.getValue(i,"float"),g=this.pdfiumModule.pdfium.getValue(u,"float"),h=this.pdfiumModule.pdfium.getValue(m,"float"),b={left:d,bottom:_,right:g,top:h};this.memoryManager.free(e),this.memoryManager.free(i),this.memoryManager.free(u),this.memoryManager.free(m);const E=[];for(let y=0;y<n;y++){const G=this.readPdfSegment(r,y);E.push(G)}const M=this.readPdfPageObjectTransformMatrix(r);return{type:Ne.PATH,bounds:b,segments:E,matrix:M}}readPdfSegment(r,n){const e=this.pdfiumModule.FPDFPath_GetPathSegment(r,n),i=this.pdfiumModule.FPDFPathSegment_GetType(e),u=this.pdfiumModule.FPDFPathSegment_GetClose(e),m=this.memoryManager.malloc(4),d=this.memoryManager.malloc(4);this.pdfiumModule.FPDFPathSegment_GetPoint(e,m,d);const _=this.pdfiumModule.pdfium.getValue(m,"float"),g=this.pdfiumModule.pdfium.getValue(d,"float");return this.memoryManager.free(m),this.memoryManager.free(d),{type:i,point:{x:_,y:g},isClosed:u}}readImageObject(r){const n=this.pdfiumModule.FPDFImageObj_GetBitmap(r),e=this.pdfiumModule.FPDFBitmap_GetBuffer(n),i=this.pdfiumModule.FPDFBitmap_GetWidth(n),u=this.pdfiumModule.FPDFBitmap_GetHeight(n),m=this.pdfiumModule.FPDFBitmap_GetFormat(n),d=i*u,_=4,g=new Uint8ClampedArray(d*_);for(let E=0;E<d;E++)switch(m){case 2:{const M=this.pdfiumModule.pdfium.getValue(e+E*3,"i8"),y=this.pdfiumModule.pdfium.getValue(e+E*3+1,"i8"),G=this.pdfiumModule.pdfium.getValue(e+E*3+2,"i8");g[E*_]=G,g[E*_+1]=y,g[E*_+2]=M,g[E*_+3]=100}break}const h=new ImageData(g,i,u),b=this.readPdfPageObjectTransformMatrix(r);return{type:Ne.IMAGE,imageData:h,matrix:b}}readFormObject(r){const n=this.pdfiumModule.FPDFFormObj_CountObjects(r),e=[];for(let u=0;u<n;u++){const m=this.pdfiumModule.FPDFFormObj_GetObject(r,u),d=this.readPdfPageObject(m);d&&e.push(d)}const i=this.readPdfPageObjectTransformMatrix(r);return{type:Ne.FORM,objects:e,matrix:i}}readPdfPageObjectTransformMatrix(r){const n=this.memoryManager.malloc(24);if(this.pdfiumModule.FPDFPageObj_GetMatrix(r,n)){const e=this.pdfiumModule.pdfium.getValue(n,"float"),i=this.pdfiumModule.pdfium.getValue(n+4,"float"),u=this.pdfiumModule.pdfium.getValue(n+8,"float"),m=this.pdfiumModule.pdfium.getValue(n+12,"float"),d=this.pdfiumModule.pdfium.getValue(n+16,"float"),_=this.pdfiumModule.pdfium.getValue(n+20,"float");return this.memoryManager.free(n),{a:e,b:i,c:u,d:m,e:d,f:_}}return this.memoryManager.free(n),{a:1,b:0,c:0,d:1,e:0,f:0}}readStampAnnotationContents(r){const n=[],e=this.pdfiumModule.FPDFAnnot_GetObjectCount(r);for(let i=0;i<e;i++){const u=this.pdfiumModule.FPDFAnnot_GetObject(r,i),m=this.readPdfPageObject(u);m&&n.push(m)}return n}getStrokeWidth(r){const n=this.memoryManager.malloc(4),e=this.memoryManager.malloc(4),i=this.memoryManager.malloc(4),m=this.pdfiumModule.FPDFAnnot_GetBorder(r,n,e,i)?this.pdfiumModule.pdfium.getValue(i,"float"):1;return this.memoryManager.free(n),this.memoryManager.free(e),this.memoryManager.free(i),m}getAnnotationFlags(r){const n=this.pdfiumModule.FPDFAnnot_GetFlags(r);return Zr(n)}setAnnotationFlags(r,n){const e=eo(n);return this.pdfiumModule.FPDFAnnot_SetFlags(r,e)}readPdfCircleAnno(r,n,e){const i=this.getAnnotCustom(n),u=this.getAnnotationFlags(n),m=this.readPageAnnoRect(n),d=this.convertPageRectToDeviceRect(r,m),_=this.getAnnotString(n,"T"),g=this.getAnnotationDate(n,"M"),h=this.getAnnotationDate(n,"CreationDate"),b=this.getAnnotString(n,"Contents")||"",E=this.getAnnotationColor(n,ne.InteriorColor),M=this.getAnnotationColor(n),y=this.getAnnotationOpacity(n);let{style:G,width:O}=this.getBorderStyle(n),v;if(G===Me.DASHED){const{ok:I,pattern:j}=this.getBorderDashPattern(n);I&&(v=j)}return{pageIndex:r.index,custom:i,id:e,type:w.CIRCLE,flags:u,color:E??"transparent",opacity:y,contents:b,strokeWidth:O,strokeColor:M??"#FF0000",strokeStyle:G,rect:d,author:_,modified:g,created:h,...v!==void 0&&{strokeDashArray:v}}}readPdfSquareAnno(r,n,e){const i=this.getAnnotCustom(n),u=this.getAnnotationFlags(n),m=this.readPageAnnoRect(n),d=this.convertPageRectToDeviceRect(r,m),_=this.getAnnotString(n,"T"),g=this.getAnnotationDate(n,"M"),h=this.getAnnotationDate(n,"CreationDate"),b=this.getAnnotString(n,"Contents")||"",E=this.getAnnotationColor(n,ne.InteriorColor),M=this.getAnnotationColor(n),y=this.getAnnotationOpacity(n);let{style:G,width:O}=this.getBorderStyle(n),v;if(G===Me.DASHED){const{ok:I,pattern:j}=this.getBorderDashPattern(n);I&&(v=j)}return{pageIndex:r.index,custom:i,id:e,type:w.SQUARE,flags:u,color:E??"transparent",opacity:y,contents:b,strokeColor:M??"#FF0000",strokeWidth:O,strokeStyle:G,rect:d,author:_,modified:g,created:h,...v!==void 0&&{strokeDashArray:v}}}readPdfAnno(r,n,e,i){const u=this.getAnnotCustom(e),m=this.readPageAnnoRect(e),d=this.convertPageRectToDeviceRect(r,m),_=this.getAnnotString(e,"T"),g=this.getAnnotationDate(e,"M"),h=this.getAnnotationDate(e,"CreationDate"),b=this.getAnnotationFlags(e);return{pageIndex:r.index,custom:u,id:i,flags:b,type:n,rect:d,author:_,modified:g,created:h}}getInReplyToId(r){const n=this.pdfiumModule.FPDFAnnot_GetLinkedAnnot(r,"IRT");if(n)return this.getAnnotString(n,"NM")}setInReplyToId(r,n,e){const i=this.getAnnotationByName(r,e);return i?this.pdfiumModule.EPDFAnnot_SetLinkedAnnot(n,"IRT",i):!1}getAnnotString(r,n){const e=this.pdfiumModule.FPDFAnnot_GetStringValue(r,n,0,0);if(e===0)return;const i=(e+1)*2,u=this.memoryManager.malloc(i);this.pdfiumModule.FPDFAnnot_GetStringValue(r,n,u,i);const m=this.pdfiumModule.pdfium.UTF16ToString(u);return this.memoryManager.free(u),m||void 0}getAttachmentString(r,n){const e=this.pdfiumModule.FPDFAttachment_GetStringValue(r,n,0,0);if(e===0)return;const i=(e+1)*2,u=this.memoryManager.malloc(i);this.pdfiumModule.FPDFAttachment_GetStringValue(r,n,u,i);const m=this.pdfiumModule.pdfium.UTF16ToString(u);return this.memoryManager.free(u),m||void 0}getAttachmentNumber(r,n){const e=this.memoryManager.malloc(4);try{return this.pdfiumModule.EPDFAttachment_GetIntegerValue(r,n,e)?this.pdfiumModule.pdfium.getValue(e,"i32")>>>0:void 0}finally{this.memoryManager.free(e)}}getAnnotCustom(r){const n=this.getAnnotString(r,"EPDFCustom");if(n)try{return JSON.parse(n)}catch(e){console.warn("Failed to parse annotation custom data as JSON:",e),console.warn("Invalid JSON string:",n);return}}setAnnotCustom(r,n){if(n==null)return this.setAnnotString(r,"EPDFCustom","");try{const e=JSON.stringify(n);return this.setAnnotString(r,"EPDFCustom",e)}catch(e){return console.warn("Failed to stringify annotation custom data as JSON:",e),console.warn("Invalid data object:",n),!1}}getAnnotIntent(r){const n=this.pdfiumModule.EPDFAnnot_GetIntent(r,0,0);if(n===0)return;const i=(n+1)*2,u=this.memoryManager.malloc(i);this.pdfiumModule.EPDFAnnot_GetIntent(r,u,i);const m=this.pdfiumModule.pdfium.UTF16ToString(u);return this.memoryManager.free(u),m&&m!=="undefined"?m:void 0}setAnnotIntent(r,n){return this.pdfiumModule.EPDFAnnot_SetIntent(r,n)}getAnnotRichContent(r){const n=this.pdfiumModule.EPDFAnnot_GetRichContent(r,0,0);if(n===0)return;const i=(n+1)*2,u=this.memoryManager.malloc(i);this.pdfiumModule.EPDFAnnot_GetRichContent(r,u,i);const m=this.pdfiumModule.pdfium.UTF16ToString(u);return this.memoryManager.free(u),m||void 0}getAnnotationByName(r,n){return this.withWString(n,e=>this.pdfiumModule.EPDFPage_GetAnnotByName(r,e))}removeAnnotationByName(r,n){return this.withWString(n,e=>this.pdfiumModule.EPDFPage_RemoveAnnotByName(r,e))}setAnnotString(r,n,e){return this.withWString(e,i=>this.pdfiumModule.FPDFAnnot_SetStringValue(r,n,i))}setAttachmentString(r,n,e){return this.withWString(e,i=>this.pdfiumModule.FPDFAttachment_SetStringValue(r,n,i))}readPdfAnnoVertices(r,n){const e=[],i=this.pdfiumModule.FPDFAnnot_GetVertices(n,0,0),u=8,m=this.memoryManager.malloc(i*u);this.pdfiumModule.FPDFAnnot_GetVertices(n,m,i);for(let d=0;d<i;d++){const _=this.pdfiumModule.pdfium.getValue(m+d*u,"float"),g=this.pdfiumModule.pdfium.getValue(m+d*u+4,"float"),{x:h,y:b}=this.convertPagePointToDevicePoint(r,{x:_,y:g}),E=e[e.length-1];(!E||E.x!==h||E.y!==b)&&e.push({x:h,y:b})}return this.memoryManager.free(m),e}setPdfAnnoVertices(r,n,e){const i=this.pdfiumModule.pdfium,u=8,m=this.memoryManager.malloc(u*e.length);e.forEach((_,g)=>{const h=this.convertDevicePointToPagePoint(r,_);i.setValue(m+g*u+0,h.x,"float"),i.setValue(m+g*u+4,h.y,"float")});const d=this.pdfiumModule.EPDFAnnot_SetVertices(n,m,e.length);return this.memoryManager.free(m),d}readPdfBookmarkTarget(r,n,e){const i=n();if(i)return{type:"action",action:this.readPdfAction(r,i)};{const u=e();if(u)return{type:"destination",destination:this.readPdfDestination(r,u)}}}readPdfWidgetAnnoField(r,n){const e=this.pdfiumModule.FPDFAnnot_GetFormFieldFlags(r,n),i=this.pdfiumModule.FPDFAnnot_GetFormFieldType(r,n),u=ae(this.pdfiumModule.pdfium,(h,b)=>this.pdfiumModule.FPDFAnnot_GetFormFieldName(r,n,h,b),this.pdfiumModule.pdfium.UTF16ToString),m=ae(this.pdfiumModule.pdfium,(h,b)=>this.pdfiumModule.FPDFAnnot_GetFormFieldAlternateName(r,n,h,b),this.pdfiumModule.pdfium.UTF16ToString),d=ae(this.pdfiumModule.pdfium,(h,b)=>this.pdfiumModule.FPDFAnnot_GetFormFieldValue(r,n,h,b),this.pdfiumModule.pdfium.UTF16ToString),_=[];if(i===nt.COMBOBOX||i===nt.LISTBOX){const h=this.pdfiumModule.FPDFAnnot_GetOptionCount(r,n);for(let b=0;b<h;b++){const E=ae(this.pdfiumModule.pdfium,(y,G)=>this.pdfiumModule.FPDFAnnot_GetOptionLabel(r,n,b,y,G),this.pdfiumModule.pdfium.UTF16ToString),M=this.pdfiumModule.FPDFAnnot_IsOptionSelected(r,n,b);_.push({label:E,isSelected:M})}}let g=!1;return(i===nt.CHECKBOX||i===nt.RADIOBUTTON)&&(g=this.pdfiumModule.FPDFAnnot_IsChecked(r,n)),{flag:e,type:i,name:u,alternateName:m,value:d,isChecked:g,options:_}}renderPageAnnotation(r,n,e,i){const{scaleFactor:u=1,rotation:m=Qt.Degree0,dpr:d=1,mode:_=Ve.Normal,imageType:g="image/webp",imageQuality:h}=i??{};this.logger.debug(f,D,"renderPageAnnotation",r,n,e,i),this.logger.perf(f,D,"RenderPageAnnotation","Begin",`${r.id}-${n.index}-${e.id}`);const b=new tn,E=this.cache.getContext(r.id);if(!E)return this.logger.perf(f,D,"RenderPageAnnotation","End",`${r.id}-${n.index}-${e.id}`),S.reject({code:x.DocNotOpen,message:"document does not open"});const M=E.acquirePage(n.index),y=this.getAnnotationByName(M.pagePtr,e.id);if(!y)return this.logger.perf(f,D,"RenderPageAnnotation","End",`${r.id}-${n.index}-${e.id}`),M.release(),S.reject({code:x.NotFound,message:"annotation not found"});const G=Math.max(.01,u*d),O=Zt(e.rect),v=Zt(to(n.size,O,m,G)),I=Math.max(1,v.size.width),j=Math.max(1,v.size.height),Y=I*4,C=Y*j,H=this.memoryManager.malloc(C),Q=this.pdfiumModule.FPDFBitmap_CreateEx(I,j,4,H,Y);this.pdfiumModule.FPDFBitmap_FillRect(Q,0,0,I,j,0);const K=en(O,m,I,j),de=this.memoryManager.malloc(6*4);new Float32Array(this.pdfiumModule.pdfium.HEAPF32.buffer,de,6).set([K.a,K.b,K.c,K.d,K.e,K.f]);const X=16;let Fe=!1;try{Fe=!!this.pdfiumModule.EPDF_RenderAnnotBitmap(Q,M.pagePtr,y,_,de,X)}finally{this.memoryManager.free(de),this.pdfiumModule.FPDFBitmap_Destroy(Q),this.pdfiumModule.FPDFPage_CloseAnnot(y),M.release()}if(!Fe)return this.memoryManager.free(H),this.logger.perf(f,D,"RenderPageAnnotation","End",`${r.id}-${n.index}-${e.id}`),S.reject({code:x.Unknown,message:"EPDF_RenderAnnotBitmap failed"});const pe=()=>this.memoryManager.free(H);return this.imageDataConverter(()=>{const re=new Uint8ClampedArray(this.pdfiumModule.pdfium.HEAPU8.subarray(H,H+C));return{width:I,height:j,data:re}},g,h).then(re=>b.resolve(re)).catch(re=>{if(re instanceof ft)try{const se=this.encodeViaWasm({ptr:H,width:I,height:j,stride:Y},{type:g,quality:h});b.resolve(se)}catch(se){b.reject({code:x.Unknown,message:String(se)})}else b.reject({code:x.Unknown,message:String(re)})}).finally(pe),b}encodeViaWasm(r,n){const e=this.pdfiumModule.pdfium,i=(d,_,g)=>{const h=e.HEAPU8.subarray(d,d+_),b=new Uint8Array(h);return this.memoryManager.free(d),new Blob([b],{type:g})},u=6,m=this.memoryManager.malloc(4);try{switch(n.type){case"image/png":default:{const d=this.pdfiumModule.EPDF_PNG_EncodeRGBA(r.ptr,r.width,r.height,r.stride,u,m),_=e.getValue(m,"i32");return i(rt(_),d,"image/png")}}}finally{this.memoryManager.free(m)}}renderRectEncoded(r,n,e,i){const u=new tn,m=i?.imageType??"image/webp",d=i?.imageQuality,_=i?.rotation??Qt.Degree0,g=this.cache.getContext(r.id);if(!g)return S.reject({code:x.DocNotOpen,message:"document does not open"});const h=Math.max(.01,i?.scaleFactor??1),b=Math.max(1,i?.dpr??1),E=h*b,M=e.size.width,y=e.size.height,G=(_&1)===1,O=Math.max(1,Math.round((G?y:M)*E)),v=Math.max(1,Math.round((G?M:y)*E)),I=O*4,j=I*v,Y=g.acquirePage(n.index),C=this.memoryManager.malloc(j),H=this.pdfiumModule.FPDFBitmap_CreateEx(O,v,4,C,I);this.pdfiumModule.FPDFBitmap_FillRect(H,0,0,O,v,4294967295);const Q=en(e,_,O,v),K=this.memoryManager.malloc(6*4);new Float32Array(this.pdfiumModule.pdfium.HEAPF32.buffer,K,6).set([Q.a,Q.b,Q.c,Q.d,Q.e,Q.f]);const k=this.memoryManager.malloc(4*4);new Float32Array(this.pdfiumModule.pdfium.HEAPF32.buffer,k,4).set([0,0,O,v]);let Fe=16;(i?.withAnnotations??!1)&&(Fe|=1);try{this.pdfiumModule.FPDF_RenderPageBitmapWithMatrix(H,Y.pagePtr,K,k,Fe)}finally{Y.release(),this.memoryManager.free(K),this.memoryManager.free(k)}const pe=()=>{this.pdfiumModule.FPDFBitmap_Destroy(H),this.memoryManager.free(C)};return this.imageDataConverter(()=>{const re=this.pdfiumModule.pdfium.HEAPU8.buffer,se=new Uint8ClampedArray(re,C,j);return{width:O,height:v,data:se}},m,d).then(re=>u.resolve(re)).catch(re=>{if(this.logger.error(f,D,"Error",re),re instanceof ft){this.logger.info(f,D,"Fallback to WASM encoding");try{const se=this.encodeViaWasm({ptr:C,width:O,height:v,stride:I},{type:m,quality:d});u.resolve(se)}catch(se){u.reject({code:x.Unknown,message:String(se)})}}else u.reject({code:x.Unknown,message:String(re)})}).finally(pe),u}readPdfLinkAnnoTarget(r,n,e){const i=e();if(i)return{type:"destination",destination:this.readPdfDestination(r,i)};{const u=n();if(u)return{type:"action",action:this.readPdfAction(r,u)}}}createLocalDestPtr(r,n){const e=this.pdfiumModule.FPDF_LoadPage(r,n.pageIndex);if(!e)return 0;try{if(n.zoom.mode===ge.XYZ){const{x:m,y:d,zoom:_}=n.zoom.params;return this.pdfiumModule.EPDFDest_CreateXYZ(e,!0,m,!0,d,!0,_)}let i,u=[];switch(n.zoom.mode){case ge.FitPage:i=ge.FitPage;break;case ge.FitHorizontal:i=ge.FitHorizontal,u=[n.view?.[0]??0];break;case ge.FitVertical:i=ge.FitVertical,u=[n.view?.[0]??0];break;case ge.FitRectangle:{const m=n.view??[];u=[m[0]??0,m[1]??0,m[2]??0,m[3]??0],i=ge.FitRectangle}break;case ge.Unknown:default:return 0}return this.withFloatArray(u,(m,d)=>this.pdfiumModule.EPDFDest_CreateView(e,i,m,d))}finally{this.pdfiumModule.FPDF_ClosePage(e)}}applyBookmarkTarget(r,n,e){if(e.type==="destination"){const u=this.createLocalDestPtr(r,e.destination);return u?!!this.pdfiumModule.EPDFBookmark_SetDest(r,n,u):!1}const i=e.action;switch(i.type){case ie.Goto:{const u=this.createLocalDestPtr(r,i.destination);if(!u)return!1;const m=this.pdfiumModule.EPDFAction_CreateGoTo(r,u);return m?!!this.pdfiumModule.EPDFBookmark_SetAction(r,n,m):!1}case ie.URI:{const u=this.pdfiumModule.EPDFAction_CreateURI(r,i.uri);return u?!!this.pdfiumModule.EPDFBookmark_SetAction(r,n,u):!1}case ie.LaunchAppOrOpenFile:{const u=this.withWString(i.path,m=>this.pdfiumModule.EPDFAction_CreateLaunch(r,m));return u?!!this.pdfiumModule.EPDFBookmark_SetAction(r,n,u):!1}case ie.RemoteGoto:return!1;case ie.Unsupported:default:return!1}}readPdfAction(r,n){const e=this.pdfiumModule.FPDFAction_GetType(n);let i;switch(e){case ie.Unsupported:i={type:ie.Unsupported};break;case ie.Goto:{const u=this.pdfiumModule.FPDFAction_GetDest(r,n);if(u){const m=this.readPdfDestination(r,u);i={type:ie.Goto,destination:m}}else i={type:ie.Unsupported}}break;case ie.RemoteGoto:i={type:ie.Unsupported};break;case ie.URI:{const u=ae(this.pdfiumModule.pdfium,(m,d)=>this.pdfiumModule.FPDFAction_GetURIPath(r,n,m,d),this.pdfiumModule.pdfium.UTF8ToString);i={type:ie.URI,uri:u}}break;case ie.LaunchAppOrOpenFile:{const u=ae(this.pdfiumModule.pdfium,(m,d)=>this.pdfiumModule.FPDFAction_GetFilePath(n,m,d),this.pdfiumModule.pdfium.UTF8ToString);i={type:ie.LaunchAppOrOpenFile,path:u}}break}return i}readPdfDestination(r,n){const e=this.pdfiumModule.FPDFDest_GetDestPageIndex(r,n),i=4,u=this.memoryManager.malloc(i),m=this.memoryManager.malloc(i*4),d=this.pdfiumModule.FPDFDest_GetView(n,u,m),_=this.pdfiumModule.pdfium.getValue(u,"i32"),g=[];for(let h=0;h<_;h++){const b=m+h*4;g.push(this.pdfiumModule.pdfium.getValue(b,"float"))}if(this.memoryManager.free(u),this.memoryManager.free(m),d===ge.XYZ){const h=this.memoryManager.malloc(1),b=this.memoryManager.malloc(1),E=this.memoryManager.malloc(1),M=this.memoryManager.malloc(4),y=this.memoryManager.malloc(4),G=this.memoryManager.malloc(4);if(this.pdfiumModule.FPDFDest_GetLocationInPage(n,h,b,E,M,y,G)){const v=this.pdfiumModule.pdfium.getValue(h,"i8"),I=this.pdfiumModule.pdfium.getValue(b,"i8"),j=this.pdfiumModule.pdfium.getValue(E,"i8"),Y=v?this.pdfiumModule.pdfium.getValue(M,"float"):0,C=I?this.pdfiumModule.pdfium.getValue(y,"float"):0,H=j?this.pdfiumModule.pdfium.getValue(G,"float"):0;return this.memoryManager.free(h),this.memoryManager.free(b),this.memoryManager.free(E),this.memoryManager.free(M),this.memoryManager.free(y),this.memoryManager.free(G),{pageIndex:e,zoom:{mode:d,params:{x:Y,y:C,zoom:H}},view:g}}return this.memoryManager.free(h),this.memoryManager.free(b),this.memoryManager.free(E),this.memoryManager.free(M),this.memoryManager.free(y),this.memoryManager.free(G),{pageIndex:e,zoom:{mode:d,params:{x:0,y:0,zoom:0}},view:g}}return{pageIndex:e,zoom:{mode:d},view:g}}readPdfAttachment(r,n){const e=this.pdfiumModule.FPDFDoc_GetAttachment(r,n),i=ae(this.pdfiumModule.pdfium,(h,b)=>this.pdfiumModule.FPDFAttachment_GetName(e,h,b),this.pdfiumModule.pdfium.UTF16ToString),u=ae(this.pdfiumModule.pdfium,(h,b)=>this.pdfiumModule.EPDFAttachment_GetDescription(e,h,b),this.pdfiumModule.pdfium.UTF16ToString),m=ae(this.pdfiumModule.pdfium,(h,b)=>this.pdfiumModule.FPDFAttachment_GetSubtype(e,h,b),this.pdfiumModule.pdfium.UTF16ToString),d=this.getAttachmentDate(e,"CreationDate"),_=ae(this.pdfiumModule.pdfium,(h,b)=>this.pdfiumModule.FPDFAttachment_GetStringValue(e,"Checksum",h,b),this.pdfiumModule.pdfium.UTF16ToString),g=this.getAttachmentNumber(e,"Size");return{index:n,name:i,description:u,mimeType:m,size:g,creationDate:d,checksum:_}}convertDevicePointToPagePoint(r,n){const e=r.size.width,i=r.size.height,u=r.rotation&3;return u===0?{x:n.x,y:i-n.y}:u===1?{x:n.y,y:n.x}:u===2?{x:e-n.x,y:n.y}:{x:i-n.y,y:e-n.x}}convertPagePointToDevicePoint(r,n){const e=r.size.width,i=r.size.height,u=r.rotation&3;return u===0?{x:n.x,y:i-n.y}:u===1?{x:n.y,y:n.x}:u===2?{x:e-n.x,y:n.y}:{x:e-n.y,y:i-n.x}}convertPageRectToDeviceRect(r,n){const{x:e,y:i}=this.convertPagePointToDevicePoint(r,{x:n.left,y:n.top});return{origin:{x:e,y:i},size:{width:Math.abs(n.right-n.left),height:Math.abs(n.top-n.bottom)}}}readPageAnnoAppearanceStreams(r){return{normal:this.readPageAnnoAppearanceStream(r,Ve.Normal),rollover:this.readPageAnnoAppearanceStream(r,Ve.Rollover),down:this.readPageAnnoAppearanceStream(r,Ve.Down)}}readPageAnnoAppearanceStream(r,n=Ve.Normal){const i=(this.pdfiumModule.FPDFAnnot_GetAP(r,n,0,0)+1)*2,u=this.memoryManager.malloc(i);this.pdfiumModule.FPDFAnnot_GetAP(r,n,u,i);const m=this.pdfiumModule.pdfium.UTF16ToString(u);return this.memoryManager.free(u),m}setPageAnnoAppearanceStream(r,n=Ve.Normal,e){const i=2*(e.length+1),u=this.memoryManager.malloc(i);try{return this.pdfiumModule.pdfium.stringToUTF16(e,u,i),!!this.pdfiumModule.FPDFAnnot_SetAP(r,n,u)}finally{this.memoryManager.free(u)}}setPageAnnoRect(r,n,e){const i=Math.floor(e.origin.x),u=Math.floor(e.origin.y),m=Math.floor(e.origin.x+e.size.width),d=Math.floor(e.origin.y+e.size.height),_=this.convertDevicePointToPagePoint(r,{x:i,y:u}),g=this.convertDevicePointToPagePoint(r,{x:m,y:u}),h=this.convertDevicePointToPagePoint(r,{x:m,y:d}),b=this.convertDevicePointToPagePoint(r,{x:i,y:d});let E=Math.min(_.x,g.x,h.x,b.x),M=Math.max(_.x,g.x,h.x,b.x),y=Math.min(_.y,g.y,h.y,b.y),G=Math.max(_.y,g.y,h.y,b.y);E>M&&([E,M]=[M,E]),y>G&&([y,G]=[G,y]);const O=this.memoryManager.malloc(16),v=this.pdfiumModule.pdfium;v.setValue(O+0,E,"float"),v.setValue(O+4,G,"float"),v.setValue(O+8,M,"float"),v.setValue(O+12,y,"float");const I=this.pdfiumModule.FPDFAnnot_SetRect(n,O);return this.memoryManager.free(O),!!I}readPageAnnoRect(r){const n=this.memoryManager.malloc(16),e={left:0,top:0,right:0,bottom:0};return this.pdfiumModule.FPDFAnnot_GetRect(r,n)&&(e.left=this.pdfiumModule.pdfium.getValue(n,"float"),e.top=this.pdfiumModule.pdfium.getValue(n+4,"float"),e.right=this.pdfiumModule.pdfium.getValue(n+8,"float"),e.bottom=this.pdfiumModule.pdfium.getValue(n+12,"float")),this.memoryManager.free(n),e}getHighlightRects(r,n,e,i){const u=this.pdfiumModule.FPDFText_CountRects(n,e,i),m=[],d=this.memoryManager.malloc(8),_=this.memoryManager.malloc(8),g=this.memoryManager.malloc(8),h=this.memoryManager.malloc(8);for(let b=0;b<u;b++){if(!this.pdfiumModule.FPDFText_GetRect(n,b,d,_,g,h))continue;const M=this.pdfiumModule.pdfium.getValue(d,"double"),y=this.pdfiumModule.pdfium.getValue(_,"double"),G=this.pdfiumModule.pdfium.getValue(g,"double"),O=this.pdfiumModule.pdfium.getValue(h,"double"),v=this.convertPagePointToDevicePoint(r,{x:M,y}),I=this.convertPagePointToDevicePoint(r,{x:G,y}),j=this.convertPagePointToDevicePoint(r,{x:G,y:O}),Y=this.convertPagePointToDevicePoint(r,{x:M,y:O}),C=[v.x,I.x,j.x,Y.x],H=[v.y,I.y,j.y,Y.y],Q=Math.min(...C),K=Math.min(...H),de=Math.max(...C)-Q,k=Math.max(...H)-K;m.push({origin:{x:Q,y:K},size:{width:Math.ceil(de),height:Math.ceil(k)}})}return this.memoryManager.free(d),this.memoryManager.free(_),this.memoryManager.free(g),this.memoryManager.free(h),m}searchAllPages(r,n,e){this.logger.debug(f,D,"searchAllPages",r,n,e),this.logger.perf(f,D,"SearchAllPages","Begin",r.id);const i=this.cache.getContext(r.id);if(!i)return this.logger.perf(f,D,"SearchAllPages","End",r.id),S.resolve({results:[],total:0});const u=2*(n.length+1),m=this.memoryManager.malloc(u);this.pdfiumModule.pdfium.stringToUTF16(n,m,u);const d=e?.flags?.reduce((M,y)=>M|y,nn.None)??nn.None,_=S.create();let g=!1;_.wait(()=>{},M=>{M.type==="abort"&&(g=!0)});const h=100,b=[],E=M=>{if(g)return;const y=Math.min(M+h,r.pageCount);try{for(let G=M;G<y&&!g;G++){const O=this.searchAllInPage(i,r.pages[G],m,d);b.push(...O),_.progress({page:G,results:O})}}catch(G){g||(this.memoryManager.free(m),this.logger.perf(f,D,"SearchAllPages","End",r.id),_.reject({code:x.Unknown,message:`Error searching document: ${G}`}));return}if(!g){if(y>=r.pageCount){this.memoryManager.free(m),this.logger.perf(f,D,"SearchAllPages","End",r.id),_.resolve({results:b,total:b.length});return}setTimeout(()=>E(y),0)}};return setTimeout(()=>E(0),0),_.wait(()=>{},M=>{if(M.type==="abort")try{this.memoryManager.free(m)}catch{}}),_}buildContext(r,n,e,i=30){const u=/[\s\u00A0.,;:!?()\[\]{}<>/\\\-"'`"”\u2013\u2014]/,m=y=>{for(;y>0&&!u.test(r[y-1]);)y--;return y},d=y=>{for(;y<r.length&&!u.test(r[y]);)y++;return y};let _=n;for(;_>0&&u.test(r[_-1]);)_--;let g=0;for(;_>0&&g<i;)_--,u.test(r[_])||g++;_=m(_);let h=n+e;for(;h<r.length&&u.test(r[h]);)h++;for(g=0;h<r.length&&g<i;)u.test(r[h])||g++,h++;h=d(h);const b=r.slice(_,n).replace(/\s+/g," ").trimStart(),E=r.slice(n,n+e),M=r.slice(n+e,h).replace(/\s+/g," ").trimEnd();return{before:this.tidy(b),match:this.tidy(E),after:this.tidy(M),truncatedLeft:_>0,truncatedRight:h<r.length}}tidy(r){return r.replace(/-\uFFFE\s*/g,"").replace(/[\uFFFE\u00AD\u200B\u2060\uFEFF]/g,"").replace(/\s+/g," ")}searchAllInPage(r,n,e,i){return r.borrowPage(n.index,u=>{const m=u.getTextPage(),d=this.pdfiumModule.FPDFText_CountChars(m),_=this.memoryManager.malloc(2*(d+1));this.pdfiumModule.FPDFText_GetText(m,0,d,_);const g=this.pdfiumModule.pdfium.UTF16ToString(_);this.memoryManager.free(_);const h=[],b=this.pdfiumModule.FPDFText_FindStart(m,e,i,0);for(;this.pdfiumModule.FPDFText_FindNext(b);){const E=this.pdfiumModule.FPDFText_GetSchResultIndex(b),M=this.pdfiumModule.FPDFText_GetSchCount(b),y=this.getHighlightRects(n,m,E,M),G=this.buildContext(g,E,M);h.push({pageIndex:n.index,charIndex:E,charCount:M,rects:y,context:G})}return this.pdfiumModule.FPDFText_FindClose(b),h})}preparePrintDocument(r,n){const{includeAnnotations:e=!0,pageRange:i=null}=n??{};this.logger.debug(f,D,"preparePrintDocument",r,n),this.logger.perf(f,D,"PreparePrintDocument","Begin",r.id);const u=this.cache.getContext(r.id);if(!u)return this.logger.perf(f,D,"PreparePrintDocument","End",r.id),S.reject({code:x.DocNotOpen,message:"Document is not open"});const m=this.pdfiumModule.FPDF_CreateNewDocument();if(!m)return this.logger.perf(f,D,"PreparePrintDocument","End",r.id),S.reject({code:x.CantCreateNewDoc,message:"Cannot create print document"});try{const d=this.sanitizePageRange(i,r.pageCount);if(!this.pdfiumModule.FPDF_ImportPages(m,u.docPtr,d??"",0))return this.pdfiumModule.FPDF_CloseDocument(m),this.logger.error(f,D,"Failed to import pages for printing"),this.logger.perf(f,D,"PreparePrintDocument","End",r.id),S.reject({code:x.CantImportPages,message:"Failed to import pages for printing"});if(!e){const g=this.removeAnnotationsFromPrintDocument(m);if(!g.success)return this.pdfiumModule.FPDF_CloseDocument(m),this.logger.error(f,D,`Failed to remove annotations: ${g.error}`),this.logger.perf(f,D,"PreparePrintDocument","End",r.id),S.reject({code:x.Unknown,message:`Failed to prepare print document: ${g.error}`});this.logger.debug(f,D,`Removed ${g.annotationsRemoved} annotations from ${g.pagesProcessed} pages`)}const _=this.saveDocument(m);return this.pdfiumModule.FPDF_CloseDocument(m),this.logger.perf(f,D,"PreparePrintDocument","End",r.id),S.resolve(_)}catch(d){return m&&this.pdfiumModule.FPDF_CloseDocument(m),this.logger.error(f,D,"preparePrintDocument failed",d),this.logger.perf(f,D,"PreparePrintDocument","End",r.id),S.reject({code:x.Unknown,message:d instanceof Error?d.message:"Failed to prepare print document"})}}removeAnnotationsFromPrintDocument(r){let n=0,e=0;try{const i=this.pdfiumModule.FPDF_GetPageCount(r);for(let u=0;u<i;u++){const m=this.pdfiumModule.EPDFPage_GetAnnotCountRaw(r,u);if(m<=0){e++;continue}let d=0;for(let _=m-1;_>=0;_--)this.pdfiumModule.EPDFPage_RemoveAnnotRaw(r,u,_)?(d++,n++):this.logger.warn(f,D,`Failed to remove annotation ${_} from page ${u}`);if(d>0){const _=this.pdfiumModule.FPDF_LoadPage(r,u);_&&(this.pdfiumModule.FPDFPage_GenerateContent(_),this.pdfiumModule.FPDF_ClosePage(_))}e++}return{success:!0,annotationsRemoved:n,pagesProcessed:e}}catch(i){return{success:!1,annotationsRemoved:n,pagesProcessed:e,error:i instanceof Error?i.message:"Unknown error during annotation removal"}}}sanitizePageRange(r,n){if(!r||r.trim()==="")return null;try{const e=[],i=r.split(",");for(const g of i){const h=g.trim();if(h.includes("-")){const[b,E]=h.split("-").map(v=>v.trim()),M=parseInt(b,10),y=parseInt(E,10);if(isNaN(M)||isNaN(y)){this.logger.warn(f,D,`Invalid range: ${h}`);continue}const G=Math.max(1,Math.min(M,n)),O=Math.max(1,Math.min(y,n));for(let v=G;v<=O;v++)e.includes(v)||e.push(v)}else{const b=parseInt(h,10);if(isNaN(b)){this.logger.warn(f,D,`Invalid page number: ${h}`);continue}const E=Math.max(1,Math.min(b,n));e.includes(E)||e.push(E)}}if(e.length===0)return this.logger.warn(f,D,"No valid pages in range, using all pages"),null;e.sort((g,h)=>g-h);const u=[];let m=e[0],d=e[0];for(let g=1;g<e.length;g++)e[g]===d+1||(m===d?u.push(m.toString()):d-m===1?(u.push(m.toString()),u.push(d.toString())):u.push(`${m}-${d}`),m=e[g]),d=e[g];m===d?u.push(m.toString()):d-m===1?(u.push(m.toString()),u.push(d.toString())):u.push(`${m}-${d}`);const _=u.join(",");return this.logger.debug(f,D,`Sanitized page range: "${r}" -> "${_}"`),_}catch(e){return this.logger.error(f,D,`Error sanitizing page range: ${e}`),null}}}var Po=(()=>{var $=import.meta.url;return async function(r={}){var n,e=r,i,u,m=new Promise((t,o)=>{i=t,u=o});["_EPDF_GetMetaKeyCount","_EPDF_GetMetaKeyName","_EPDF_GetMetaTrapped","_EPDF_GetPageRotationByIndex","_EPDF_HasMetaText","_EPDF_PNG_EncodeRGBA","_EPDF_RenderAnnotBitmap","_EPDF_SetMetaText","_EPDF_SetMetaTrapped","_EPDFAction_CreateGoTo","_EPDFAction_CreateGoToNamed","_EPDFAction_CreateLaunch","_EPDFAction_CreateRemoteGoToByName","_EPDFAction_CreateRemoteGoToDest","_EPDFAction_CreateURI","_EPDFAnnot_ClearColor","_EPDFAnnot_GenerateAppearance","_EPDFAnnot_GenerateAppearanceWithBlend","_EPDFAnnot_GetBlendMode","_EPDFAnnot_GetBorderDashPattern","_EPDFAnnot_GetBorderDashPatternCount","_EPDFAnnot_GetBorderEffect","_EPDFAnnot_GetBorderStyle","_EPDFAnnot_GetColor","_EPDFAnnot_GetDefaultAppearance","_EPDFAnnot_GetIcon","_EPDFAnnot_GetIntent","_EPDFAnnot_GetLineEndings","_EPDFAnnot_GetOpacity","_EPDFAnnot_GetRectangleDifferences","_EPDFAnnot_GetRichContent","_EPDFAnnot_GetTextAlignment","_EPDFAnnot_GetVerticalAlignment","_EPDFAnnot_SetBorderDashPattern","_EPDFAnnot_SetBorderStyle","_EPDFAnnot_SetColor","_EPDFAnnot_SetDefaultAppearance","_EPDFAnnot_SetIcon","_EPDFAnnot_SetIntent","_EPDFAnnot_SetLine","_EPDFAnnot_SetLineEndings","_EPDFAnnot_SetLinkedAnnot","_EPDFAnnot_SetOpacity","_EPDFAnnot_SetTextAlignment","_EPDFAnnot_SetVerticalAlignment","_EPDFAnnot_SetVertices","_EPDFAnnot_UpdateAppearanceToRect","_EPDFAttachment_GetDescription","_EPDFAttachment_GetIntegerValue","_EPDFAttachment_SetDescription","_EPDFAttachment_SetSubtype","_EPDFBookmark_AppendChild","_EPDFBookmark_Clear","_EPDFBookmark_ClearTarget","_EPDFBookmark_Create","_EPDFBookmark_Delete","_EPDFBookmark_InsertAfter","_EPDFBookmark_SetAction","_EPDFBookmark_SetDest","_EPDFBookmark_SetTitle","_EPDFCatalog_GetLanguage","_EPDFDest_CreateRemoteView","_EPDFDest_CreateRemoteXYZ","_EPDFDest_CreateView","_EPDFDest_CreateXYZ","_EPDFNamedDest_Remove","_EPDFNamedDest_SetDest","_EPDFPage_CreateAnnot","_EPDFPage_GetAnnotByName","_EPDFPage_GetAnnotCountRaw","_EPDFPage_GetAnnotRaw","_EPDFPage_RemoveAnnotByName","_EPDFPage_RemoveAnnotRaw","_EPDFText_RedactInQuads","_EPDFText_RedactInRect","_FORM_CanRedo","_FORM_CanUndo","_FORM_DoDocumentAAction","_FORM_DoDocumentJSAction","_FORM_DoDocumentOpenAction","_FORM_DoPageAAction","_FORM_ForceToKillFocus","_FORM_GetFocusedAnnot","_FORM_GetFocusedText","_FORM_GetSelectedText","_FORM_IsIndexSelected","_FORM_OnAfterLoadPage","_FORM_OnBeforeClosePage","_FORM_OnChar","_FORM_OnFocus","_FORM_OnKeyDown","_FORM_OnKeyUp","_FORM_OnLButtonDoubleClick","_FORM_OnLButtonDown","_FORM_OnLButtonUp","_FORM_OnMouseMove","_FORM_OnMouseWheel","_FORM_OnRButtonDown","_FORM_OnRButtonUp","_FORM_Redo","_FORM_ReplaceAndKeepSelection","_FORM_ReplaceSelection","_FORM_SelectAllText","_FORM_SetFocusedAnnot","_FORM_SetIndexSelected","_FORM_Undo","_FPDF_AddInstalledFont","_FPDF_CloseDocument","_FPDF_ClosePage","_FPDF_CloseXObject","_FPDF_CopyViewerPreferences","_FPDF_CountNamedDests","_FPDF_CreateClipPath","_FPDF_CreateNewDocument","_FPDF_DestroyClipPath","_FPDF_DestroyLibrary","_FPDF_DeviceToPage","_FPDF_DocumentHasValidCrossReferenceTable","_FPDF_FFLDraw","_FPDF_FreeDefaultSystemFontInfo","_FPDF_GetDefaultSystemFontInfo","_FPDF_GetDefaultTTFMap","_FPDF_GetDefaultTTFMapCount","_FPDF_GetDefaultTTFMapEntry","_FPDF_GetDocPermissions","_FPDF_GetDocUserPermissions","_FPDF_GetFileIdentifier","_FPDF_GetFileVersion","_FPDF_GetFormType","_FPDF_GetLastError","_FPDF_GetMetaText","_FPDF_GetNamedDest","_FPDF_GetNamedDestByName","_FPDF_GetPageAAction","_FPDF_GetPageBoundingBox","_FPDF_GetPageCount","_FPDF_GetPageHeight","_FPDF_GetPageHeightF","_FPDF_GetPageLabel","_FPDF_GetPageSizeByIndex","_FPDF_GetPageSizeByIndexF","_FPDF_GetPageWidth","_FPDF_GetPageWidthF","_FPDF_GetSecurityHandlerRevision","_FPDF_GetSignatureCount","_FPDF_GetSignatureObject","_FPDF_GetTrailerEnds","_FPDF_GetXFAPacketContent","_FPDF_GetXFAPacketCount","_FPDF_GetXFAPacketName","_FPDF_ImportNPagesToOne","_FPDF_ImportPages","_FPDF_ImportPagesByIndex","_FPDF_InitLibrary","_FPDF_InitLibraryWithConfig","_FPDF_LoadCustomDocument","_FPDF_LoadDocument","_FPDF_LoadMemDocument","_FPDF_LoadMemDocument64","_FPDF_LoadPage","_FPDF_LoadXFA","_FPDF_MovePages","_FPDF_NewFormObjectFromXObject","_FPDF_NewXObjectFromPage","_FPDF_PageToDevice","_FPDF_RemoveFormFieldHighlight","_FPDF_RenderPage_Close","_FPDF_RenderPage_Continue","_FPDF_RenderPageBitmap","_FPDF_RenderPageBitmap_Start","_FPDF_RenderPageBitmapWithColorScheme_Start","_FPDF_RenderPageBitmapWithMatrix","_FPDF_SaveAsCopy","_FPDF_SaveWithVersion","_FPDF_SetFormFieldHighlightAlpha","_FPDF_SetFormFieldHighlightColor","_FPDF_SetSandBoxPolicy","_FPDF_SetSystemFontInfo","_FPDF_StructElement_Attr_CountChildren","_FPDF_StructElement_Attr_GetBlobValue","_FPDF_StructElement_Attr_GetBooleanValue","_FPDF_StructElement_Attr_GetChildAtIndex","_FPDF_StructElement_Attr_GetCount","_FPDF_StructElement_Attr_GetName","_FPDF_StructElement_Attr_GetNumberValue","_FPDF_StructElement_Attr_GetStringValue","_FPDF_StructElement_Attr_GetType","_FPDF_StructElement_Attr_GetValue","_FPDF_StructElement_CountChildren","_FPDF_StructElement_GetActualText","_FPDF_StructElement_GetAltText","_FPDF_StructElement_GetAttributeAtIndex","_FPDF_StructElement_GetAttributeCount","_FPDF_StructElement_GetChildAtIndex","_FPDF_StructElement_GetChildMarkedContentID","_FPDF_StructElement_GetID","_FPDF_StructElement_GetLang","_FPDF_StructElement_GetMarkedContentID","_FPDF_StructElement_GetMarkedContentIdAtIndex","_FPDF_StructElement_GetMarkedContentIdCount","_FPDF_StructElement_GetObjType","_FPDF_StructElement_GetParent","_FPDF_StructElement_GetStringAttribute","_FPDF_StructElement_GetTitle","_FPDF_StructElement_GetType","_FPDF_StructTree_Close","_FPDF_StructTree_CountChildren","_FPDF_StructTree_GetChildAtIndex","_FPDF_StructTree_GetForPage","_FPDF_VIEWERREF_GetDuplex","_FPDF_VIEWERREF_GetName","_FPDF_VIEWERREF_GetNumCopies","_FPDF_VIEWERREF_GetPrintPageRange","_FPDF_VIEWERREF_GetPrintPageRangeCount","_FPDF_VIEWERREF_GetPrintPageRangeElement","_FPDF_VIEWERREF_GetPrintScaling","_FPDFAction_GetDest","_FPDFAction_GetFilePath","_FPDFAction_GetType","_FPDFAction_GetURIPath","_FPDFAnnot_AddFileAttachment","_FPDFAnnot_AddInkStroke","_FPDFAnnot_AppendAttachmentPoints","_FPDFAnnot_AppendObject","_FPDFAnnot_CountAttachmentPoints","_FPDFAnnot_GetAP","_FPDFAnnot_GetAttachmentPoints","_FPDFAnnot_GetBorder","_FPDFAnnot_GetColor","_FPDFAnnot_GetFileAttachment","_FPDFAnnot_GetFlags","_FPDFAnnot_GetFocusableSubtypes","_FPDFAnnot_GetFocusableSubtypesCount","_FPDFAnnot_GetFontColor","_FPDFAnnot_GetFontSize","_FPDFAnnot_GetFormAdditionalActionJavaScript","_FPDFAnnot_GetFormControlCount","_FPDFAnnot_GetFormControlIndex","_FPDFAnnot_GetFormFieldAlternateName","_FPDFAnnot_GetFormFieldAtPoint","_FPDFAnnot_GetFormFieldExportValue","_FPDFAnnot_GetFormFieldFlags","_FPDFAnnot_GetFormFieldName","_FPDFAnnot_GetFormFieldType","_FPDFAnnot_GetFormFieldValue","_FPDFAnnot_GetInkListCount","_FPDFAnnot_GetInkListPath","_FPDFAnnot_GetLine","_FPDFAnnot_GetLink","_FPDFAnnot_GetLinkedAnnot","_FPDFAnnot_GetNumberValue","_FPDFAnnot_GetObject","_FPDFAnnot_GetObjectCount","_FPDFAnnot_GetOptionCount","_FPDFAnnot_GetOptionLabel","_FPDFAnnot_GetRect","_FPDFAnnot_GetStringValue","_FPDFAnnot_GetSubtype","_FPDFAnnot_GetValueType","_FPDFAnnot_GetVertices","_FPDFAnnot_HasAttachmentPoints","_FPDFAnnot_HasKey","_FPDFAnnot_IsChecked","_FPDFAnnot_IsObjectSupportedSubtype","_FPDFAnnot_IsOptionSelected","_FPDFAnnot_IsSupportedSubtype","_FPDFAnnot_RemoveInkList","_FPDFAnnot_RemoveObject","_FPDFAnnot_SetAP","_FPDFAnnot_SetAttachmentPoints","_FPDFAnnot_SetBorder","_FPDFAnnot_SetColor","_FPDFAnnot_SetFlags","_FPDFAnnot_SetFocusableSubtypes","_FPDFAnnot_SetFontColor","_FPDFAnnot_SetFormFieldFlags","_FPDFAnnot_SetRect","_FPDFAnnot_SetStringValue","_FPDFAnnot_SetURI","_FPDFAnnot_UpdateObject","_FPDFAttachment_GetFile","_FPDFAttachment_GetName","_FPDFAttachment_GetStringValue","_FPDFAttachment_GetSubtype","_FPDFAttachment_GetValueType","_FPDFAttachment_HasKey","_FPDFAttachment_SetFile","_FPDFAttachment_SetStringValue","_FPDFAvail_Create","_FPDFAvail_Destroy","_FPDFAvail_GetDocument","_FPDFAvail_GetFirstPageNum","_FPDFAvail_IsDocAvail","_FPDFAvail_IsFormAvail","_FPDFAvail_IsLinearized","_FPDFAvail_IsPageAvail","_FPDFBitmap_Create","_FPDFBitmap_CreateEx","_FPDFBitmap_Destroy","_FPDFBitmap_FillRect","_FPDFBitmap_GetBuffer","_FPDFBitmap_GetFormat","_FPDFBitmap_GetHeight","_FPDFBitmap_GetStride","_FPDFBitmap_GetWidth","_FPDFBookmark_Find","_FPDFBookmark_GetAction","_FPDFBookmark_GetCount","_FPDFBookmark_GetDest","_FPDFBookmark_GetFirstChild","_FPDFBookmark_GetNextSibling","_FPDFBookmark_GetTitle","_FPDFCatalog_IsTagged","_FPDFCatalog_SetLanguage","_FPDFClipPath_CountPaths","_FPDFClipPath_CountPathSegments","_FPDFClipPath_GetPathSegment","_FPDFDest_GetDestPageIndex","_FPDFDest_GetLocationInPage","_FPDFDest_GetView","_FPDFDoc_AddAttachment","_FPDFDoc_CloseJavaScriptAction","_FPDFDoc_DeleteAttachment","_FPDFDOC_ExitFormFillEnvironment","_FPDFDoc_GetAttachment","_FPDFDoc_GetAttachmentCount","_FPDFDoc_GetJavaScriptAction","_FPDFDoc_GetJavaScriptActionCount","_FPDFDoc_GetPageMode","_FPDFDOC_InitFormFillEnvironment","_FPDFFont_Close","_FPDFFont_GetAscent","_FPDFFont_GetBaseFontName","_FPDFFont_GetDescent","_FPDFFont_GetFamilyName","_FPDFFont_GetFlags","_FPDFFont_GetFontData","_FPDFFont_GetGlyphPath","_FPDFFont_GetGlyphWidth","_FPDFFont_GetIsEmbedded","_FPDFFont_GetItalicAngle","_FPDFFont_GetWeight","_FPDFFormObj_CountObjects","_FPDFFormObj_GetObject","_FPDFFormObj_RemoveObject","_FPDFGlyphPath_CountGlyphSegments","_FPDFGlyphPath_GetGlyphPathSegment","_FPDFImageObj_GetBitmap","_FPDFImageObj_GetIccProfileDataDecoded","_FPDFImageObj_GetImageDataDecoded","_FPDFImageObj_GetImageDataRaw","_FPDFImageObj_GetImageFilter","_FPDFImageObj_GetImageFilterCount","_FPDFImageObj_GetImageMetadata","_FPDFImageObj_GetImagePixelSize","_FPDFImageObj_GetRenderedBitmap","_FPDFImageObj_LoadJpegFile","_FPDFImageObj_LoadJpegFileInline","_FPDFImageObj_SetBitmap","_FPDFImageObj_SetMatrix","_FPDFJavaScriptAction_GetName","_FPDFJavaScriptAction_GetScript","_FPDFLink_CloseWebLinks","_FPDFLink_CountQuadPoints","_FPDFLink_CountRects","_FPDFLink_CountWebLinks","_FPDFLink_Enumerate","_FPDFLink_GetAction","_FPDFLink_GetAnnot","_FPDFLink_GetAnnotRect","_FPDFLink_GetDest","_FPDFLink_GetLinkAtPoint","_FPDFLink_GetLinkZOrderAtPoint","_FPDFLink_GetQuadPoints","_FPDFLink_GetRect","_FPDFLink_GetTextRange","_FPDFLink_GetURL","_FPDFLink_LoadWebLinks","_FPDFPage_CloseAnnot","_FPDFPage_CountObjects","_FPDFPage_CreateAnnot","_FPDFPage_Delete","_FPDFPage_Flatten","_FPDFPage_FormFieldZOrderAtPoint","_FPDFPage_GenerateContent","_FPDFPage_GetAnnot","_FPDFPage_GetAnnotCount","_FPDFPage_GetAnnotIndex","_FPDFPage_GetArtBox","_FPDFPage_GetBleedBox","_FPDFPage_GetCropBox","_FPDFPage_GetDecodedThumbnailData","_FPDFPage_GetMediaBox","_FPDFPage_GetObject","_FPDFPage_GetRawThumbnailData","_FPDFPage_GetRotation","_FPDFPage_GetThumbnailAsBitmap","_FPDFPage_GetTrimBox","_FPDFPage_HasFormFieldAtPoint","_FPDFPage_HasTransparency","_FPDFPage_InsertClipPath","_FPDFPage_InsertObject","_FPDFPage_InsertObjectAtIndex","_FPDFPage_New","_FPDFPage_RemoveAnnot","_FPDFPage_RemoveObject","_FPDFPage_SetArtBox","_FPDFPage_SetBleedBox","_FPDFPage_SetCropBox","_FPDFPage_SetMediaBox","_FPDFPage_SetRotation","_FPDFPage_SetTrimBox","_FPDFPage_TransformAnnots","_FPDFPage_TransFormWithClip","_FPDFPageObj_AddMark","_FPDFPageObj_CountMarks","_FPDFPageObj_CreateNewPath","_FPDFPageObj_CreateNewRect","_FPDFPageObj_CreateTextObj","_FPDFPageObj_Destroy","_FPDFPageObj_GetBounds","_FPDFPageObj_GetClipPath","_FPDFPageObj_GetDashArray","_FPDFPageObj_GetDashCount","_FPDFPageObj_GetDashPhase","_FPDFPageObj_GetFillColor","_FPDFPageObj_GetIsActive","_FPDFPageObj_GetLineCap","_FPDFPageObj_GetLineJoin","_FPDFPageObj_GetMark","_FPDFPageObj_GetMarkedContentID","_FPDFPageObj_GetMatrix","_FPDFPageObj_GetRotatedBounds","_FPDFPageObj_GetStrokeColor","_FPDFPageObj_GetStrokeWidth","_FPDFPageObj_GetType","_FPDFPageObj_HasTransparency","_FPDFPageObj_NewImageObj","_FPDFPageObj_NewTextObj","_FPDFPageObj_RemoveMark","_FPDFPageObj_SetBlendMode","_FPDFPageObj_SetDashArray","_FPDFPageObj_SetDashPhase","_FPDFPageObj_SetFillColor","_FPDFPageObj_SetIsActive","_FPDFPageObj_SetLineCap","_FPDFPageObj_SetLineJoin","_FPDFPageObj_SetMatrix","_FPDFPageObj_SetStrokeColor","_FPDFPageObj_SetStrokeWidth","_FPDFPageObj_Transform","_FPDFPageObj_TransformClipPath","_FPDFPageObj_TransformF","_FPDFPageObjMark_CountParams","_FPDFPageObjMark_GetName","_FPDFPageObjMark_GetParamBlobValue","_FPDFPageObjMark_GetParamIntValue","_FPDFPageObjMark_GetParamKey","_FPDFPageObjMark_GetParamStringValue","_FPDFPageObjMark_GetParamValueType","_FPDFPageObjMark_RemoveParam","_FPDFPageObjMark_SetBlobParam","_FPDFPageObjMark_SetIntParam","_FPDFPageObjMark_SetStringParam","_FPDFPath_BezierTo","_FPDFPath_Close","_FPDFPath_CountSegments","_FPDFPath_GetDrawMode","_FPDFPath_GetPathSegment","_FPDFPath_LineTo","_FPDFPath_MoveTo","_FPDFPath_SetDrawMode","_FPDFPathSegment_GetClose","_FPDFPathSegment_GetPoint","_FPDFPathSegment_GetType","_FPDFSignatureObj_GetByteRange","_FPDFSignatureObj_GetContents","_FPDFSignatureObj_GetDocMDPPermission","_FPDFSignatureObj_GetReason","_FPDFSignatureObj_GetSubFilter","_FPDFSignatureObj_GetTime","_FPDFText_ClosePage","_FPDFText_CountChars","_FPDFText_CountRects","_FPDFText_FindClose","_FPDFText_FindNext","_FPDFText_FindPrev","_FPDFText_FindStart","_FPDFText_GetBoundedText","_FPDFText_GetCharAngle","_FPDFText_GetCharBox","_FPDFText_GetCharIndexAtPos","_FPDFText_GetCharIndexFromTextIndex","_FPDFText_GetCharOrigin","_FPDFText_GetFillColor","_FPDFText_GetFontInfo","_FPDFText_GetFontSize","_FPDFText_GetFontWeight","_FPDFText_GetLooseCharBox","_FPDFText_GetMatrix","_FPDFText_GetRect","_FPDFText_GetSchCount","_FPDFText_GetSchResultIndex","_FPDFText_GetStrokeColor","_FPDFText_GetText","_FPDFText_GetTextIndexFromCharIndex","_FPDFText_GetTextObject","_FPDFText_GetUnicode","_FPDFText_HasUnicodeMapError","_FPDFText_IsGenerated","_FPDFText_IsHyphen","_FPDFText_LoadCidType2Font","_FPDFText_LoadFont","_FPDFText_LoadPage","_FPDFText_LoadStandardFont","_FPDFText_SetCharcodes","_FPDFText_SetText","_FPDFTextObj_GetFont","_FPDFTextObj_GetFontSize","_FPDFTextObj_GetRenderedBitmap","_FPDFTextObj_GetText","_FPDFTextObj_GetTextRenderMode","_FPDFTextObj_SetTextRenderMode","_PDFiumExt_CloseFileWriter","_PDFiumExt_CloseFormFillInfo","_PDFiumExt_ExitFormFillEnvironment","_PDFiumExt_GetFileWriterData","_PDFiumExt_GetFileWriterSize","_PDFiumExt_Init","_PDFiumExt_InitFormFillEnvironment","_PDFiumExt_OpenFileWriter","_PDFiumExt_OpenFormFillInfo","_PDFiumExt_SaveAsCopy","_malloc","_free","_memory","___indirect_function_table","onRuntimeInitialized"].forEach(t=>{Object.getOwnPropertyDescriptor(m,t)||Object.defineProperty(m,t,{get:()=>Z("You are getting "+t+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js"),set:()=>Z("You are setting "+t+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")})});var d=typeof window=="object",_=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var g=!d&&!0&&!_,h=Object.assign({},e),b="./this.program",E="";function M(t){return e.locateFile?e.locateFile(t,E):E+t}var y,G;if(g){if(typeof window=="object"||typeof importScripts=="function")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");G=t=>{if(typeof readbuffer=="function")return new Uint8Array(readbuffer(t));let o=read(t,"binary");return C(typeof o=="object"),o},y=t=>new Promise((o,s)=>{setTimeout(()=>o(G(t)))}),globalThis.clearTimeout??=t=>{},globalThis.setTimeout??=t=>typeof t=="function"?t():Z(),typeof print<"u"&&(globalThis.console??={},console.log=print,console.warn=console.error=globalThis.printErr??print)}else if(d||_){if(_?E=self.location.href:typeof document<"u"&&document.currentScript&&(E=document.currentScript.src),$&&(E=$),E.startsWith("blob:")?E="":E=E.substr(0,E.replace(/[?#].*/,"").lastIndexOf("/")+1),!(typeof window=="object"||typeof importScripts=="function"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");_&&(G=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),y=t=>(C(!Et(t),"readAsync does not work with file:// URLs"),fetch(t,{credentials:"same-origin"}).then(o=>o.ok?o.arrayBuffer():Promise.reject(new Error(o.status+" : "+o.url))))}else throw new Error("environment detection error");var O=e.print||console.log.bind(console),v=e.printErr||console.error.bind(console);Object.assign(e,h),h=null,Cr(),e.arguments&&e.arguments,ve("arguments","arguments_"),e.thisProgram&&(b=e.thisProgram),ve("thisProgram","thisProgram"),C(typeof e.memoryInitializerPrefixURL>"u","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),C(typeof e.pthreadMainPrefixURL>"u","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),C(typeof e.cdInitializerPrefixURL>"u","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),C(typeof e.filePackagePrefixURL>"u","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),C(typeof e.read>"u","Module.read option was removed"),C(typeof e.readAsync>"u","Module.readAsync option was removed (modify readAsync in JS)"),C(typeof e.readBinary>"u","Module.readBinary option was removed (modify readBinary in JS)"),C(typeof e.setWindowTitle>"u","Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),C(typeof e.TOTAL_MEMORY>"u","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),ve("asm","wasmExports"),ve("readAsync","readAsync"),ve("readBinary","readBinary"),ve("setWindowTitle","setWindowTitle");var I=e.wasmBinary;ve("wasmBinary","wasmBinary"),typeof WebAssembly!="object"&&v("no native wasm support detected");var j,Y=!1;function C(t,o){t||Z("Assertion failed"+(o?": "+o:""))}var H,Q,K,de,k,X,Fe,pe;function re(){var t=j.buffer;e.HEAP8=H=new Int8Array(t),e.HEAP16=K=new Int16Array(t),e.HEAPU8=Q=new Uint8Array(t),e.HEAPU16=de=new Uint16Array(t),e.HEAP32=k=new Int32Array(t),e.HEAPU32=X=new Uint32Array(t),e.HEAPF32=Fe=new Float32Array(t),e.HEAPF64=pe=new Float64Array(t)}C(!e.STACK_SIZE,"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),C(typeof Int32Array<"u"&&typeof Float64Array<"u"&&Int32Array.prototype.subarray!=null&&Int32Array.prototype.set!=null,"JS engine does not provide full typed array support"),C(!e.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),C(!e.INITIAL_MEMORY,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");function se(){var t=dt();C((t&3)==0),t==0&&(t+=4),X[t>>2]=34821223,X[t+4>>2]=2310721022,X[0]=1668509029}function Se(){if(!Y){var t=dt();t==0&&(t+=4);var o=X[t>>2],s=X[t+4>>2];(o!=34821223||s!=2310721022)&&Z(`Stack overflow! Stack cookie has been overwritten at ${He(t)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${He(s)} ${He(o)}`),X[0]!=1668509029&&Z("Runtime error: The application has corrupted its heap memory area (address zero)!")}}var Ue=[],Dt=[],bt=[],Je=!1;function on(){var t=e.preRun;t&&(typeof t=="function"&&(t=[t]),t.forEach(un)),it(Ue)}function an(){C(!Je),Je=!0,Se(),!e.noFSInit&&!l.initialized&&l.init(),l.ignorePermissions=!1,it(Dt)}function sn(){Se();var t=e.postRun;t&&(typeof t=="function"&&(t=[t]),t.forEach(Fn)),it(bt)}function un(t){Ue.unshift(t)}function mn(t){Dt.unshift(t)}function Fn(t){bt.unshift(t)}C(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),C(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),C(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),C(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var Ge=0,Ce=null,We=null,Re={};function pt(t){for(var o=t;;){if(!Re[t])return t;t=o+Math.random()}}function ot(t){Ge++,e.monitorRunDependencies?.(Ge),t?(C(!Re[t]),Re[t]=1,Ce===null&&typeof setInterval<"u"&&(Ce=setInterval(()=>{if(Y){clearInterval(Ce),Ce=null;return}var o=!1;for(var s in Re)o||(o=!0,v("still waiting on run dependencies:")),v(`dependency: ${s}`);o&&v("(end of list)")},1e4))):v("warning: run dependency added without ID")}function qe(t){if(Ge--,e.monitorRunDependencies?.(Ge),t?(C(Re[t]),delete Re[t]):v("warning: run dependency removed without ID"),Ge==0&&(Ce!==null&&(clearInterval(Ce),Ce=null),We)){var o=We;We=null,o()}}function Z(t){e.onAbort?.(t),t="Aborted("+t+")",v(t),Y=!0;var o=new WebAssembly.RuntimeError(t);throw u(o),o}var ln="data:application/octet-stream;base64,",At=t=>t.startsWith(ln),Et=t=>t.startsWith("file://");function a(t,o){return(...s)=>{C(Je,`native function \`${t}\` called before runtime initialization`);var F=ue[t];return C(F,`exported native function \`${t}\` not found`),C(s.length<=o,`native function \`${t}\` called with ${s.length} args but expects ${o}`),F(...s)}}function dn(){if(e.locateFile){var t="pdfium.wasm";return At(t)?t:M(t)}return g?"pdfium.wasm":new URL(""+new URL("../assets/pdfium.B8f0vBaD.wasm",import.meta.url).href,import.meta.url).href}var ze;function yt(t){if(t==ze&&I)return new Uint8Array(I);if(G)return G(t);throw"both async and sync fetching of the wasm failed"}function cn(t){return I?Promise.resolve().then(()=>yt(t)):y(t).then(o=>new Uint8Array(o),()=>yt(t))}function Mt(t,o,s){return cn(t).then(F=>WebAssembly.instantiate(F,o)).then(s,F=>{v(`failed to asynchronously prepare wasm: ${F}`),Et(ze)&&v(`warning: Loading from a file URI (${ze}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),Z(F)})}function _n(t,o,s,F){return!t&&typeof WebAssembly.instantiateStreaming=="function"&&!At(o)&&typeof fetch=="function"?fetch(o,{credentials:"same-origin"}).then(c=>{var P=WebAssembly.instantiateStreaming(c,s);return P.then(F,function(p){return v(`wasm streaming compile failed: ${p}`),v("falling back to ArrayBuffer instantiation"),Mt(o,s,F)})}):Mt(o,s,F)}function Pn(){return{env:Nt,wasi_snapshot_preview1:Nt}}function gn(){var t=Pn();function o(c,P){return ue=c.exports,e.wasmExports=ue,j=ue.memory,C(j,"memory not found in wasm exports"),re(),Ee=ue.__indirect_function_table,C(Ee,"table not found in wasm exports"),mn(ue.__wasm_call_ctors),qe("wasm-instantiate"),ue}ot("wasm-instantiate");var s=e;function F(c){C(e===s,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),s=null,o(c.instance)}if(e.instantiateWasm)try{return e.instantiateWasm(t,o)}catch(c){v(`Module.instantiateWasm callback failed with error: ${c}`),u(c)}return ze??=dn(),_n(I,ze,t,F).catch(u),{}}var N,ee;if((()=>{var t=new Int16Array(1),o=new Int8Array(t.buffer);if(t[0]=25459,o[0]!==115||o[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"})(),e.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");function ve(t,o,s=!0){Object.getOwnPropertyDescriptor(e,t)||Object.defineProperty(e,t,{configurable:!0,get(){let F=s?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":"";Z(`\`Module.${t}\` has been replaced by \`${o}\``+F)}})}function hn(t){Object.getOwnPropertyDescriptor(e,t)&&Z(`\`Module.${t}\` was supplied but \`${t}\` not included in INCOMING_MODULE_JS_API`)}function St(t){return t==="FS_createPath"||t==="FS_createDataFile"||t==="FS_createPreloadedFile"||t==="FS_unlink"||t==="addRunDependency"||t==="FS_createLazyFile"||t==="FS_createDevice"||t==="removeRunDependency"}function Gt(t,o){typeof globalThis<"u"&&!Object.getOwnPropertyDescriptor(globalThis,t)&&Object.defineProperty(globalThis,t,{configurable:!0,get(){o()}})}function Ct(t,o){Gt(t,()=>{Te(`\`${t}\` is not longer defined by emscripten. ${o}`)})}Ct("buffer","Please use HEAP8.buffer or wasmMemory.buffer"),Ct("asm","Please use wasmExports instead");function fn(t){Gt(t,()=>{var o=`\`${t}\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`,s=t;s.startsWith("_")||(s="$"+t),o+=` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${s}')`,St(t)&&(o+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),Te(o)}),vt(t)}function vt(t){Object.getOwnPropertyDescriptor(e,t)||Object.defineProperty(e,t,{configurable:!0,get(){var o=`'${t}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;St(t)&&(o+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),Z(o)}})}var it=t=>{t.forEach(o=>o(e))};function Dn(t,o="i8"){switch(o.endsWith("*")&&(o="*"),o){case"i1":return H[t];case"i8":return H[t];case"i16":return K[t>>1];case"i32":return k[t>>2];case"i64":Z("to do getValue(i64) use WASM_BIGINT");case"float":return Fe[t>>2];case"double":return pe[t>>3];case"*":return X[t>>2];default:Z(`invalid type for getValue: ${o}`)}}e.noExitRuntime;var He=t=>(C(typeof t=="number"),t>>>=0,"0x"+t.toString(16).padStart(8,"0"));function bn(t,o,s="i8"){switch(s.endsWith("*")&&(s="*"),s){case"i1":H[t]=o;break;case"i8":H[t]=o;break;case"i16":K[t>>1]=o;break;case"i32":k[t>>2]=o;break;case"i64":Z("to do setValue(i64) use WASM_BIGINT");case"float":Fe[t>>2]=o;break;case"double":pe[t>>3]=o;break;case"*":X[t>>2]=o;break;default:Z(`invalid type for setValue: ${s}`)}}var he=t=>Ut(t),fe=()=>zt(),Te=t=>{Te.shown||={},Te.shown[t]||(Te.shown[t]=1,v(t))},Tt=typeof TextDecoder<"u"?new TextDecoder:void 0,Ie=(t,o=0,s=NaN)=>{for(var F=o+s,c=o;t[c]&&!(c>=F);)++c;if(c-o>16&&t.buffer&&Tt)return Tt.decode(t.subarray(o,c));for(var P="";o<c;){var p=t[o++];if(!(p&128)){P+=String.fromCharCode(p);continue}var A=t[o++]&63;if((p&224)==192){P+=String.fromCharCode((p&31)<<6|A);continue}var T=t[o++]&63;if((p&240)==224?p=(p&15)<<12|A<<6|T:((p&248)!=240&&Te("Invalid UTF-8 leading byte "+He(p)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),p=(p&7)<<18|A<<12|T<<6|t[o++]&63),p<65536)P+=String.fromCharCode(p);else{var B=p-65536;P+=String.fromCharCode(55296|B>>10,56320|B&1023)}}return P},xe=(t,o)=>(C(typeof t=="number",`UTF8ToString expects a number (got ${typeof t})`),t?Ie(Q,t,o):""),pn=(t,o,s,F)=>{Z(`Assertion failed: ${xe(t)}, at: `+[o?xe(o):"unknown filename",s,F?xe(F):"unknown function"])};function Qe(){C(J.varargs!=null);var t=k[+J.varargs>>2];return J.varargs+=4,t}var je=Qe,q={isAbs:t=>t.charAt(0)==="/",splitPath:t=>{var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return o.exec(t).slice(1)},normalizeArray:(t,o)=>{for(var s=0,F=t.length-1;F>=0;F--){var c=t[F];c==="."?t.splice(F,1):c===".."?(t.splice(F,1),s++):s&&(t.splice(F,1),s--)}if(o)for(;s;s--)t.unshift("..");return t},normalize:t=>{var o=q.isAbs(t),s=t.substr(-1)==="/";return t=q.normalizeArray(t.split("/").filter(F=>!!F),!o).join("/"),!t&&!o&&(t="."),t&&s&&(t+="/"),(o?"/":"")+t},dirname:t=>{var o=q.splitPath(t),s=o[0],F=o[1];return!s&&!F?".":(F&&(F=F.substr(0,F.length-1)),s+F)},basename:t=>{if(t==="/")return"/";t=q.normalize(t),t=t.replace(/\/$/,"");var o=t.lastIndexOf("/");return o===-1?t:t.substr(o+1)},join:(...t)=>q.normalize(t.join("/")),join2:(t,o)=>q.normalize(t+"/"+o)},An=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return t=>crypto.getRandomValues(t);Z("no cryptographic support found for randomDevice. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: (array) => { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")},xt=t=>(xt=An())(t),Ae={resolve:(...t)=>{for(var o="",s=!1,F=t.length-1;F>=-1&&!s;F--){var c=F>=0?t[F]:l.cwd();if(typeof c!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!c)return"";o=c+"/"+o,s=q.isAbs(c)}return o=q.normalizeArray(o.split("/").filter(P=>!!P),!s).join("/"),(s?"/":"")+o||"."},relative:(t,o)=>{t=Ae.resolve(t).substr(1),o=Ae.resolve(o).substr(1);function s(B){for(var V=0;V<B.length&&B[V]==="";V++);for(var W=B.length-1;W>=0&&B[W]==="";W--);return V>W?[]:B.slice(V,W-V+1)}for(var F=s(t.split("/")),c=s(o.split("/")),P=Math.min(F.length,c.length),p=P,A=0;A<P;A++)if(F[A]!==c[A]){p=A;break}for(var T=[],A=p;A<F.length;A++)T.push("..");return T=T.concat(c.slice(p)),T.join("/")}},at=[],$e=t=>{for(var o=0,s=0;s<t.length;++s){var F=t.charCodeAt(s);F<=127?o++:F<=2047?o+=2:F>=55296&&F<=57343?(o+=4,++s):o+=3}return o},st=(t,o,s,F)=>{if(C(typeof t=="string",`stringToUTF8Array expects a string (got ${typeof t})`),!(F>0))return 0;for(var c=s,P=s+F-1,p=0;p<t.length;++p){var A=t.charCodeAt(p);if(A>=55296&&A<=57343){var T=t.charCodeAt(++p);A=65536+((A&1023)<<10)|T&1023}if(A<=127){if(s>=P)break;o[s++]=A}else if(A<=2047){if(s+1>=P)break;o[s++]=192|A>>6,o[s++]=128|A&63}else if(A<=65535){if(s+2>=P)break;o[s++]=224|A>>12,o[s++]=128|A>>6&63,o[s++]=128|A&63}else{if(s+3>=P)break;A>1114111&&Te("Invalid Unicode code point "+He(A)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),o[s++]=240|A>>18,o[s++]=128|A>>12&63,o[s++]=128|A>>6&63,o[s++]=128|A&63}}return o[s]=0,s-c};function Ot(t,o,s){var F=$e(t)+1,c=new Array(F),P=st(t,c,0,c.length);return c.length=P,c}var En=()=>{if(!at.length){var t=null;if(typeof window<"u"&&typeof window.prompt=="function"?(t=window.prompt("Input: "),t!==null&&(t+=`
`)):typeof readline=="function"&&(t=readline(),t&&(t+=`
`)),!t)return null;at=Ot(t)}return at.shift()},Oe={ttys:[],init(){},shutdown(){},register(t,o){Oe.ttys[t]={input:[],output:[],ops:o},l.registerDevice(t,Oe.stream_ops)},stream_ops:{open(t){var o=Oe.ttys[t.node.rdev];if(!o)throw new l.ErrnoError(43);t.tty=o,t.seekable=!1},close(t){t.tty.ops.fsync(t.tty)},fsync(t){t.tty.ops.fsync(t.tty)},read(t,o,s,F,c){if(!t.tty||!t.tty.ops.get_char)throw new l.ErrnoError(60);for(var P=0,p=0;p<F;p++){var A;try{A=t.tty.ops.get_char(t.tty)}catch{throw new l.ErrnoError(29)}if(A===void 0&&P===0)throw new l.ErrnoError(6);if(A==null)break;P++,o[s+p]=A}return P&&(t.node.timestamp=Date.now()),P},write(t,o,s,F,c){if(!t.tty||!t.tty.ops.put_char)throw new l.ErrnoError(60);try{for(var P=0;P<F;P++)t.tty.ops.put_char(t.tty,o[s+P])}catch{throw new l.ErrnoError(29)}return F&&(t.node.timestamp=Date.now()),P}},default_tty_ops:{get_char(t){return En()},put_char(t,o){o===null||o===10?(O(Ie(t.output)),t.output=[]):o!=0&&t.output.push(o)},fsync(t){t.output&&t.output.length>0&&(O(Ie(t.output)),t.output=[])},ioctl_tcgets(t){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(t,o,s){return 0},ioctl_tiocgwinsz(t){return[24,80]}},default_tty1_ops:{put_char(t,o){o===null||o===10?(v(Ie(t.output)),t.output=[]):o!=0&&t.output.push(o)},fsync(t){t.output&&t.output.length>0&&(v(Ie(t.output)),t.output=[])}}},yn=(t,o)=>{Q.fill(0,t,t+o)},kt=(t,o)=>(C(o,"alignment argument is required"),Math.ceil(t/o)*o),wt=t=>{t=kt(t,65536);var o=Tr(65536,t);return o&&yn(o,t),o},z={ops_table:null,mount(t){return z.createNode(null,"/",16895,0)},createNode(t,o,s,F){if(l.isBlkdev(s)||l.isFIFO(s))throw new l.ErrnoError(63);z.ops_table||={dir:{node:{getattr:z.node_ops.getattr,setattr:z.node_ops.setattr,lookup:z.node_ops.lookup,mknod:z.node_ops.mknod,rename:z.node_ops.rename,unlink:z.node_ops.unlink,rmdir:z.node_ops.rmdir,readdir:z.node_ops.readdir,symlink:z.node_ops.symlink},stream:{llseek:z.stream_ops.llseek}},file:{node:{getattr:z.node_ops.getattr,setattr:z.node_ops.setattr},stream:{llseek:z.stream_ops.llseek,read:z.stream_ops.read,write:z.stream_ops.write,allocate:z.stream_ops.allocate,mmap:z.stream_ops.mmap,msync:z.stream_ops.msync}},link:{node:{getattr:z.node_ops.getattr,setattr:z.node_ops.setattr,readlink:z.node_ops.readlink},stream:{}},chrdev:{node:{getattr:z.node_ops.getattr,setattr:z.node_ops.setattr},stream:l.chrdev_stream_ops}};var c=l.createNode(t,o,s,F);return l.isDir(c.mode)?(c.node_ops=z.ops_table.dir.node,c.stream_ops=z.ops_table.dir.stream,c.contents={}):l.isFile(c.mode)?(c.node_ops=z.ops_table.file.node,c.stream_ops=z.ops_table.file.stream,c.usedBytes=0,c.contents=null):l.isLink(c.mode)?(c.node_ops=z.ops_table.link.node,c.stream_ops=z.ops_table.link.stream):l.isChrdev(c.mode)&&(c.node_ops=z.ops_table.chrdev.node,c.stream_ops=z.ops_table.chrdev.stream),c.timestamp=Date.now(),t&&(t.contents[o]=c,t.timestamp=c.timestamp),c},getFileDataAsTypedArray(t){return t.contents?t.contents.subarray?t.contents.subarray(0,t.usedBytes):new Uint8Array(t.contents):new Uint8Array(0)},expandFileStorage(t,o){var s=t.contents?t.contents.length:0;if(!(s>=o)){var F=1024*1024;o=Math.max(o,s*(s<F?2:1.125)>>>0),s!=0&&(o=Math.max(o,256));var c=t.contents;t.contents=new Uint8Array(o),t.usedBytes>0&&t.contents.set(c.subarray(0,t.usedBytes),0)}},resizeFileStorage(t,o){if(t.usedBytes!=o)if(o==0)t.contents=null,t.usedBytes=0;else{var s=t.contents;t.contents=new Uint8Array(o),s&&t.contents.set(s.subarray(0,Math.min(o,t.usedBytes))),t.usedBytes=o}},node_ops:{getattr(t){var o={};return o.dev=l.isChrdev(t.mode)?t.id:1,o.ino=t.id,o.mode=t.mode,o.nlink=1,o.uid=0,o.gid=0,o.rdev=t.rdev,l.isDir(t.mode)?o.size=4096:l.isFile(t.mode)?o.size=t.usedBytes:l.isLink(t.mode)?o.size=t.link.length:o.size=0,o.atime=new Date(t.timestamp),o.mtime=new Date(t.timestamp),o.ctime=new Date(t.timestamp),o.blksize=4096,o.blocks=Math.ceil(o.size/o.blksize),o},setattr(t,o){o.mode!==void 0&&(t.mode=o.mode),o.timestamp!==void 0&&(t.timestamp=o.timestamp),o.size!==void 0&&z.resizeFileStorage(t,o.size)},lookup(t,o){throw l.genericErrors[44]},mknod(t,o,s,F){return z.createNode(t,o,s,F)},rename(t,o,s){if(l.isDir(t.mode)){var F;try{F=l.lookupNode(o,s)}catch{}if(F)for(var c in F.contents)throw new l.ErrnoError(55)}delete t.parent.contents[t.name],t.parent.timestamp=Date.now(),t.name=s,o.contents[s]=t,o.timestamp=t.parent.timestamp},unlink(t,o){delete t.contents[o],t.timestamp=Date.now()},rmdir(t,o){var s=l.lookupNode(t,o);for(var F in s.contents)throw new l.ErrnoError(55);delete t.contents[o],t.timestamp=Date.now()},readdir(t){var o=[".",".."];for(var s of Object.keys(t.contents))o.push(s);return o},symlink(t,o,s){var F=z.createNode(t,o,41471,0);return F.link=s,F},readlink(t){if(!l.isLink(t.mode))throw new l.ErrnoError(28);return t.link}},stream_ops:{read(t,o,s,F,c){var P=t.node.contents;if(c>=t.node.usedBytes)return 0;var p=Math.min(t.node.usedBytes-c,F);if(C(p>=0),p>8&&P.subarray)o.set(P.subarray(c,c+p),s);else for(var A=0;A<p;A++)o[s+A]=P[c+A];return p},write(t,o,s,F,c,P){if(C(!(o instanceof ArrayBuffer)),o.buffer===H.buffer&&(P=!1),!F)return 0;var p=t.node;if(p.timestamp=Date.now(),o.subarray&&(!p.contents||p.contents.subarray)){if(P)return C(c===0,"canOwn must imply no weird position inside the file"),p.contents=o.subarray(s,s+F),p.usedBytes=F,F;if(p.usedBytes===0&&c===0)return p.contents=o.slice(s,s+F),p.usedBytes=F,F;if(c+F<=p.usedBytes)return p.contents.set(o.subarray(s,s+F),c),F}if(z.expandFileStorage(p,c+F),p.contents.subarray&&o.subarray)p.contents.set(o.subarray(s,s+F),c);else for(var A=0;A<F;A++)p.contents[c+A]=o[s+A];return p.usedBytes=Math.max(p.usedBytes,c+F),F},llseek(t,o,s){var F=o;if(s===1?F+=t.position:s===2&&l.isFile(t.node.mode)&&(F+=t.node.usedBytes),F<0)throw new l.ErrnoError(28);return F},allocate(t,o,s){z.expandFileStorage(t.node,o+s),t.node.usedBytes=Math.max(t.node.usedBytes,o+s)},mmap(t,o,s,F,c){if(!l.isFile(t.node.mode))throw new l.ErrnoError(43);var P,p,A=t.node.contents;if(!(c&2)&&A&&A.buffer===H.buffer)p=!1,P=A.byteOffset;else{if(p=!0,P=wt(o),!P)throw new l.ErrnoError(48);A&&((s>0||s+o<A.length)&&(A.subarray?A=A.subarray(s,s+o):A=Array.prototype.slice.call(A,s,s+o)),H.set(A,P))}return{ptr:P,allocated:p}},msync(t,o,s,F,c){return z.stream_ops.write(t,o,0,F,s,!1),0}}},Mn=(t,o,s,F)=>{var c=pt(`al ${t}`);y(t).then(P=>{C(P,`Loading data file "${t}" failed (no arrayBuffer).`),o(new Uint8Array(P)),c&&qe(c)},P=>{if(s)s();else throw`Loading data file "${t}" failed.`}),c&&ot(c)},Sn=(t,o,s,F,c,P)=>{l.createDataFile(t,o,s,F,c,P)},Gn=e.preloadPlugins||[],Cn=(t,o,s,F)=>{typeof Browser<"u"&&Browser.init();var c=!1;return Gn.forEach(P=>{c||P.canHandle(o)&&(P.handle(t,o,s,F),c=!0)}),c},vn=(t,o,s,F,c,P,p,A,T,B)=>{var V=o?Ae.resolve(q.join2(t,o)):t,W=pt(`cp ${V}`);function U(R){function L(te){B?.(),A||Sn(t,o,te,F,c,T),P?.(),qe(W)}Cn(R,V,L,()=>{p?.(),qe(W)})||L(R)}ot(W),typeof s=="string"?Mn(s,U,p):U(s)},Tn=t=>{var o={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},s=o[t];if(typeof s>"u")throw new Error(`Unknown file open mode: ${t}`);return s},ut=(t,o)=>{var s=0;return t&&(s|=365),o&&(s|=146),s},xn=t=>xe(xr(t)),Rt={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},l={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class extends Error{constructor(t){super(Je?xn(t):""),this.name="ErrnoError",this.errno=t;for(var o in Rt)if(Rt[o]===t){this.code=o;break}}},genericErrors:{},filesystems:null,syncFSRequests:0,readFiles:{},FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(t){this.node=t}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(t){this.shared.flags=t}get position(){return this.shared.position}set position(t){this.shared.position=t}},FSNode:class{constructor(t,o,s,F){t||(t=this),this.parent=t,this.mount=t.mount,this.mounted=null,this.id=l.nextInode++,this.name=o,this.mode=s,this.node_ops={},this.stream_ops={},this.rdev=F,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(t){t?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(t){t?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return l.isDir(this.mode)}get isDevice(){return l.isChrdev(this.mode)}},lookupPath(t,o={}){if(t=Ae.resolve(t),!t)return{path:"",node:null};var s={follow_mount:!0,recurse_count:0};if(o=Object.assign(s,o),o.recurse_count>8)throw new l.ErrnoError(32);for(var F=t.split("/").filter(W=>!!W),c=l.root,P="/",p=0;p<F.length;p++){var A=p===F.length-1;if(A&&o.parent)break;if(c=l.lookupNode(c,F[p]),P=q.join2(P,F[p]),l.isMountpoint(c)&&(!A||A&&o.follow_mount)&&(c=c.mounted.root),!A||o.follow)for(var T=0;l.isLink(c.mode);){var B=l.readlink(P);P=Ae.resolve(q.dirname(P),B);var V=l.lookupPath(P,{recurse_count:o.recurse_count+1});if(c=V.node,T++>40)throw new l.ErrnoError(32)}}return{path:P,node:c}},getPath(t){for(var o;;){if(l.isRoot(t)){var s=t.mount.mountpoint;return o?s[s.length-1]!=="/"?`${s}/${o}`:s+o:s}o=o?`${t.name}/${o}`:t.name,t=t.parent}},hashName(t,o){for(var s=0,F=0;F<o.length;F++)s=(s<<5)-s+o.charCodeAt(F)|0;return(t+s>>>0)%l.nameTable.length},hashAddNode(t){var o=l.hashName(t.parent.id,t.name);t.name_next=l.nameTable[o],l.nameTable[o]=t},hashRemoveNode(t){var o=l.hashName(t.parent.id,t.name);if(l.nameTable[o]===t)l.nameTable[o]=t.name_next;else for(var s=l.nameTable[o];s;){if(s.name_next===t){s.name_next=t.name_next;break}s=s.name_next}},lookupNode(t,o){var s=l.mayLookup(t);if(s)throw new l.ErrnoError(s);for(var F=l.hashName(t.id,o),c=l.nameTable[F];c;c=c.name_next){var P=c.name;if(c.parent.id===t.id&&P===o)return c}return l.lookup(t,o)},createNode(t,o,s,F){C(typeof t=="object");var c=new l.FSNode(t,o,s,F);return l.hashAddNode(c),c},destroyNode(t){l.hashRemoveNode(t)},isRoot(t){return t===t.parent},isMountpoint(t){return!!t.mounted},isFile(t){return(t&61440)===32768},isDir(t){return(t&61440)===16384},isLink(t){return(t&61440)===40960},isChrdev(t){return(t&61440)===8192},isBlkdev(t){return(t&61440)===24576},isFIFO(t){return(t&61440)===4096},isSocket(t){return(t&49152)===49152},flagsToPermissionString(t){var o=["r","w","rw"][t&3];return t&512&&(o+="w"),o},nodePermissions(t,o){return l.ignorePermissions?0:o.includes("r")&&!(t.mode&292)||o.includes("w")&&!(t.mode&146)||o.includes("x")&&!(t.mode&73)?2:0},mayLookup(t){if(!l.isDir(t.mode))return 54;var o=l.nodePermissions(t,"x");return o||(t.node_ops.lookup?0:2)},mayCreate(t,o){try{var s=l.lookupNode(t,o);return 20}catch{}return l.nodePermissions(t,"wx")},mayDelete(t,o,s){var F;try{F=l.lookupNode(t,o)}catch(P){return P.errno}var c=l.nodePermissions(t,"wx");if(c)return c;if(s){if(!l.isDir(F.mode))return 54;if(l.isRoot(F)||l.getPath(F)===l.cwd())return 10}else if(l.isDir(F.mode))return 31;return 0},mayOpen(t,o){return t?l.isLink(t.mode)?32:l.isDir(t.mode)&&(l.flagsToPermissionString(o)!=="r"||o&512)?31:l.nodePermissions(t,l.flagsToPermissionString(o)):44},MAX_OPEN_FDS:4096,nextfd(){for(var t=0;t<=l.MAX_OPEN_FDS;t++)if(!l.streams[t])return t;throw new l.ErrnoError(33)},getStreamChecked(t){var o=l.getStream(t);if(!o)throw new l.ErrnoError(8);return o},getStream:t=>l.streams[t],createStream(t,o=-1){return C(o>=-1),t=Object.assign(new l.FSStream,t),o==-1&&(o=l.nextfd()),t.fd=o,l.streams[o]=t,t},closeStream(t){l.streams[t]=null},dupStream(t,o=-1){var s=l.createStream(t,o);return s.stream_ops?.dup?.(s),s},chrdev_stream_ops:{open(t){var o=l.getDevice(t.node.rdev);t.stream_ops=o.stream_ops,t.stream_ops.open?.(t)},llseek(){throw new l.ErrnoError(70)}},major:t=>t>>8,minor:t=>t&255,makedev:(t,o)=>t<<8|o,registerDevice(t,o){l.devices[t]={stream_ops:o}},getDevice:t=>l.devices[t],getMounts(t){for(var o=[],s=[t];s.length;){var F=s.pop();o.push(F),s.push(...F.mounts)}return o},syncfs(t,o){typeof t=="function"&&(o=t,t=!1),l.syncFSRequests++,l.syncFSRequests>1&&v(`warning: ${l.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var s=l.getMounts(l.root.mount),F=0;function c(p){return C(l.syncFSRequests>0),l.syncFSRequests--,o(p)}function P(p){if(p)return P.errored?void 0:(P.errored=!0,c(p));++F>=s.length&&c(null)}s.forEach(p=>{if(!p.type.syncfs)return P(null);p.type.syncfs(p,t,P)})},mount(t,o,s){if(typeof t=="string")throw t;var F=s==="/",c=!s,P;if(F&&l.root)throw new l.ErrnoError(10);if(!F&&!c){var p=l.lookupPath(s,{follow_mount:!1});if(s=p.path,P=p.node,l.isMountpoint(P))throw new l.ErrnoError(10);if(!l.isDir(P.mode))throw new l.ErrnoError(54)}var A={type:t,opts:o,mountpoint:s,mounts:[]},T=t.mount(A);return T.mount=A,A.root=T,F?l.root=T:P&&(P.mounted=A,P.mount&&P.mount.mounts.push(A)),T},unmount(t){var o=l.lookupPath(t,{follow_mount:!1});if(!l.isMountpoint(o.node))throw new l.ErrnoError(28);var s=o.node,F=s.mounted,c=l.getMounts(F);Object.keys(l.nameTable).forEach(p=>{for(var A=l.nameTable[p];A;){var T=A.name_next;c.includes(A.mount)&&l.destroyNode(A),A=T}}),s.mounted=null;var P=s.mount.mounts.indexOf(F);C(P!==-1),s.mount.mounts.splice(P,1)},lookup(t,o){return t.node_ops.lookup(t,o)},mknod(t,o,s){var F=l.lookupPath(t,{parent:!0}),c=F.node,P=q.basename(t);if(!P||P==="."||P==="..")throw new l.ErrnoError(28);var p=l.mayCreate(c,P);if(p)throw new l.ErrnoError(p);if(!c.node_ops.mknod)throw new l.ErrnoError(63);return c.node_ops.mknod(c,P,o,s)},create(t,o){return o=o!==void 0?o:438,o&=4095,o|=32768,l.mknod(t,o,0)},mkdir(t,o){return o=o!==void 0?o:511,o&=1023,o|=16384,l.mknod(t,o,0)},mkdirTree(t,o){for(var s=t.split("/"),F="",c=0;c<s.length;++c)if(s[c]){F+="/"+s[c];try{l.mkdir(F,o)}catch(P){if(P.errno!=20)throw P}}},mkdev(t,o,s){return typeof s>"u"&&(s=o,o=438),o|=8192,l.mknod(t,o,s)},symlink(t,o){if(!Ae.resolve(t))throw new l.ErrnoError(44);var s=l.lookupPath(o,{parent:!0}),F=s.node;if(!F)throw new l.ErrnoError(44);var c=q.basename(o),P=l.mayCreate(F,c);if(P)throw new l.ErrnoError(P);if(!F.node_ops.symlink)throw new l.ErrnoError(63);return F.node_ops.symlink(F,c,t)},rename(t,o){var s=q.dirname(t),F=q.dirname(o),c=q.basename(t),P=q.basename(o),p,A,T;if(p=l.lookupPath(t,{parent:!0}),A=p.node,p=l.lookupPath(o,{parent:!0}),T=p.node,!A||!T)throw new l.ErrnoError(44);if(A.mount!==T.mount)throw new l.ErrnoError(75);var B=l.lookupNode(A,c),V=Ae.relative(t,F);if(V.charAt(0)!==".")throw new l.ErrnoError(28);if(V=Ae.relative(o,s),V.charAt(0)!==".")throw new l.ErrnoError(55);var W;try{W=l.lookupNode(T,P)}catch{}if(B!==W){var U=l.isDir(B.mode),R=l.mayDelete(A,c,U);if(R)throw new l.ErrnoError(R);if(R=W?l.mayDelete(T,P,U):l.mayCreate(T,P),R)throw new l.ErrnoError(R);if(!A.node_ops.rename)throw new l.ErrnoError(63);if(l.isMountpoint(B)||W&&l.isMountpoint(W))throw new l.ErrnoError(10);if(T!==A&&(R=l.nodePermissions(A,"w"),R))throw new l.ErrnoError(R);l.hashRemoveNode(B);try{A.node_ops.rename(B,T,P),B.parent=T}catch(L){throw L}finally{l.hashAddNode(B)}}},rmdir(t){var o=l.lookupPath(t,{parent:!0}),s=o.node,F=q.basename(t),c=l.lookupNode(s,F),P=l.mayDelete(s,F,!0);if(P)throw new l.ErrnoError(P);if(!s.node_ops.rmdir)throw new l.ErrnoError(63);if(l.isMountpoint(c))throw new l.ErrnoError(10);s.node_ops.rmdir(s,F),l.destroyNode(c)},readdir(t){var o=l.lookupPath(t,{follow:!0}),s=o.node;if(!s.node_ops.readdir)throw new l.ErrnoError(54);return s.node_ops.readdir(s)},unlink(t){var o=l.lookupPath(t,{parent:!0}),s=o.node;if(!s)throw new l.ErrnoError(44);var F=q.basename(t),c=l.lookupNode(s,F),P=l.mayDelete(s,F,!1);if(P)throw new l.ErrnoError(P);if(!s.node_ops.unlink)throw new l.ErrnoError(63);if(l.isMountpoint(c))throw new l.ErrnoError(10);s.node_ops.unlink(s,F),l.destroyNode(c)},readlink(t){var o=l.lookupPath(t),s=o.node;if(!s)throw new l.ErrnoError(44);if(!s.node_ops.readlink)throw new l.ErrnoError(28);return Ae.resolve(l.getPath(s.parent),s.node_ops.readlink(s))},stat(t,o){var s=l.lookupPath(t,{follow:!o}),F=s.node;if(!F)throw new l.ErrnoError(44);if(!F.node_ops.getattr)throw new l.ErrnoError(63);return F.node_ops.getattr(F)},lstat(t){return l.stat(t,!0)},chmod(t,o,s){var F;if(typeof t=="string"){var c=l.lookupPath(t,{follow:!s});F=c.node}else F=t;if(!F.node_ops.setattr)throw new l.ErrnoError(63);F.node_ops.setattr(F,{mode:o&4095|F.mode&-4096,timestamp:Date.now()})},lchmod(t,o){l.chmod(t,o,!0)},fchmod(t,o){var s=l.getStreamChecked(t);l.chmod(s.node,o)},chown(t,o,s,F){var c;if(typeof t=="string"){var P=l.lookupPath(t,{follow:!F});c=P.node}else c=t;if(!c.node_ops.setattr)throw new l.ErrnoError(63);c.node_ops.setattr(c,{timestamp:Date.now()})},lchown(t,o,s){l.chown(t,o,s,!0)},fchown(t,o,s){var F=l.getStreamChecked(t);l.chown(F.node,o,s)},truncate(t,o){if(o<0)throw new l.ErrnoError(28);var s;if(typeof t=="string"){var F=l.lookupPath(t,{follow:!0});s=F.node}else s=t;if(!s.node_ops.setattr)throw new l.ErrnoError(63);if(l.isDir(s.mode))throw new l.ErrnoError(31);if(!l.isFile(s.mode))throw new l.ErrnoError(28);var c=l.nodePermissions(s,"w");if(c)throw new l.ErrnoError(c);s.node_ops.setattr(s,{size:o,timestamp:Date.now()})},ftruncate(t,o){var s=l.getStreamChecked(t);if((s.flags&2097155)===0)throw new l.ErrnoError(28);l.truncate(s.node,o)},utime(t,o,s){var F=l.lookupPath(t,{follow:!0}),c=F.node;c.node_ops.setattr(c,{timestamp:Math.max(o,s)})},open(t,o,s){if(t==="")throw new l.ErrnoError(44);o=typeof o=="string"?Tn(o):o,o&64?(s=typeof s>"u"?438:s,s=s&4095|32768):s=0;var F;if(typeof t=="object")F=t;else{t=q.normalize(t);try{var c=l.lookupPath(t,{follow:!(o&131072)});F=c.node}catch{}}var P=!1;if(o&64)if(F){if(o&128)throw new l.ErrnoError(20)}else F=l.mknod(t,s,0),P=!0;if(!F)throw new l.ErrnoError(44);if(l.isChrdev(F.mode)&&(o&=-513),o&65536&&!l.isDir(F.mode))throw new l.ErrnoError(54);if(!P){var p=l.mayOpen(F,o);if(p)throw new l.ErrnoError(p)}o&512&&!P&&l.truncate(F,0),o&=-131713;var A=l.createStream({node:F,path:l.getPath(F),flags:o,seekable:!0,position:0,stream_ops:F.stream_ops,ungotten:[],error:!1});return A.stream_ops.open&&A.stream_ops.open(A),e.logReadFiles&&!(o&1)&&(t in l.readFiles||(l.readFiles[t]=1)),A},close(t){if(l.isClosed(t))throw new l.ErrnoError(8);t.getdents&&(t.getdents=null);try{t.stream_ops.close&&t.stream_ops.close(t)}catch(o){throw o}finally{l.closeStream(t.fd)}t.fd=null},isClosed(t){return t.fd===null},llseek(t,o,s){if(l.isClosed(t))throw new l.ErrnoError(8);if(!t.seekable||!t.stream_ops.llseek)throw new l.ErrnoError(70);if(s!=0&&s!=1&&s!=2)throw new l.ErrnoError(28);return t.position=t.stream_ops.llseek(t,o,s),t.ungotten=[],t.position},read(t,o,s,F,c){if(C(s>=0),F<0||c<0)throw new l.ErrnoError(28);if(l.isClosed(t))throw new l.ErrnoError(8);if((t.flags&2097155)===1)throw new l.ErrnoError(8);if(l.isDir(t.node.mode))throw new l.ErrnoError(31);if(!t.stream_ops.read)throw new l.ErrnoError(28);var P=typeof c<"u";if(!P)c=t.position;else if(!t.seekable)throw new l.ErrnoError(70);var p=t.stream_ops.read(t,o,s,F,c);return P||(t.position+=p),p},write(t,o,s,F,c,P){if(C(s>=0),F<0||c<0)throw new l.ErrnoError(28);if(l.isClosed(t))throw new l.ErrnoError(8);if((t.flags&2097155)===0)throw new l.ErrnoError(8);if(l.isDir(t.node.mode))throw new l.ErrnoError(31);if(!t.stream_ops.write)throw new l.ErrnoError(28);t.seekable&&t.flags&1024&&l.llseek(t,0,2);var p=typeof c<"u";if(!p)c=t.position;else if(!t.seekable)throw new l.ErrnoError(70);var A=t.stream_ops.write(t,o,s,F,c,P);return p||(t.position+=A),A},allocate(t,o,s){if(l.isClosed(t))throw new l.ErrnoError(8);if(o<0||s<=0)throw new l.ErrnoError(28);if((t.flags&2097155)===0)throw new l.ErrnoError(8);if(!l.isFile(t.node.mode)&&!l.isDir(t.node.mode))throw new l.ErrnoError(43);if(!t.stream_ops.allocate)throw new l.ErrnoError(138);t.stream_ops.allocate(t,o,s)},mmap(t,o,s,F,c){if((F&2)!==0&&(c&2)===0&&(t.flags&2097155)!==2)throw new l.ErrnoError(2);if((t.flags&2097155)===1)throw new l.ErrnoError(2);if(!t.stream_ops.mmap)throw new l.ErrnoError(43);if(!o)throw new l.ErrnoError(28);return t.stream_ops.mmap(t,o,s,F,c)},msync(t,o,s,F,c){return C(s>=0),t.stream_ops.msync?t.stream_ops.msync(t,o,s,F,c):0},ioctl(t,o,s){if(!t.stream_ops.ioctl)throw new l.ErrnoError(59);return t.stream_ops.ioctl(t,o,s)},readFile(t,o={}){if(o.flags=o.flags||0,o.encoding=o.encoding||"binary",o.encoding!=="utf8"&&o.encoding!=="binary")throw new Error(`Invalid encoding type "${o.encoding}"`);var s,F=l.open(t,o.flags),c=l.stat(t),P=c.size,p=new Uint8Array(P);return l.read(F,p,0,P,0),o.encoding==="utf8"?s=Ie(p):o.encoding==="binary"&&(s=p),l.close(F),s},writeFile(t,o,s={}){s.flags=s.flags||577;var F=l.open(t,s.flags,s.mode);if(typeof o=="string"){var c=new Uint8Array($e(o)+1),P=st(o,c,0,c.length);l.write(F,c,0,P,void 0,s.canOwn)}else if(ArrayBuffer.isView(o))l.write(F,o,0,o.byteLength,void 0,s.canOwn);else throw new Error("Unsupported data type");l.close(F)},cwd:()=>l.currentPath,chdir(t){var o=l.lookupPath(t,{follow:!0});if(o.node===null)throw new l.ErrnoError(44);if(!l.isDir(o.node.mode))throw new l.ErrnoError(54);var s=l.nodePermissions(o.node,"x");if(s)throw new l.ErrnoError(s);l.currentPath=o.path},createDefaultDirectories(){l.mkdir("/tmp"),l.mkdir("/home"),l.mkdir("/home/web_user")},createDefaultDevices(){l.mkdir("/dev"),l.registerDevice(l.makedev(1,3),{read:()=>0,write:(F,c,P,p,A)=>p}),l.mkdev("/dev/null",l.makedev(1,3)),Oe.register(l.makedev(5,0),Oe.default_tty_ops),Oe.register(l.makedev(6,0),Oe.default_tty1_ops),l.mkdev("/dev/tty",l.makedev(5,0)),l.mkdev("/dev/tty1",l.makedev(6,0));var t=new Uint8Array(1024),o=0,s=()=>(o===0&&(o=xt(t).byteLength),t[--o]);l.createDevice("/dev","random",s),l.createDevice("/dev","urandom",s),l.mkdir("/dev/shm"),l.mkdir("/dev/shm/tmp")},createSpecialDirectories(){l.mkdir("/proc");var t=l.mkdir("/proc/self");l.mkdir("/proc/self/fd"),l.mount({mount(){var o=l.createNode(t,"fd",16895,73);return o.node_ops={lookup(s,F){var c=+F,P=l.getStreamChecked(c),p={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>P.path}};return p.parent=p,p}},o}},{},"/proc/self/fd")},createStandardStreams(t,o,s){t?l.createDevice("/dev","stdin",t):l.symlink("/dev/tty","/dev/stdin"),o?l.createDevice("/dev","stdout",null,o):l.symlink("/dev/tty","/dev/stdout"),s?l.createDevice("/dev","stderr",null,s):l.symlink("/dev/tty1","/dev/stderr");var F=l.open("/dev/stdin",0),c=l.open("/dev/stdout",1),P=l.open("/dev/stderr",1);C(F.fd===0,`invalid handle for stdin (${F.fd})`),C(c.fd===1,`invalid handle for stdout (${c.fd})`),C(P.fd===2,`invalid handle for stderr (${P.fd})`)},staticInit(){[44].forEach(t=>{l.genericErrors[t]=new l.ErrnoError(t),l.genericErrors[t].stack="<generic error, no stack>"}),l.nameTable=new Array(4096),l.mount(z,{},"/"),l.createDefaultDirectories(),l.createDefaultDevices(),l.createSpecialDirectories(),l.filesystems={MEMFS:z}},init(t,o,s){C(!l.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),l.initialized=!0,t??=e.stdin,o??=e.stdout,s??=e.stderr,l.createStandardStreams(t,o,s)},quit(){l.initialized=!1,vr(0);for(var t=0;t<l.streams.length;t++){var o=l.streams[t];o&&l.close(o)}},findObject(t,o){var s=l.analyzePath(t,o);return s.exists?s.object:null},analyzePath(t,o){try{var s=l.lookupPath(t,{follow:!o});t=s.path}catch{}var F={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var s=l.lookupPath(t,{parent:!0});F.parentExists=!0,F.parentPath=s.path,F.parentObject=s.node,F.name=q.basename(t),s=l.lookupPath(t,{follow:!o}),F.exists=!0,F.path=s.path,F.object=s.node,F.name=s.node.name,F.isRoot=s.path==="/"}catch(c){F.error=c.errno}return F},createPath(t,o,s,F){t=typeof t=="string"?t:l.getPath(t);for(var c=o.split("/").reverse();c.length;){var P=c.pop();if(P){var p=q.join2(t,P);try{l.mkdir(p)}catch{}t=p}}return p},createFile(t,o,s,F,c){var P=q.join2(typeof t=="string"?t:l.getPath(t),o),p=ut(F,c);return l.create(P,p)},createDataFile(t,o,s,F,c,P){var p=o;t&&(t=typeof t=="string"?t:l.getPath(t),p=o?q.join2(t,o):t);var A=ut(F,c),T=l.create(p,A);if(s){if(typeof s=="string"){for(var B=new Array(s.length),V=0,W=s.length;V<W;++V)B[V]=s.charCodeAt(V);s=B}l.chmod(T,A|146);var U=l.open(T,577);l.write(U,s,0,s.length,0,P),l.close(U),l.chmod(T,A)}},createDevice(t,o,s,F){var c=q.join2(typeof t=="string"?t:l.getPath(t),o),P=ut(!!s,!!F);l.createDevice.major??=64;var p=l.makedev(l.createDevice.major++,0);return l.registerDevice(p,{open(A){A.seekable=!1},close(A){F?.buffer?.length&&F(10)},read(A,T,B,V,W){for(var U=0,R=0;R<V;R++){var L;try{L=s()}catch{throw new l.ErrnoError(29)}if(L===void 0&&U===0)throw new l.ErrnoError(6);if(L==null)break;U++,T[B+R]=L}return U&&(A.node.timestamp=Date.now()),U},write(A,T,B,V,W){for(var U=0;U<V;U++)try{F(T[B+U])}catch{throw new l.ErrnoError(29)}return V&&(A.node.timestamp=Date.now()),U}}),l.mkdev(c,P,p)},forceLoadFile(t){if(t.isDevice||t.isFolder||t.link||t.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{t.contents=G(t.url),t.usedBytes=t.contents.length}catch{throw new l.ErrnoError(29)}},createLazyFile(t,o,s,F,c){class P{constructor(){this.lengthKnown=!1,this.chunks=[]}get(R){if(!(R>this.length-1||R<0)){var L=R%this.chunkSize,te=R/this.chunkSize|0;return this.getter(te)[L]}}setDataGetter(R){this.getter=R}cacheLength(){var R=new XMLHttpRequest;if(R.open("HEAD",s,!1),R.send(null),!(R.status>=200&&R.status<300||R.status===304))throw new Error("Couldn't load "+s+". Status: "+R.status);var L=Number(R.getResponseHeader("Content-length")),te,_e=(te=R.getResponseHeader("Accept-Ranges"))&&te==="bytes",me=(te=R.getResponseHeader("Content-Encoding"))&&te==="gzip",le=1024*1024;_e||(le=L);var Pe=(De,Be)=>{if(De>Be)throw new Error("invalid range ("+De+", "+Be+") or no bytes requested!");if(Be>L-1)throw new Error("only "+L+" bytes available! programmer error!");var oe=new XMLHttpRequest;if(oe.open("GET",s,!1),L!==le&&oe.setRequestHeader("Range","bytes="+De+"-"+Be),oe.responseType="arraybuffer",oe.overrideMimeType&&oe.overrideMimeType("text/plain; charset=x-user-defined"),oe.send(null),!(oe.status>=200&&oe.status<300||oe.status===304))throw new Error("Couldn't load "+s+". Status: "+oe.status);return oe.response!==void 0?new Uint8Array(oe.response||[]):Ot(oe.responseText||"")},Xe=this;Xe.setDataGetter(De=>{var Be=De*le,oe=(De+1)*le-1;if(oe=Math.min(oe,L-1),typeof Xe.chunks[De]>"u"&&(Xe.chunks[De]=Pe(Be,oe)),typeof Xe.chunks[De]>"u")throw new Error("doXHR failed!");return Xe.chunks[De]}),(me||!L)&&(le=L=1,L=this.getter(0).length,le=L,O("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=L,this._chunkSize=le,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!_)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var p=new P,A={isDevice:!1,contents:p}}else var A={isDevice:!1,url:s};var T=l.createFile(t,o,A,F,c);A.contents?T.contents=A.contents:A.url&&(T.contents=null,T.url=A.url),Object.defineProperties(T,{usedBytes:{get:function(){return this.contents.length}}});var B={},V=Object.keys(T.stream_ops);V.forEach(U=>{var R=T.stream_ops[U];B[U]=(...L)=>(l.forceLoadFile(T),R(...L))});function W(U,R,L,te,_e){var me=U.node.contents;if(_e>=me.length)return 0;var le=Math.min(me.length-_e,te);if(C(le>=0),me.slice)for(var Pe=0;Pe<le;Pe++)R[L+Pe]=me[_e+Pe];else for(var Pe=0;Pe<le;Pe++)R[L+Pe]=me.get(_e+Pe);return le}return B.read=(U,R,L,te,_e)=>(l.forceLoadFile(T),W(U,R,L,te,_e)),B.mmap=(U,R,L,te,_e)=>{l.forceLoadFile(T);var me=wt(R);if(!me)throw new l.ErrnoError(48);return W(U,H,me,R,L),{ptr:me,allocated:!0}},T.stream_ops=B,T},absolutePath(){Z("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder(){Z("FS.createFolder has been removed; use FS.mkdir instead")},createLink(){Z("FS.createLink has been removed; use FS.symlink instead")},joinPath(){Z("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc(){Z("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath(){Z("FS.standardizePath has been removed; use PATH.normalize instead")}},J={DEFAULT_POLLMASK:5,calculateAt(t,o,s){if(q.isAbs(o))return o;var F;if(t===-100)F=l.cwd();else{var c=J.getStreamFromFD(t);F=c.path}if(o.length==0){if(!s)throw new l.ErrnoError(44);return F}return q.join2(F,o)},doStat(t,o,s){var F=t(o);k[s>>2]=F.dev,k[s+4>>2]=F.mode,X[s+8>>2]=F.nlink,k[s+12>>2]=F.uid,k[s+16>>2]=F.gid,k[s+20>>2]=F.rdev,ee=[F.size>>>0,(N=F.size,+Math.abs(N)>=1?N>0?+Math.floor(N/4294967296)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],k[s+24>>2]=ee[0],k[s+28>>2]=ee[1],k[s+32>>2]=4096,k[s+36>>2]=F.blocks;var c=F.atime.getTime(),P=F.mtime.getTime(),p=F.ctime.getTime();return ee=[Math.floor(c/1e3)>>>0,(N=Math.floor(c/1e3),+Math.abs(N)>=1?N>0?+Math.floor(N/4294967296)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],k[s+40>>2]=ee[0],k[s+44>>2]=ee[1],X[s+48>>2]=c%1e3*1e3*1e3,ee=[Math.floor(P/1e3)>>>0,(N=Math.floor(P/1e3),+Math.abs(N)>=1?N>0?+Math.floor(N/4294967296)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],k[s+56>>2]=ee[0],k[s+60>>2]=ee[1],X[s+64>>2]=P%1e3*1e3*1e3,ee=[Math.floor(p/1e3)>>>0,(N=Math.floor(p/1e3),+Math.abs(N)>=1?N>0?+Math.floor(N/4294967296)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],k[s+72>>2]=ee[0],k[s+76>>2]=ee[1],X[s+80>>2]=p%1e3*1e3*1e3,ee=[F.ino>>>0,(N=F.ino,+Math.abs(N)>=1?N>0?+Math.floor(N/4294967296)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],k[s+88>>2]=ee[0],k[s+92>>2]=ee[1],0},doMsync(t,o,s,F,c){if(!l.isFile(o.node.mode))throw new l.ErrnoError(43);if(F&2)return 0;var P=Q.slice(t,t+s);l.msync(o,P,c,s,F)},getStreamFromFD(t){var o=l.getStreamChecked(t);return o},varargs:void 0,getStr(t){var o=xe(t);return o}};function On(t,o,s){J.varargs=s;try{var F=J.getStreamFromFD(t);switch(o){case 0:{var c=Qe();if(c<0)return-28;for(;l.streams[c];)c++;var P;return P=l.dupStream(F,c),P.fd}case 1:case 2:return 0;case 3:return F.flags;case 4:{var c=Qe();return F.flags|=c,0}case 12:{var c=je(),p=0;return K[c+p>>1]=2,0}case 13:case 14:return 0}return-28}catch(A){if(typeof l>"u"||A.name!=="ErrnoError")throw A;return-A.errno}}function kn(t,o){try{var s=J.getStreamFromFD(t);return J.doStat(l.stat,s.path,o)}catch(F){if(typeof l>"u"||F.name!=="ErrnoError")throw F;return-F.errno}}var Ze=(t,o)=>(C(t==t>>>0||t==(t|0)),C(o===(o|0)),o+2097152>>>0<4194305-!!t?(t>>>0)+o*4294967296:NaN);function wn(t,o,s){var F=Ze(o,s);try{return isNaN(F)?61:(l.ftruncate(t,F),0)}catch(c){if(typeof l>"u"||c.name!=="ErrnoError")throw c;return-c.errno}}var ke=(t,o,s)=>(C(typeof s=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),st(t,Q,o,s));function Rn(t,o,s){try{var F=J.getStreamFromFD(t);F.getdents||=l.readdir(F.path);for(var c=280,P=0,p=l.llseek(F,0,1),A=Math.floor(p/c);A<F.getdents.length&&P+c<=s;){var T,B,V=F.getdents[A];if(V===".")T=F.node.id,B=4;else if(V===".."){var W=l.lookupPath(F.path,{parent:!0});T=W.node.id,B=4}else{var U=l.lookupNode(F.node,V);T=U.id,B=l.isChrdev(U.mode)?2:l.isDir(U.mode)?4:l.isLink(U.mode)?10:8}C(T),ee=[T>>>0,(N=T,+Math.abs(N)>=1?N>0?+Math.floor(N/4294967296)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],k[o+P>>2]=ee[0],k[o+P+4>>2]=ee[1],ee=[(A+1)*c>>>0,(N=(A+1)*c,+Math.abs(N)>=1?N>0?+Math.floor(N/4294967296)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],k[o+P+8>>2]=ee[0],k[o+P+12>>2]=ee[1],K[o+P+16>>1]=280,H[o+P+18]=B,ke(V,o+P+19,256),P+=c,A+=1}return l.llseek(F,A*c,0),P}catch(R){if(typeof l>"u"||R.name!=="ErrnoError")throw R;return-R.errno}}function In(t,o,s){J.varargs=s;try{var F=J.getStreamFromFD(t);switch(o){case 21509:return F.tty?0:-59;case 21505:{if(!F.tty)return-59;if(F.tty.ops.ioctl_tcgets){var c=F.tty.ops.ioctl_tcgets(F),P=je();k[P>>2]=c.c_iflag||0,k[P+4>>2]=c.c_oflag||0,k[P+8>>2]=c.c_cflag||0,k[P+12>>2]=c.c_lflag||0;for(var p=0;p<32;p++)H[P+p+17]=c.c_cc[p]||0;return 0}return 0}case 21510:case 21511:case 21512:return F.tty?0:-59;case 21506:case 21507:case 21508:{if(!F.tty)return-59;if(F.tty.ops.ioctl_tcsets){for(var P=je(),A=k[P>>2],T=k[P+4>>2],B=k[P+8>>2],V=k[P+12>>2],W=[],p=0;p<32;p++)W.push(H[P+p+17]);return F.tty.ops.ioctl_tcsets(F.tty,o,{c_iflag:A,c_oflag:T,c_cflag:B,c_lflag:V,c_cc:W})}return 0}case 21519:{if(!F.tty)return-59;var P=je();return k[P>>2]=0,0}case 21520:return F.tty?-28:-59;case 21531:{var P=je();return l.ioctl(F,o,P)}case 21523:{if(!F.tty)return-59;if(F.tty.ops.ioctl_tiocgwinsz){var U=F.tty.ops.ioctl_tiocgwinsz(F.tty),P=je();K[P>>1]=U[0],K[P+2>>1]=U[1]}return 0}case 21524:return F.tty?0:-59;case 21515:return F.tty?0:-59;default:return-28}}catch(R){if(typeof l>"u"||R.name!=="ErrnoError")throw R;return-R.errno}}function jn(t,o){try{return t=J.getStr(t),J.doStat(l.lstat,t,o)}catch(s){if(typeof l>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}function Bn(t,o,s,F){try{o=J.getStr(o);var c=F&256,P=F&4096;return F=F&-6401,C(!F,`unknown flags in __syscall_newfstatat: ${F}`),o=J.calculateAt(t,o,P),J.doStat(c?l.lstat:l.stat,o,s)}catch(p){if(typeof l>"u"||p.name!=="ErrnoError")throw p;return-p.errno}}function Ln(t,o,s,F){J.varargs=F;try{o=J.getStr(o),o=J.calculateAt(t,o);var c=F?Qe():0;return l.open(o,s,c).fd}catch(P){if(typeof l>"u"||P.name!=="ErrnoError")throw P;return-P.errno}}function Nn(t){try{return t=J.getStr(t),l.rmdir(t),0}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function Vn(t,o){try{return t=J.getStr(t),J.doStat(l.stat,t,o)}catch(s){if(typeof l>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}function Un(t,o,s){try{return o=J.getStr(o),o=J.calculateAt(t,o),s===0?l.unlink(o):s===512?l.rmdir(o):Z("Invalid flags passed to unlinkat"),0}catch(F){if(typeof l>"u"||F.name!=="ErrnoError")throw F;return-F.errno}}var Wn=()=>{Z("native code called abort()")},zn=(t,o,s)=>Q.copyWithin(t,o,o+s),Hn=()=>{throw 1/0};function $n(t,o,s){var F=Ze(t,o),c=new Date(F*1e3);k[s>>2]=c.getUTCSeconds(),k[s+4>>2]=c.getUTCMinutes(),k[s+8>>2]=c.getUTCHours(),k[s+12>>2]=c.getUTCDate(),k[s+16>>2]=c.getUTCMonth(),k[s+20>>2]=c.getUTCFullYear()-1900,k[s+24>>2]=c.getUTCDay();var P=Date.UTC(c.getUTCFullYear(),0,1,0,0,0,0),p=(c.getTime()-P)/(1e3*60*60*24)|0;k[s+28>>2]=p}var Yn=t=>t%4===0&&(t%100!==0||t%400===0),Kn=[0,31,60,91,121,152,182,213,244,274,305,335],Xn=[0,31,59,90,120,151,181,212,243,273,304,334],Jn=t=>{var o=Yn(t.getFullYear()),s=o?Kn:Xn,F=s[t.getMonth()]+t.getDate()-1;return F};function qn(t,o,s){var F=Ze(t,o),c=new Date(F*1e3);k[s>>2]=c.getSeconds(),k[s+4>>2]=c.getMinutes(),k[s+8>>2]=c.getHours(),k[s+12>>2]=c.getDate(),k[s+16>>2]=c.getMonth(),k[s+20>>2]=c.getFullYear()-1900,k[s+24>>2]=c.getDay();var P=Jn(c)|0;k[s+28>>2]=P,k[s+36>>2]=-(c.getTimezoneOffset()*60);var p=new Date(c.getFullYear(),0,1),A=new Date(c.getFullYear(),6,1).getTimezoneOffset(),T=p.getTimezoneOffset(),B=(A!=T&&c.getTimezoneOffset()==Math.min(T,A))|0;k[s+32>>2]=B}var Qn=(t,o,s,F)=>{var c=new Date().getFullYear(),P=new Date(c,0,1),p=new Date(c,6,1),A=P.getTimezoneOffset(),T=p.getTimezoneOffset(),B=Math.max(A,T);X[t>>2]=B*60,k[o>>2]=+(A!=T);var V=R=>{var L=R>=0?"-":"+",te=Math.abs(R),_e=String(Math.floor(te/60)).padStart(2,"0"),me=String(te%60).padStart(2,"0");return`UTC${L}${_e}${me}`},W=V(A),U=V(T);C(W),C(U),C($e(W)<=16,`timezone name truncated to fit in TZNAME_MAX (${W})`),C($e(U)<=16,`timezone name truncated to fit in TZNAME_MAX (${U})`),T<A?(ke(W,s,17),ke(U,F,17)):(ke(W,F,17),ke(U,s,17))},Zn=()=>Date.now(),er=()=>2147483648,tr=t=>{var o=j.buffer,s=(t-o.byteLength+65535)/65536|0;try{return j.grow(s),re(),1}catch(F){v(`growMemory: Attempted to grow heap from ${o.byteLength} bytes to ${t} bytes, but got error: ${F}`)}},nr=t=>{var o=Q.length;t>>>=0,C(t>o);var s=er();if(t>s)return v(`Cannot enlarge memory, requested ${t} bytes, but the limit is ${s} bytes!`),!1;for(var F=1;F<=4;F*=2){var c=o*(1+.2/F);c=Math.min(c,t+100663296);var P=Math.min(s,kt(Math.max(t,c),65536)),p=tr(P);if(p)return!0}return v(`Failed to grow the heap from ${o} bytes to ${P} bytes, not enough memory!`),!1},mt={},rr=()=>b||"./this.program",Ye=()=>{if(!Ye.strings){var t=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",o={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:t,_:rr()};for(var s in mt)mt[s]===void 0?delete o[s]:o[s]=mt[s];var F=[];for(var s in o)F.push(`${s}=${o[s]}`);Ye.strings=F}return Ye.strings},or=(t,o)=>{for(var s=0;s<t.length;++s)C(t.charCodeAt(s)===(t.charCodeAt(s)&255)),H[o++]=t.charCodeAt(s);H[o]=0},ir=(t,o)=>{var s=0;return Ye().forEach((F,c)=>{var P=o+s;X[t+c*4>>2]=P,or(F,P),s+=F.length+1}),0},ar=(t,o)=>{var s=Ye();X[t>>2]=s.length;var F=0;return s.forEach(c=>F+=c.length+1),X[o>>2]=F,0};function sr(t){try{var o=J.getStreamFromFD(t);return l.close(o),0}catch(s){if(typeof l>"u"||s.name!=="ErrnoError")throw s;return s.errno}}var ur=(t,o,s,F)=>{for(var c=0,P=0;P<s;P++){var p=X[o>>2],A=X[o+4>>2];o+=8;var T=l.read(t,H,p,A,F);if(T<0)return-1;if(c+=T,T<A)break}return c};function mr(t,o,s,F){try{var c=J.getStreamFromFD(t),P=ur(c,o,s);return X[F>>2]=P,0}catch(p){if(typeof l>"u"||p.name!=="ErrnoError")throw p;return p.errno}}function Fr(t,o,s,F,c){var P=Ze(o,s);try{if(isNaN(P))return 61;var p=J.getStreamFromFD(t);return l.llseek(p,P,F),ee=[p.position>>>0,(N=p.position,+Math.abs(N)>=1?N>0?+Math.floor(N/4294967296)>>>0:~~+Math.ceil((N-+(~~N>>>0))/4294967296)>>>0:0)],k[c>>2]=ee[0],k[c+4>>2]=ee[1],p.getdents&&P===0&&F===0&&(p.getdents=null),0}catch(A){if(typeof l>"u"||A.name!=="ErrnoError")throw A;return A.errno}}function lr(t){try{var o=J.getStreamFromFD(t);return o.stream_ops?.fsync?o.stream_ops.fsync(o):0}catch(s){if(typeof l>"u"||s.name!=="ErrnoError")throw s;return s.errno}}var dr=(t,o,s,F)=>{for(var c=0,P=0;P<s;P++){var p=X[o>>2],A=X[o+4>>2];o+=8;var T=l.write(t,H,p,A,F);if(T<0)return-1;if(c+=T,T<A)break}return c};function cr(t,o,s,F){try{var c=J.getStreamFromFD(t),P=dr(c,o,s);return X[F>>2]=P,0}catch(p){if(typeof l>"u"||p.name!=="ErrnoError")throw p;return p.errno}}var Ke=[],Ee,ce=t=>{var o=Ke[t];return o||(t>=Ke.length&&(Ke.length=t+1),Ke[t]=o=Ee.get(t)),C(Ee.get(t)==o,"JavaScript-side Wasm function table mirror is out of date!"),o},It=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,_r=(t,o)=>{C(t%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var s=t,F=s>>1,c=F+o/2;!(F>=c)&&de[F];)++F;if(s=F<<1,s-t>32&&It)return It.decode(Q.subarray(t,s));for(var P="",p=0;!(p>=o/2);++p){var A=K[t+p*2>>1];if(A==0)break;P+=String.fromCharCode(A)}return P},jt=(t,o)=>{C(t<16384),t<128?o.push(t):o.push(t%128|128,t>>7)},Pr=t=>{C(!t.includes("j"),"i64 not permitted in function signatures when WASM_BIGINT is disabled");for(var o={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},s={parameters:[],results:t[0]=="v"?[]:[o[t[0]]]},F=1;F<t.length;++F)C(t[F]in o,"invalid signature char: "+t[F]),s.parameters.push(o[t[F]]);return s},gr=(t,o)=>{var s=t.slice(0,1),F=t.slice(1),c={i:127,p:127,j:126,f:125,d:124,e:111};o.push(96),jt(F.length,o);for(var P=0;P<F.length;++P)C(F[P]in c,"invalid signature char: "+F[P]),o.push(c[F[P]]);s=="v"?o.push(0):o.push(1,c[s])},hr=(t,o)=>{if(C(!o.includes("j"),"i64 not permitted in function signatures when WASM_BIGINT is disabled"),typeof WebAssembly.Function=="function")return new WebAssembly.Function(Pr(o),t);var s=[1];gr(o,s);var F=[0,97,115,109,1,0,0,0,1];jt(s.length,F),F.push(...s),F.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var c=new WebAssembly.Module(new Uint8Array(F)),P=new WebAssembly.Instance(c,{e:{f:t}}),p=P.exports.f;return p},fr=(t,o)=>{if(we)for(var s=t;s<t+o;s++){var F=ce(s);F&&we.set(F,s)}},we,Dr=t=>(we||(we=new WeakMap,fr(0,Ee.length)),we.get(t)||0),Ft=[],br=()=>{if(Ft.length)return Ft.pop();try{Ee.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return Ee.length-1},lt=(t,o)=>{Ee.set(t,o),Ke[t]=Ee.get(t)},pr=(t,o)=>{C(typeof t<"u");var s=Dr(t);if(s)return s;var F=br();try{lt(F,t)}catch(P){if(!(P instanceof TypeError))throw P;C(typeof o<"u","Missing signature argument to addFunction: "+t);var c=hr(t,o);lt(F,c)}return we.set(t,F),F},Ar=t=>{var o=e["_"+t];return C(o,"Cannot call unknown function "+t+", make sure it is exported"),o},Er=(t,o)=>{C(t.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),H.set(t,o)},Bt=t=>Wt(t),yr=t=>{var o=$e(t)+1,s=Bt(o);return ke(t,s,o),s},Lt=(t,o,s,F,c)=>{var P={string:L=>{var te=0;return L!=null&&L!==0&&(te=yr(L)),te},array:L=>{var te=Bt(L.length);return Er(L,te),te}};function p(L){return o==="string"?xe(L):o==="boolean"?!!L:L}var A=Ar(t),T=[],B=0;if(C(o!=="array",'Return type should not be "array".'),F)for(var V=0;V<F.length;V++){var W=P[s[V]];W?(B===0&&(B=fe()),T[V]=W(F[V])):T[V]=F[V]}var U=A(...T);function R(L){return B!==0&&he(B),p(L)}return U=R(U),U},Mr=(t,o,s,F)=>(...c)=>Lt(t,o,s,c),Sr=t=>{we.delete(ce(t)),lt(t,null),Ft.push(t)},Gr=(t,o,s)=>{if(C(o%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),C(typeof s=="number","stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),s??=2147483647,s<2)return 0;s-=2;for(var F=o,c=s<t.length*2?s/2:t.length,P=0;P<c;++P){var p=t.charCodeAt(P);K[o>>1]=p,o+=2}return K[o>>1]=0,o-F};l.createPreloadedFile=vn,l.staticInit();function Cr(){hn("fetchSettings")}var Nt={__assert_fail:pn,__syscall_fcntl64:On,__syscall_fstat64:kn,__syscall_ftruncate64:wn,__syscall_getdents64:Rn,__syscall_ioctl:In,__syscall_lstat64:jn,__syscall_newfstatat:Bn,__syscall_openat:Ln,__syscall_rmdir:Nn,__syscall_stat64:Vn,__syscall_unlinkat:Un,_abort_js:Wn,_emscripten_memcpy_js:zn,_emscripten_throw_longjmp:Hn,_gmtime_js:$n,_localtime_js:qn,_tzset_js:Qn,emscripten_date_now:Zn,emscripten_resize_heap:nr,environ_get:ir,environ_sizes_get:ar,fd_close:sr,fd_read:mr,fd_seek:Fr,fd_sync:lr,fd_write:cr,invoke_ii:kr,invoke_iii:wr,invoke_iiii:Rr,invoke_iiiii:jr,invoke_v:Br,invoke_vii:Lr,invoke_viii:Or,invoke_viiii:Ir,invoke_viiiiiiiii:Nr},ue=gn();e._PDFiumExt_Init=a("PDFiumExt_Init",0),e._FPDF_InitLibraryWithConfig=a("FPDF_InitLibraryWithConfig",1),e._PDFiumExt_OpenFileWriter=a("PDFiumExt_OpenFileWriter",0),e._PDFiumExt_GetFileWriterSize=a("PDFiumExt_GetFileWriterSize",1),e._PDFiumExt_GetFileWriterData=a("PDFiumExt_GetFileWriterData",3),e._PDFiumExt_CloseFileWriter=a("PDFiumExt_CloseFileWriter",1),e._PDFiumExt_SaveAsCopy=a("PDFiumExt_SaveAsCopy",2),e._FPDF_SaveAsCopy=a("FPDF_SaveAsCopy",3),e._PDFiumExt_OpenFormFillInfo=a("PDFiumExt_OpenFormFillInfo",0),e._PDFiumExt_CloseFormFillInfo=a("PDFiumExt_CloseFormFillInfo",1),e._PDFiumExt_InitFormFillEnvironment=a("PDFiumExt_InitFormFillEnvironment",2),e._FPDFDOC_InitFormFillEnvironment=a("FPDFDOC_InitFormFillEnvironment",2),e._PDFiumExt_ExitFormFillEnvironment=a("PDFiumExt_ExitFormFillEnvironment",1),e._FPDFDOC_ExitFormFillEnvironment=a("FPDFDOC_ExitFormFillEnvironment",1),e._EPDFNamedDest_SetDest=a("EPDFNamedDest_SetDest",3),e._EPDFNamedDest_Remove=a("EPDFNamedDest_Remove",2),e._EPDFDest_CreateView=a("EPDFDest_CreateView",4),e._EPDFDest_CreateXYZ=a("EPDFDest_CreateXYZ",7),e._EPDFDest_CreateRemoteView=a("EPDFDest_CreateRemoteView",5),e._EPDFDest_CreateRemoteXYZ=a("EPDFDest_CreateRemoteXYZ",8),e._EPDFAction_CreateGoTo=a("EPDFAction_CreateGoTo",2),e._EPDFAction_CreateGoToNamed=a("EPDFAction_CreateGoToNamed",2),e._EPDFAction_CreateLaunch=a("EPDFAction_CreateLaunch",2),e._EPDFAction_CreateRemoteGoToByName=a("EPDFAction_CreateRemoteGoToByName",3),e._EPDFAction_CreateRemoteGoToDest=a("EPDFAction_CreateRemoteGoToDest",3),e._EPDFAction_CreateURI=a("EPDFAction_CreateURI",2),e._EPDFBookmark_Create=a("EPDFBookmark_Create",2),e._EPDFBookmark_Delete=a("EPDFBookmark_Delete",2),e._EPDFBookmark_AppendChild=a("EPDFBookmark_AppendChild",3),e._EPDFBookmark_InsertAfter=a("EPDFBookmark_InsertAfter",4),e._EPDFBookmark_Clear=a("EPDFBookmark_Clear",1),e._EPDFBookmark_SetTitle=a("EPDFBookmark_SetTitle",2),e._EPDFBookmark_SetDest=a("EPDFBookmark_SetDest",3),e._EPDFBookmark_SetAction=a("EPDFBookmark_SetAction",3),e._EPDFBookmark_ClearTarget=a("EPDFBookmark_ClearTarget",1),e._EPDF_PNG_EncodeRGBA=a("EPDF_PNG_EncodeRGBA",6),e._FPDFAnnot_IsSupportedSubtype=a("FPDFAnnot_IsSupportedSubtype",1),e._FPDFPage_CreateAnnot=a("FPDFPage_CreateAnnot",2),e._FPDFPage_GetAnnotCount=a("FPDFPage_GetAnnotCount",1),e._FPDFPage_GetAnnot=a("FPDFPage_GetAnnot",2),e._FPDFPage_GetAnnotIndex=a("FPDFPage_GetAnnotIndex",2),e._FPDFPage_CloseAnnot=a("FPDFPage_CloseAnnot",1),e._FPDFPage_RemoveAnnot=a("FPDFPage_RemoveAnnot",2),e._FPDFAnnot_GetSubtype=a("FPDFAnnot_GetSubtype",1),e._FPDFAnnot_IsObjectSupportedSubtype=a("FPDFAnnot_IsObjectSupportedSubtype",1),e._FPDFAnnot_UpdateObject=a("FPDFAnnot_UpdateObject",2),e._FPDFAnnot_AddInkStroke=a("FPDFAnnot_AddInkStroke",3),e._FPDFAnnot_RemoveInkList=a("FPDFAnnot_RemoveInkList",1),e._FPDFAnnot_AppendObject=a("FPDFAnnot_AppendObject",2),e._FPDFAnnot_GetObjectCount=a("FPDFAnnot_GetObjectCount",1),e._FPDFAnnot_GetObject=a("FPDFAnnot_GetObject",2),e._FPDFAnnot_RemoveObject=a("FPDFAnnot_RemoveObject",2),e._FPDFAnnot_SetColor=a("FPDFAnnot_SetColor",6),e._FPDFAnnot_GetColor=a("FPDFAnnot_GetColor",6),e._FPDFAnnot_HasAttachmentPoints=a("FPDFAnnot_HasAttachmentPoints",1),e._FPDFAnnot_SetAttachmentPoints=a("FPDFAnnot_SetAttachmentPoints",3),e._FPDFAnnot_AppendAttachmentPoints=a("FPDFAnnot_AppendAttachmentPoints",2),e._FPDFAnnot_CountAttachmentPoints=a("FPDFAnnot_CountAttachmentPoints",1),e._FPDFAnnot_GetAttachmentPoints=a("FPDFAnnot_GetAttachmentPoints",3),e._FPDFAnnot_SetRect=a("FPDFAnnot_SetRect",2),e._FPDFAnnot_GetRect=a("FPDFAnnot_GetRect",2),e._FPDFAnnot_GetVertices=a("FPDFAnnot_GetVertices",3),e._FPDFAnnot_GetInkListCount=a("FPDFAnnot_GetInkListCount",1),e._FPDFAnnot_GetInkListPath=a("FPDFAnnot_GetInkListPath",4),e._FPDFAnnot_GetLine=a("FPDFAnnot_GetLine",3),e._FPDFAnnot_SetBorder=a("FPDFAnnot_SetBorder",4),e._FPDFAnnot_GetBorder=a("FPDFAnnot_GetBorder",4),e._FPDFAnnot_HasKey=a("FPDFAnnot_HasKey",2),e._FPDFAnnot_GetValueType=a("FPDFAnnot_GetValueType",2),e._FPDFAnnot_SetStringValue=a("FPDFAnnot_SetStringValue",3),e._FPDFAnnot_GetStringValue=a("FPDFAnnot_GetStringValue",4),e._FPDFAnnot_GetNumberValue=a("FPDFAnnot_GetNumberValue",3),e._FPDFAnnot_SetAP=a("FPDFAnnot_SetAP",3),e._FPDFAnnot_GetAP=a("FPDFAnnot_GetAP",4),e._FPDFAnnot_GetLinkedAnnot=a("FPDFAnnot_GetLinkedAnnot",2),e._FPDFAnnot_GetFlags=a("FPDFAnnot_GetFlags",1),e._FPDFAnnot_SetFlags=a("FPDFAnnot_SetFlags",2),e._FPDFAnnot_GetFormFieldFlags=a("FPDFAnnot_GetFormFieldFlags",2),e._FPDFAnnot_SetFormFieldFlags=a("FPDFAnnot_SetFormFieldFlags",3),e._FPDFAnnot_GetFormFieldAtPoint=a("FPDFAnnot_GetFormFieldAtPoint",3),e._FPDFAnnot_GetFormFieldName=a("FPDFAnnot_GetFormFieldName",4),e._FPDFAnnot_GetFormFieldType=a("FPDFAnnot_GetFormFieldType",2),e._FPDFAnnot_GetFormAdditionalActionJavaScript=a("FPDFAnnot_GetFormAdditionalActionJavaScript",5),e._FPDFAnnot_GetFormFieldAlternateName=a("FPDFAnnot_GetFormFieldAlternateName",4),e._FPDFAnnot_GetFormFieldValue=a("FPDFAnnot_GetFormFieldValue",4),e._FPDFAnnot_GetOptionCount=a("FPDFAnnot_GetOptionCount",2),e._FPDFAnnot_GetOptionLabel=a("FPDFAnnot_GetOptionLabel",5),e._FPDFAnnot_IsOptionSelected=a("FPDFAnnot_IsOptionSelected",3),e._FPDFAnnot_GetFontSize=a("FPDFAnnot_GetFontSize",3),e._FPDFAnnot_SetFontColor=a("FPDFAnnot_SetFontColor",5),e._FPDFAnnot_GetFontColor=a("FPDFAnnot_GetFontColor",5),e._FPDFAnnot_IsChecked=a("FPDFAnnot_IsChecked",2),e._FPDFAnnot_SetFocusableSubtypes=a("FPDFAnnot_SetFocusableSubtypes",3),e._FPDFAnnot_GetFocusableSubtypesCount=a("FPDFAnnot_GetFocusableSubtypesCount",1),e._FPDFAnnot_GetFocusableSubtypes=a("FPDFAnnot_GetFocusableSubtypes",3),e._FPDFAnnot_GetLink=a("FPDFAnnot_GetLink",1),e._FPDFAnnot_GetFormControlCount=a("FPDFAnnot_GetFormControlCount",2),e._FPDFAnnot_GetFormControlIndex=a("FPDFAnnot_GetFormControlIndex",2),e._FPDFAnnot_GetFormFieldExportValue=a("FPDFAnnot_GetFormFieldExportValue",4),e._FPDFAnnot_SetURI=a("FPDFAnnot_SetURI",2),e._FPDFAnnot_GetFileAttachment=a("FPDFAnnot_GetFileAttachment",1),e._FPDFAnnot_AddFileAttachment=a("FPDFAnnot_AddFileAttachment",2),e._EPDFAnnot_SetColor=a("EPDFAnnot_SetColor",5),e._EPDFAnnot_GetColor=a("EPDFAnnot_GetColor",5),e._EPDFAnnot_ClearColor=a("EPDFAnnot_ClearColor",2),e._EPDFAnnot_SetOpacity=a("EPDFAnnot_SetOpacity",2),e._EPDFAnnot_GetOpacity=a("EPDFAnnot_GetOpacity",2),e._EPDFAnnot_GetBorderEffect=a("EPDFAnnot_GetBorderEffect",2),e._EPDFAnnot_GetRectangleDifferences=a("EPDFAnnot_GetRectangleDifferences",5),e._EPDFAnnot_GetBorderDashPatternCount=a("EPDFAnnot_GetBorderDashPatternCount",1),e._EPDFAnnot_GetBorderDashPattern=a("EPDFAnnot_GetBorderDashPattern",3),e._EPDFAnnot_SetBorderDashPattern=a("EPDFAnnot_SetBorderDashPattern",3),e._EPDFAnnot_GetBorderStyle=a("EPDFAnnot_GetBorderStyle",2),e._EPDFAnnot_SetBorderStyle=a("EPDFAnnot_SetBorderStyle",3),e._EPDFAnnot_GenerateAppearance=a("EPDFAnnot_GenerateAppearance",1),e._EPDFAnnot_GenerateAppearanceWithBlend=a("EPDFAnnot_GenerateAppearanceWithBlend",2),e._EPDFAnnot_GetBlendMode=a("EPDFAnnot_GetBlendMode",1),e._EPDFAnnot_SetIntent=a("EPDFAnnot_SetIntent",2),e._EPDFAnnot_GetIntent=a("EPDFAnnot_GetIntent",3),e._EPDFAnnot_GetRichContent=a("EPDFAnnot_GetRichContent",3),e._EPDFAnnot_SetLineEndings=a("EPDFAnnot_SetLineEndings",3),e._EPDFAnnot_GetLineEndings=a("EPDFAnnot_GetLineEndings",3),e._EPDFAnnot_SetVertices=a("EPDFAnnot_SetVertices",3),e._EPDFAnnot_SetLine=a("EPDFAnnot_SetLine",3),e._EPDFAnnot_SetDefaultAppearance=a("EPDFAnnot_SetDefaultAppearance",6),e._EPDFAnnot_GetDefaultAppearance=a("EPDFAnnot_GetDefaultAppearance",6),e._EPDFAnnot_SetTextAlignment=a("EPDFAnnot_SetTextAlignment",2),e._EPDFAnnot_GetTextAlignment=a("EPDFAnnot_GetTextAlignment",1),e._EPDFAnnot_SetVerticalAlignment=a("EPDFAnnot_SetVerticalAlignment",2),e._EPDFAnnot_GetVerticalAlignment=a("EPDFAnnot_GetVerticalAlignment",1),e._EPDFPage_GetAnnotByName=a("EPDFPage_GetAnnotByName",2),e._EPDFPage_RemoveAnnotByName=a("EPDFPage_RemoveAnnotByName",2),e._EPDFAnnot_SetLinkedAnnot=a("EPDFAnnot_SetLinkedAnnot",3),e._EPDFPage_GetAnnotCountRaw=a("EPDFPage_GetAnnotCountRaw",2),e._EPDFPage_GetAnnotRaw=a("EPDFPage_GetAnnotRaw",3),e._EPDFPage_RemoveAnnotRaw=a("EPDFPage_RemoveAnnotRaw",3),e._EPDFAnnot_SetIcon=a("EPDFAnnot_SetIcon",2),e._EPDFAnnot_GetIcon=a("EPDFAnnot_GetIcon",1),e._EPDFAnnot_UpdateAppearanceToRect=a("EPDFAnnot_UpdateAppearanceToRect",2),e._EPDFPage_CreateAnnot=a("EPDFPage_CreateAnnot",2),e._FPDFDoc_GetAttachmentCount=a("FPDFDoc_GetAttachmentCount",1),e._FPDFDoc_AddAttachment=a("FPDFDoc_AddAttachment",2),e._FPDFDoc_GetAttachment=a("FPDFDoc_GetAttachment",2),e._FPDFDoc_DeleteAttachment=a("FPDFDoc_DeleteAttachment",2),e._FPDFAttachment_GetName=a("FPDFAttachment_GetName",3),e._FPDFAttachment_HasKey=a("FPDFAttachment_HasKey",2),e._FPDFAttachment_GetValueType=a("FPDFAttachment_GetValueType",2),e._FPDFAttachment_SetStringValue=a("FPDFAttachment_SetStringValue",3),e._FPDFAttachment_GetStringValue=a("FPDFAttachment_GetStringValue",4),e._FPDFAttachment_SetFile=a("FPDFAttachment_SetFile",4),e._FPDFAttachment_GetFile=a("FPDFAttachment_GetFile",4),e._FPDFAttachment_GetSubtype=a("FPDFAttachment_GetSubtype",3),e._EPDFAttachment_SetSubtype=a("EPDFAttachment_SetSubtype",2),e._EPDFAttachment_SetDescription=a("EPDFAttachment_SetDescription",2),e._EPDFAttachment_GetDescription=a("EPDFAttachment_GetDescription",3),e._EPDFAttachment_GetIntegerValue=a("EPDFAttachment_GetIntegerValue",3),e._FPDFCatalog_IsTagged=a("FPDFCatalog_IsTagged",1),e._FPDFCatalog_SetLanguage=a("FPDFCatalog_SetLanguage",2),e._EPDFCatalog_GetLanguage=a("EPDFCatalog_GetLanguage",3),e._FPDFAvail_Create=a("FPDFAvail_Create",2),e._FPDFAvail_Destroy=a("FPDFAvail_Destroy",1),e._FPDFAvail_IsDocAvail=a("FPDFAvail_IsDocAvail",2),e._FPDFAvail_GetDocument=a("FPDFAvail_GetDocument",2),e._FPDFAvail_GetFirstPageNum=a("FPDFAvail_GetFirstPageNum",1),e._FPDFAvail_IsPageAvail=a("FPDFAvail_IsPageAvail",3),e._FPDFAvail_IsFormAvail=a("FPDFAvail_IsFormAvail",2),e._FPDFAvail_IsLinearized=a("FPDFAvail_IsLinearized",1),e._FPDFBookmark_GetFirstChild=a("FPDFBookmark_GetFirstChild",2),e._FPDFBookmark_GetNextSibling=a("FPDFBookmark_GetNextSibling",2),e._FPDFBookmark_GetTitle=a("FPDFBookmark_GetTitle",3),e._FPDFBookmark_GetCount=a("FPDFBookmark_GetCount",1),e._FPDFBookmark_Find=a("FPDFBookmark_Find",2),e._FPDFBookmark_GetDest=a("FPDFBookmark_GetDest",2),e._FPDFBookmark_GetAction=a("FPDFBookmark_GetAction",1),e._FPDFAction_GetType=a("FPDFAction_GetType",1),e._FPDFAction_GetDest=a("FPDFAction_GetDest",2),e._FPDFAction_GetFilePath=a("FPDFAction_GetFilePath",3),e._FPDFAction_GetURIPath=a("FPDFAction_GetURIPath",4),e._FPDFDest_GetDestPageIndex=a("FPDFDest_GetDestPageIndex",2),e._FPDFDest_GetView=a("FPDFDest_GetView",3),e._FPDFDest_GetLocationInPage=a("FPDFDest_GetLocationInPage",7),e._FPDFLink_GetLinkAtPoint=a("FPDFLink_GetLinkAtPoint",3),e._FPDFLink_GetLinkZOrderAtPoint=a("FPDFLink_GetLinkZOrderAtPoint",3),e._FPDFLink_GetDest=a("FPDFLink_GetDest",2),e._FPDFLink_GetAction=a("FPDFLink_GetAction",1),e._FPDFLink_Enumerate=a("FPDFLink_Enumerate",3),e._FPDFLink_GetAnnot=a("FPDFLink_GetAnnot",2),e._FPDFLink_GetAnnotRect=a("FPDFLink_GetAnnotRect",2),e._FPDFLink_CountQuadPoints=a("FPDFLink_CountQuadPoints",1),e._FPDFLink_GetQuadPoints=a("FPDFLink_GetQuadPoints",3),e._FPDF_GetPageAAction=a("FPDF_GetPageAAction",2),e._FPDF_GetFileIdentifier=a("FPDF_GetFileIdentifier",4),e._FPDF_GetMetaText=a("FPDF_GetMetaText",4),e._FPDF_GetPageLabel=a("FPDF_GetPageLabel",4),e._EPDF_SetMetaText=a("EPDF_SetMetaText",3),e._EPDF_HasMetaText=a("EPDF_HasMetaText",2),e._EPDF_GetMetaTrapped=a("EPDF_GetMetaTrapped",1),e._EPDF_SetMetaTrapped=a("EPDF_SetMetaTrapped",2),e._EPDF_GetMetaKeyCount=a("EPDF_GetMetaKeyCount",2),e._EPDF_GetMetaKeyName=a("EPDF_GetMetaKeyName",5),e._FPDFPageObj_NewImageObj=a("FPDFPageObj_NewImageObj",1),e._FPDFImageObj_LoadJpegFile=a("FPDFImageObj_LoadJpegFile",4),e._FPDFImageObj_LoadJpegFileInline=a("FPDFImageObj_LoadJpegFileInline",4),e._FPDFImageObj_SetMatrix=a("FPDFImageObj_SetMatrix",7),e._FPDFImageObj_SetBitmap=a("FPDFImageObj_SetBitmap",4),e._FPDFImageObj_GetBitmap=a("FPDFImageObj_GetBitmap",1),e._FPDFImageObj_GetRenderedBitmap=a("FPDFImageObj_GetRenderedBitmap",3),e._FPDFImageObj_GetImageDataDecoded=a("FPDFImageObj_GetImageDataDecoded",3),e._FPDFImageObj_GetImageDataRaw=a("FPDFImageObj_GetImageDataRaw",3),e._FPDFImageObj_GetImageFilterCount=a("FPDFImageObj_GetImageFilterCount",1),e._FPDFImageObj_GetImageFilter=a("FPDFImageObj_GetImageFilter",4),e._FPDFImageObj_GetImageMetadata=a("FPDFImageObj_GetImageMetadata",3),e._FPDFImageObj_GetImagePixelSize=a("FPDFImageObj_GetImagePixelSize",3),e._FPDFImageObj_GetIccProfileDataDecoded=a("FPDFImageObj_GetIccProfileDataDecoded",5),e._FPDF_CreateNewDocument=a("FPDF_CreateNewDocument",0),e._FPDFPage_Delete=a("FPDFPage_Delete",2),e._FPDF_MovePages=a("FPDF_MovePages",4),e._FPDFPage_New=a("FPDFPage_New",4),e._FPDFPage_GetRotation=a("FPDFPage_GetRotation",1),e._FPDFPage_InsertObject=a("FPDFPage_InsertObject",2),e._FPDFPage_InsertObjectAtIndex=a("FPDFPage_InsertObjectAtIndex",3),e._FPDFPage_RemoveObject=a("FPDFPage_RemoveObject",2),e._FPDFPage_CountObjects=a("FPDFPage_CountObjects",1),e._FPDFPage_GetObject=a("FPDFPage_GetObject",2),e._FPDFPage_HasTransparency=a("FPDFPage_HasTransparency",1),e._FPDFPageObj_Destroy=a("FPDFPageObj_Destroy",1),e._FPDFPageObj_GetMarkedContentID=a("FPDFPageObj_GetMarkedContentID",1),e._FPDFPageObj_CountMarks=a("FPDFPageObj_CountMarks",1),e._FPDFPageObj_GetMark=a("FPDFPageObj_GetMark",2),e._FPDFPageObj_AddMark=a("FPDFPageObj_AddMark",2),e._FPDFPageObj_RemoveMark=a("FPDFPageObj_RemoveMark",2),e._FPDFPageObjMark_GetName=a("FPDFPageObjMark_GetName",4),e._FPDFPageObjMark_CountParams=a("FPDFPageObjMark_CountParams",1),e._FPDFPageObjMark_GetParamKey=a("FPDFPageObjMark_GetParamKey",5),e._FPDFPageObjMark_GetParamValueType=a("FPDFPageObjMark_GetParamValueType",2),e._FPDFPageObjMark_GetParamIntValue=a("FPDFPageObjMark_GetParamIntValue",3),e._FPDFPageObjMark_GetParamStringValue=a("FPDFPageObjMark_GetParamStringValue",5),e._FPDFPageObjMark_GetParamBlobValue=a("FPDFPageObjMark_GetParamBlobValue",5),e._FPDFPageObj_HasTransparency=a("FPDFPageObj_HasTransparency",1),e._FPDFPageObjMark_SetIntParam=a("FPDFPageObjMark_SetIntParam",5),e._FPDFPageObjMark_SetStringParam=a("FPDFPageObjMark_SetStringParam",5),e._FPDFPageObjMark_SetBlobParam=a("FPDFPageObjMark_SetBlobParam",6),e._FPDFPageObjMark_RemoveParam=a("FPDFPageObjMark_RemoveParam",3),e._FPDFPageObj_GetType=a("FPDFPageObj_GetType",1),e._FPDFPageObj_GetIsActive=a("FPDFPageObj_GetIsActive",2),e._FPDFPageObj_SetIsActive=a("FPDFPageObj_SetIsActive",2),e._FPDFPage_GenerateContent=a("FPDFPage_GenerateContent",1),e._FPDFPageObj_Transform=a("FPDFPageObj_Transform",7),e._FPDFPageObj_TransformF=a("FPDFPageObj_TransformF",2),e._FPDFPageObj_GetMatrix=a("FPDFPageObj_GetMatrix",2),e._FPDFPageObj_SetMatrix=a("FPDFPageObj_SetMatrix",2),e._FPDFPageObj_SetBlendMode=a("FPDFPageObj_SetBlendMode",2),e._FPDFPage_TransformAnnots=a("FPDFPage_TransformAnnots",7),e._FPDFPage_SetRotation=a("FPDFPage_SetRotation",2),e._FPDFPageObj_SetFillColor=a("FPDFPageObj_SetFillColor",5),e._FPDFPageObj_GetFillColor=a("FPDFPageObj_GetFillColor",5),e._FPDFPageObj_GetBounds=a("FPDFPageObj_GetBounds",5),e._FPDFPageObj_GetRotatedBounds=a("FPDFPageObj_GetRotatedBounds",2),e._FPDFPageObj_SetStrokeColor=a("FPDFPageObj_SetStrokeColor",5),e._FPDFPageObj_GetStrokeColor=a("FPDFPageObj_GetStrokeColor",5),e._FPDFPageObj_SetStrokeWidth=a("FPDFPageObj_SetStrokeWidth",2),e._FPDFPageObj_GetStrokeWidth=a("FPDFPageObj_GetStrokeWidth",2),e._FPDFPageObj_GetLineJoin=a("FPDFPageObj_GetLineJoin",1),e._FPDFPageObj_SetLineJoin=a("FPDFPageObj_SetLineJoin",2),e._FPDFPageObj_GetLineCap=a("FPDFPageObj_GetLineCap",1),e._FPDFPageObj_SetLineCap=a("FPDFPageObj_SetLineCap",2),e._FPDFPageObj_GetDashPhase=a("FPDFPageObj_GetDashPhase",2),e._FPDFPageObj_SetDashPhase=a("FPDFPageObj_SetDashPhase",2),e._FPDFPageObj_GetDashCount=a("FPDFPageObj_GetDashCount",1),e._FPDFPageObj_GetDashArray=a("FPDFPageObj_GetDashArray",3),e._FPDFPageObj_SetDashArray=a("FPDFPageObj_SetDashArray",4),e._FPDFFormObj_CountObjects=a("FPDFFormObj_CountObjects",1),e._FPDFFormObj_GetObject=a("FPDFFormObj_GetObject",2),e._FPDFFormObj_RemoveObject=a("FPDFFormObj_RemoveObject",2),e._FPDFPageObj_CreateNewPath=a("FPDFPageObj_CreateNewPath",2),e._FPDFPageObj_CreateNewRect=a("FPDFPageObj_CreateNewRect",4),e._FPDFPath_CountSegments=a("FPDFPath_CountSegments",1),e._FPDFPath_GetPathSegment=a("FPDFPath_GetPathSegment",2),e._FPDFPath_MoveTo=a("FPDFPath_MoveTo",3),e._FPDFPath_LineTo=a("FPDFPath_LineTo",3),e._FPDFPath_BezierTo=a("FPDFPath_BezierTo",7),e._FPDFPath_Close=a("FPDFPath_Close",1),e._FPDFPath_SetDrawMode=a("FPDFPath_SetDrawMode",3),e._FPDFPath_GetDrawMode=a("FPDFPath_GetDrawMode",3),e._FPDFPathSegment_GetPoint=a("FPDFPathSegment_GetPoint",3),e._FPDFPathSegment_GetType=a("FPDFPathSegment_GetType",1),e._FPDFPathSegment_GetClose=a("FPDFPathSegment_GetClose",1),e._FPDFPageObj_NewTextObj=a("FPDFPageObj_NewTextObj",3),e._FPDFText_SetText=a("FPDFText_SetText",2),e._FPDFText_SetCharcodes=a("FPDFText_SetCharcodes",3),e._FPDFText_LoadFont=a("FPDFText_LoadFont",5),e._FPDFText_LoadStandardFont=a("FPDFText_LoadStandardFont",2),e._FPDFText_LoadCidType2Font=a("FPDFText_LoadCidType2Font",6),e._FPDFTextObj_GetFontSize=a("FPDFTextObj_GetFontSize",2),e._FPDFTextObj_GetText=a("FPDFTextObj_GetText",4),e._FPDFTextObj_GetRenderedBitmap=a("FPDFTextObj_GetRenderedBitmap",4),e._FPDFFont_Close=a("FPDFFont_Close",1),e._FPDFPageObj_CreateTextObj=a("FPDFPageObj_CreateTextObj",3),e._FPDFTextObj_GetTextRenderMode=a("FPDFTextObj_GetTextRenderMode",1),e._FPDFTextObj_SetTextRenderMode=a("FPDFTextObj_SetTextRenderMode",2),e._FPDFTextObj_GetFont=a("FPDFTextObj_GetFont",1),e._FPDFFont_GetBaseFontName=a("FPDFFont_GetBaseFontName",3),e._FPDFFont_GetFamilyName=a("FPDFFont_GetFamilyName",3),e._FPDFFont_GetFontData=a("FPDFFont_GetFontData",4),e._FPDFFont_GetIsEmbedded=a("FPDFFont_GetIsEmbedded",1),e._FPDFFont_GetFlags=a("FPDFFont_GetFlags",1),e._FPDFFont_GetWeight=a("FPDFFont_GetWeight",1),e._FPDFFont_GetItalicAngle=a("FPDFFont_GetItalicAngle",2),e._FPDFFont_GetAscent=a("FPDFFont_GetAscent",3),e._FPDFFont_GetDescent=a("FPDFFont_GetDescent",3),e._FPDFFont_GetGlyphWidth=a("FPDFFont_GetGlyphWidth",4),e._FPDFFont_GetGlyphPath=a("FPDFFont_GetGlyphPath",3),e._FPDFGlyphPath_CountGlyphSegments=a("FPDFGlyphPath_CountGlyphSegments",1),e._FPDFGlyphPath_GetGlyphPathSegment=a("FPDFGlyphPath_GetGlyphPathSegment",2),e._EPDFText_RedactInRect=a("EPDFText_RedactInRect",4),e._EPDFText_RedactInQuads=a("EPDFText_RedactInQuads",5),e._FPDFDoc_GetPageMode=a("FPDFDoc_GetPageMode",1),e._FPDFPage_Flatten=a("FPDFPage_Flatten",2),e._FPDFPage_HasFormFieldAtPoint=a("FPDFPage_HasFormFieldAtPoint",4),e._FPDFPage_FormFieldZOrderAtPoint=a("FPDFPage_FormFieldZOrderAtPoint",4),e._malloc=a("malloc",1),e._free=a("free",1),e._FORM_OnMouseMove=a("FORM_OnMouseMove",5),e._FORM_OnMouseWheel=a("FORM_OnMouseWheel",6),e._FORM_OnFocus=a("FORM_OnFocus",5),e._FORM_OnLButtonDown=a("FORM_OnLButtonDown",5),e._FORM_OnLButtonUp=a("FORM_OnLButtonUp",5),e._FORM_OnLButtonDoubleClick=a("FORM_OnLButtonDoubleClick",5),e._FORM_OnRButtonDown=a("FORM_OnRButtonDown",5),e._FORM_OnRButtonUp=a("FORM_OnRButtonUp",5),e._FORM_OnKeyDown=a("FORM_OnKeyDown",4),e._FORM_OnKeyUp=a("FORM_OnKeyUp",4),e._FORM_OnChar=a("FORM_OnChar",4),e._FORM_GetFocusedText=a("FORM_GetFocusedText",4),e._FORM_GetSelectedText=a("FORM_GetSelectedText",4),e._FORM_ReplaceAndKeepSelection=a("FORM_ReplaceAndKeepSelection",3),e._FORM_ReplaceSelection=a("FORM_ReplaceSelection",3),e._FORM_SelectAllText=a("FORM_SelectAllText",2),e._FORM_CanUndo=a("FORM_CanUndo",2),e._FORM_CanRedo=a("FORM_CanRedo",2),e._FORM_Undo=a("FORM_Undo",2),e._FORM_Redo=a("FORM_Redo",2),e._FORM_ForceToKillFocus=a("FORM_ForceToKillFocus",1),e._FORM_GetFocusedAnnot=a("FORM_GetFocusedAnnot",3),e._FORM_SetFocusedAnnot=a("FORM_SetFocusedAnnot",2),e._FPDF_FFLDraw=a("FPDF_FFLDraw",9),e._FPDF_SetFormFieldHighlightColor=a("FPDF_SetFormFieldHighlightColor",3),e._FPDF_SetFormFieldHighlightAlpha=a("FPDF_SetFormFieldHighlightAlpha",2),e._FPDF_RemoveFormFieldHighlight=a("FPDF_RemoveFormFieldHighlight",1),e._FORM_OnAfterLoadPage=a("FORM_OnAfterLoadPage",2),e._FORM_OnBeforeClosePage=a("FORM_OnBeforeClosePage",2),e._FORM_DoDocumentJSAction=a("FORM_DoDocumentJSAction",1),e._FORM_DoDocumentOpenAction=a("FORM_DoDocumentOpenAction",1),e._FORM_DoDocumentAAction=a("FORM_DoDocumentAAction",2),e._FORM_DoPageAAction=a("FORM_DoPageAAction",3),e._FORM_SetIndexSelected=a("FORM_SetIndexSelected",4),e._FORM_IsIndexSelected=a("FORM_IsIndexSelected",3),e._FPDFDoc_GetJavaScriptActionCount=a("FPDFDoc_GetJavaScriptActionCount",1),e._FPDFDoc_GetJavaScriptAction=a("FPDFDoc_GetJavaScriptAction",2),e._FPDFDoc_CloseJavaScriptAction=a("FPDFDoc_CloseJavaScriptAction",1),e._FPDFJavaScriptAction_GetName=a("FPDFJavaScriptAction_GetName",3),e._FPDFJavaScriptAction_GetScript=a("FPDFJavaScriptAction_GetScript",3),e._FPDF_ImportPagesByIndex=a("FPDF_ImportPagesByIndex",5),e._FPDF_ImportPages=a("FPDF_ImportPages",4),e._FPDF_ImportNPagesToOne=a("FPDF_ImportNPagesToOne",5),e._FPDF_NewXObjectFromPage=a("FPDF_NewXObjectFromPage",3),e._FPDF_CloseXObject=a("FPDF_CloseXObject",1),e._FPDF_NewFormObjectFromXObject=a("FPDF_NewFormObjectFromXObject",1),e._FPDF_CopyViewerPreferences=a("FPDF_CopyViewerPreferences",2),e._FPDF_RenderPageBitmapWithColorScheme_Start=a("FPDF_RenderPageBitmapWithColorScheme_Start",10),e._FPDF_RenderPageBitmap_Start=a("FPDF_RenderPageBitmap_Start",9),e._FPDF_RenderPage_Continue=a("FPDF_RenderPage_Continue",2),e._FPDF_RenderPage_Close=a("FPDF_RenderPage_Close",1),e._FPDF_SaveWithVersion=a("FPDF_SaveWithVersion",4),e._FPDFText_GetCharIndexFromTextIndex=a("FPDFText_GetCharIndexFromTextIndex",2),e._FPDFText_GetTextIndexFromCharIndex=a("FPDFText_GetTextIndexFromCharIndex",2),e._FPDF_GetSignatureCount=a("FPDF_GetSignatureCount",1),e._FPDF_GetSignatureObject=a("FPDF_GetSignatureObject",2),e._FPDFSignatureObj_GetContents=a("FPDFSignatureObj_GetContents",3),e._FPDFSignatureObj_GetByteRange=a("FPDFSignatureObj_GetByteRange",3),e._FPDFSignatureObj_GetSubFilter=a("FPDFSignatureObj_GetSubFilter",3),e._FPDFSignatureObj_GetReason=a("FPDFSignatureObj_GetReason",3),e._FPDFSignatureObj_GetTime=a("FPDFSignatureObj_GetTime",3),e._FPDFSignatureObj_GetDocMDPPermission=a("FPDFSignatureObj_GetDocMDPPermission",1),e._FPDF_StructTree_GetForPage=a("FPDF_StructTree_GetForPage",1),e._FPDF_StructTree_Close=a("FPDF_StructTree_Close",1),e._FPDF_StructTree_CountChildren=a("FPDF_StructTree_CountChildren",1),e._FPDF_StructTree_GetChildAtIndex=a("FPDF_StructTree_GetChildAtIndex",2),e._FPDF_StructElement_GetAltText=a("FPDF_StructElement_GetAltText",3),e._FPDF_StructElement_GetActualText=a("FPDF_StructElement_GetActualText",3),e._FPDF_StructElement_GetID=a("FPDF_StructElement_GetID",3),e._FPDF_StructElement_GetLang=a("FPDF_StructElement_GetLang",3),e._FPDF_StructElement_GetAttributeCount=a("FPDF_StructElement_GetAttributeCount",1),e._FPDF_StructElement_GetAttributeAtIndex=a("FPDF_StructElement_GetAttributeAtIndex",2),e._FPDF_StructElement_GetStringAttribute=a("FPDF_StructElement_GetStringAttribute",4),e._FPDF_StructElement_GetMarkedContentID=a("FPDF_StructElement_GetMarkedContentID",1),e._FPDF_StructElement_GetType=a("FPDF_StructElement_GetType",3),e._FPDF_StructElement_GetObjType=a("FPDF_StructElement_GetObjType",3),e._FPDF_StructElement_GetTitle=a("FPDF_StructElement_GetTitle",3),e._FPDF_StructElement_CountChildren=a("FPDF_StructElement_CountChildren",1),e._FPDF_StructElement_GetChildAtIndex=a("FPDF_StructElement_GetChildAtIndex",2),e._FPDF_StructElement_GetChildMarkedContentID=a("FPDF_StructElement_GetChildMarkedContentID",2),e._FPDF_StructElement_GetParent=a("FPDF_StructElement_GetParent",1),e._FPDF_StructElement_Attr_GetCount=a("FPDF_StructElement_Attr_GetCount",1),e._FPDF_StructElement_Attr_GetName=a("FPDF_StructElement_Attr_GetName",5),e._FPDF_StructElement_Attr_GetValue=a("FPDF_StructElement_Attr_GetValue",2),e._FPDF_StructElement_Attr_GetType=a("FPDF_StructElement_Attr_GetType",1),e._FPDF_StructElement_Attr_GetBooleanValue=a("FPDF_StructElement_Attr_GetBooleanValue",2),e._FPDF_StructElement_Attr_GetNumberValue=a("FPDF_StructElement_Attr_GetNumberValue",2),e._FPDF_StructElement_Attr_GetStringValue=a("FPDF_StructElement_Attr_GetStringValue",4),e._FPDF_StructElement_Attr_GetBlobValue=a("FPDF_StructElement_Attr_GetBlobValue",4),e._FPDF_StructElement_Attr_CountChildren=a("FPDF_StructElement_Attr_CountChildren",1),e._FPDF_StructElement_Attr_GetChildAtIndex=a("FPDF_StructElement_Attr_GetChildAtIndex",2),e._FPDF_StructElement_GetMarkedContentIdCount=a("FPDF_StructElement_GetMarkedContentIdCount",1),e._FPDF_StructElement_GetMarkedContentIdAtIndex=a("FPDF_StructElement_GetMarkedContentIdAtIndex",2),e._FPDF_AddInstalledFont=a("FPDF_AddInstalledFont",3),e._FPDF_SetSystemFontInfo=a("FPDF_SetSystemFontInfo",1),e._FPDF_GetDefaultTTFMap=a("FPDF_GetDefaultTTFMap",0),e._FPDF_GetDefaultTTFMapCount=a("FPDF_GetDefaultTTFMapCount",0),e._FPDF_GetDefaultTTFMapEntry=a("FPDF_GetDefaultTTFMapEntry",1),e._FPDF_GetDefaultSystemFontInfo=a("FPDF_GetDefaultSystemFontInfo",0),e._FPDF_FreeDefaultSystemFontInfo=a("FPDF_FreeDefaultSystemFontInfo",1),e._FPDFText_LoadPage=a("FPDFText_LoadPage",1),e._FPDFText_ClosePage=a("FPDFText_ClosePage",1),e._FPDFText_CountChars=a("FPDFText_CountChars",1),e._FPDFText_GetUnicode=a("FPDFText_GetUnicode",2),e._FPDFText_GetTextObject=a("FPDFText_GetTextObject",2),e._FPDFText_IsGenerated=a("FPDFText_IsGenerated",2),e._FPDFText_IsHyphen=a("FPDFText_IsHyphen",2),e._FPDFText_HasUnicodeMapError=a("FPDFText_HasUnicodeMapError",2),e._FPDFText_GetFontSize=a("FPDFText_GetFontSize",2),e._FPDFText_GetFontInfo=a("FPDFText_GetFontInfo",5),e._FPDFText_GetFontWeight=a("FPDFText_GetFontWeight",2),e._FPDFText_GetFillColor=a("FPDFText_GetFillColor",6),e._FPDFText_GetStrokeColor=a("FPDFText_GetStrokeColor",6),e._FPDFText_GetCharAngle=a("FPDFText_GetCharAngle",2),e._FPDFText_GetCharBox=a("FPDFText_GetCharBox",6),e._FPDFText_GetLooseCharBox=a("FPDFText_GetLooseCharBox",3),e._FPDFText_GetMatrix=a("FPDFText_GetMatrix",3),e._FPDFText_GetCharOrigin=a("FPDFText_GetCharOrigin",4),e._FPDFText_GetCharIndexAtPos=a("FPDFText_GetCharIndexAtPos",5),e._FPDFText_GetText=a("FPDFText_GetText",4),e._FPDFText_CountRects=a("FPDFText_CountRects",3),e._FPDFText_GetRect=a("FPDFText_GetRect",6),e._FPDFText_GetBoundedText=a("FPDFText_GetBoundedText",7),e._FPDFText_FindStart=a("FPDFText_FindStart",4),e._FPDFText_FindNext=a("FPDFText_FindNext",1),e._FPDFText_FindPrev=a("FPDFText_FindPrev",1),e._FPDFText_GetSchResultIndex=a("FPDFText_GetSchResultIndex",1),e._FPDFText_GetSchCount=a("FPDFText_GetSchCount",1),e._FPDFText_FindClose=a("FPDFText_FindClose",1),e._FPDFLink_LoadWebLinks=a("FPDFLink_LoadWebLinks",1),e._FPDFLink_CountWebLinks=a("FPDFLink_CountWebLinks",1),e._FPDFLink_GetURL=a("FPDFLink_GetURL",4),e._FPDFLink_CountRects=a("FPDFLink_CountRects",2),e._FPDFLink_GetRect=a("FPDFLink_GetRect",7),e._FPDFLink_GetTextRange=a("FPDFLink_GetTextRange",4),e._FPDFLink_CloseWebLinks=a("FPDFLink_CloseWebLinks",1),e._FPDFPage_GetDecodedThumbnailData=a("FPDFPage_GetDecodedThumbnailData",3),e._FPDFPage_GetRawThumbnailData=a("FPDFPage_GetRawThumbnailData",3),e._FPDFPage_GetThumbnailAsBitmap=a("FPDFPage_GetThumbnailAsBitmap",1),e._FPDFPage_SetMediaBox=a("FPDFPage_SetMediaBox",5),e._FPDFPage_SetCropBox=a("FPDFPage_SetCropBox",5),e._FPDFPage_SetBleedBox=a("FPDFPage_SetBleedBox",5),e._FPDFPage_SetTrimBox=a("FPDFPage_SetTrimBox",5),e._FPDFPage_SetArtBox=a("FPDFPage_SetArtBox",5),e._FPDFPage_GetMediaBox=a("FPDFPage_GetMediaBox",5),e._FPDFPage_GetCropBox=a("FPDFPage_GetCropBox",5),e._FPDFPage_GetBleedBox=a("FPDFPage_GetBleedBox",5),e._FPDFPage_GetTrimBox=a("FPDFPage_GetTrimBox",5),e._FPDFPage_GetArtBox=a("FPDFPage_GetArtBox",5),e._FPDFPage_TransFormWithClip=a("FPDFPage_TransFormWithClip",3),e._FPDFPageObj_TransformClipPath=a("FPDFPageObj_TransformClipPath",7),e._FPDFPageObj_GetClipPath=a("FPDFPageObj_GetClipPath",1),e._FPDFClipPath_CountPaths=a("FPDFClipPath_CountPaths",1),e._FPDFClipPath_CountPathSegments=a("FPDFClipPath_CountPathSegments",2),e._FPDFClipPath_GetPathSegment=a("FPDFClipPath_GetPathSegment",3),e._FPDF_CreateClipPath=a("FPDF_CreateClipPath",4),e._FPDF_DestroyClipPath=a("FPDF_DestroyClipPath",1),e._FPDFPage_InsertClipPath=a("FPDFPage_InsertClipPath",2),e._FPDF_InitLibrary=a("FPDF_InitLibrary",0),e._FPDF_DestroyLibrary=a("FPDF_DestroyLibrary",0),e._FPDF_SetSandBoxPolicy=a("FPDF_SetSandBoxPolicy",2),e._FPDF_LoadDocument=a("FPDF_LoadDocument",2),e._FPDF_GetFormType=a("FPDF_GetFormType",1),e._FPDF_LoadXFA=a("FPDF_LoadXFA",1),e._FPDF_LoadMemDocument=a("FPDF_LoadMemDocument",3),e._FPDF_LoadMemDocument64=a("FPDF_LoadMemDocument64",3),e._FPDF_LoadCustomDocument=a("FPDF_LoadCustomDocument",2),e._FPDF_GetFileVersion=a("FPDF_GetFileVersion",2),e._FPDF_DocumentHasValidCrossReferenceTable=a("FPDF_DocumentHasValidCrossReferenceTable",1),e._FPDF_GetDocPermissions=a("FPDF_GetDocPermissions",1),e._FPDF_GetDocUserPermissions=a("FPDF_GetDocUserPermissions",1),e._FPDF_GetSecurityHandlerRevision=a("FPDF_GetSecurityHandlerRevision",1),e._FPDF_GetPageCount=a("FPDF_GetPageCount",1),e._FPDF_LoadPage=a("FPDF_LoadPage",2),e._FPDF_GetPageWidthF=a("FPDF_GetPageWidthF",1),e._FPDF_GetPageWidth=a("FPDF_GetPageWidth",1),e._FPDF_GetPageHeightF=a("FPDF_GetPageHeightF",1),e._FPDF_GetPageHeight=a("FPDF_GetPageHeight",1),e._FPDF_GetPageBoundingBox=a("FPDF_GetPageBoundingBox",2),e._FPDF_RenderPageBitmap=a("FPDF_RenderPageBitmap",8),e._FPDF_RenderPageBitmapWithMatrix=a("FPDF_RenderPageBitmapWithMatrix",5),e._EPDF_RenderAnnotBitmap=a("EPDF_RenderAnnotBitmap",6),e._FPDF_ClosePage=a("FPDF_ClosePage",1),e._FPDF_CloseDocument=a("FPDF_CloseDocument",1),e._FPDF_GetLastError=a("FPDF_GetLastError",0),e._FPDF_DeviceToPage=a("FPDF_DeviceToPage",10),e._FPDF_PageToDevice=a("FPDF_PageToDevice",10),e._FPDFBitmap_Create=a("FPDFBitmap_Create",3),e._FPDFBitmap_CreateEx=a("FPDFBitmap_CreateEx",5),e._FPDFBitmap_GetFormat=a("FPDFBitmap_GetFormat",1),e._FPDFBitmap_FillRect=a("FPDFBitmap_FillRect",6),e._FPDFBitmap_GetBuffer=a("FPDFBitmap_GetBuffer",1),e._FPDFBitmap_GetWidth=a("FPDFBitmap_GetWidth",1),e._FPDFBitmap_GetHeight=a("FPDFBitmap_GetHeight",1),e._FPDFBitmap_GetStride=a("FPDFBitmap_GetStride",1),e._FPDFBitmap_Destroy=a("FPDFBitmap_Destroy",1),e._FPDF_GetPageSizeByIndexF=a("FPDF_GetPageSizeByIndexF",3),e._EPDF_GetPageRotationByIndex=a("EPDF_GetPageRotationByIndex",2),e._FPDF_GetPageSizeByIndex=a("FPDF_GetPageSizeByIndex",4),e._FPDF_VIEWERREF_GetPrintScaling=a("FPDF_VIEWERREF_GetPrintScaling",1),e._FPDF_VIEWERREF_GetNumCopies=a("FPDF_VIEWERREF_GetNumCopies",1),e._FPDF_VIEWERREF_GetPrintPageRange=a("FPDF_VIEWERREF_GetPrintPageRange",1),e._FPDF_VIEWERREF_GetPrintPageRangeCount=a("FPDF_VIEWERREF_GetPrintPageRangeCount",1),e._FPDF_VIEWERREF_GetPrintPageRangeElement=a("FPDF_VIEWERREF_GetPrintPageRangeElement",2),e._FPDF_VIEWERREF_GetDuplex=a("FPDF_VIEWERREF_GetDuplex",1),e._FPDF_VIEWERREF_GetName=a("FPDF_VIEWERREF_GetName",4),e._FPDF_CountNamedDests=a("FPDF_CountNamedDests",1),e._FPDF_GetNamedDestByName=a("FPDF_GetNamedDestByName",2),e._FPDF_GetNamedDest=a("FPDF_GetNamedDest",4),e._FPDF_GetXFAPacketCount=a("FPDF_GetXFAPacketCount",1),e._FPDF_GetXFAPacketName=a("FPDF_GetXFAPacketName",4),e._FPDF_GetXFAPacketContent=a("FPDF_GetXFAPacketContent",5),e._FPDF_GetTrailerEnds=a("FPDF_GetTrailerEnds",3);var vr=a("fflush",1),Tr=a("emscripten_builtin_memalign",2),xr=a("strerror",1),ye=a("setThrew",2),Vt=()=>(Vt=ue.emscripten_stack_init)(),dt=()=>(dt=ue.emscripten_stack_get_end)(),Ut=t=>(Ut=ue._emscripten_stack_restore)(t),Wt=t=>(Wt=ue._emscripten_stack_alloc)(t),zt=()=>(zt=ue.emscripten_stack_get_current)();e.dynCall_ji=a("dynCall_ji",2),e.dynCall_jij=a("dynCall_jij",4),e.dynCall_iiij=a("dynCall_iiij",5),e.dynCall_iij=a("dynCall_iij",4),e.dynCall_j=a("dynCall_j",1),e.dynCall_jji=a("dynCall_jji",4),e.dynCall_iji=a("dynCall_iji",4),e.dynCall_viijii=a("dynCall_viijii",7),e.dynCall_iiji=a("dynCall_iiji",5),e.dynCall_jiji=a("dynCall_jiji",5),e.dynCall_iiiiij=a("dynCall_iiiiij",7),e.dynCall_iiiiijj=a("dynCall_iiiiijj",9),e.dynCall_iiiiiijj=a("dynCall_iiiiiijj",10),e.dynCall_viji=a("dynCall_viji",5);function Or(t,o,s,F){var c=fe();try{ce(t)(o,s,F)}catch(P){if(he(c),P!==P+0)throw P;ye(1,0)}}function kr(t,o){var s=fe();try{return ce(t)(o)}catch(F){if(he(s),F!==F+0)throw F;ye(1,0)}}function wr(t,o,s){var F=fe();try{return ce(t)(o,s)}catch(c){if(he(F),c!==c+0)throw c;ye(1,0)}}function Rr(t,o,s,F){var c=fe();try{return ce(t)(o,s,F)}catch(P){if(he(c),P!==P+0)throw P;ye(1,0)}}function Ir(t,o,s,F,c){var P=fe();try{ce(t)(o,s,F,c)}catch(p){if(he(P),p!==p+0)throw p;ye(1,0)}}function jr(t,o,s,F,c){var P=fe();try{return ce(t)(o,s,F,c)}catch(p){if(he(P),p!==p+0)throw p;ye(1,0)}}function Br(t){var o=fe();try{ce(t)()}catch(s){if(he(o),s!==s+0)throw s;ye(1,0)}}function Lr(t,o,s){var F=fe();try{ce(t)(o,s)}catch(c){if(he(F),c!==c+0)throw c;ye(1,0)}}function Nr(t,o,s,F,c,P,p,A,T,B){var V=fe();try{ce(t)(o,s,F,c,P,p,A,T,B)}catch(W){if(he(V),W!==W+0)throw W;ye(1,0)}}e.wasmExports=ue,e.ccall=Lt,e.cwrap=Mr,e.addFunction=pr,e.removeFunction=Sr,e.setValue=bn,e.getValue=Dn,e.UTF8ToString=xe,e.stringToUTF8=ke,e.UTF16ToString=_r,e.stringToUTF16=Gr;var Vr=["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertU32PairToI53","getTempRet0","setTempRet0","exitJS","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","emscriptenLog","readEmAsmArgs","jstoi_q","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asmjsMangle","HandleAllocator","getNativeTypeSize","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","reallyNegative","unSign","strLen","reSign","formatString","intArrayToString","AsciiToString","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","stringToNewUTF8","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","createDyncallWrapper","safeSetTimeout","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","ExceptionInfo","findMatchingCatch","Browser_asyncPrepareDataCounter","safeRequestAnimationFrame","arraySum","addDays","getSocketFromFD","getSocketAddress","FS_unlink","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","setErrNo","demangle","stackTrace"];Vr.forEach(fn);var Ur=["run","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","out","err","callMain","abort","wasmMemory","writeStackCookie","checkStackCookie","convertI32PairToI53Checked","stackSave","stackRestore","stackAlloc","ptrToString","zeroMemory","getHeapMax","growMemory","ENV","ERRNO_CODES","strError","DNS","Protocols","Sockets","initRandomFill","randomFill","timers","warnOnce","readEmAsmArgsArray","jstoi_s","getExecutableName","asyncLoad","alignMemory","mmapAlloc","wasmTable","noExitRuntime","getCFunc","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","freeTableIndexes","functionsInTableMap","getEmptyTableSlot","updateTableMap","getFunctionAddress","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","stringToUTF8Array","lengthBytesUTF8","intArrayFromString","stringToAscii","UTF16Decoder","stringToUTF8OnStack","writeArrayToMemory","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","getEnvStrings","doReadv","doWritev","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","Browser","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","isLeapYear","ydayFromDate","SYSCALLS","preloadPlugins","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar_buffer","FS_stdin_getChar","FS_createPath","FS_createDevice","FS_readFile","FS","FS_createDataFile","FS_createLazyFile","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","allocateUTF8","allocateUTF8OnStack","print","printErr"];Ur.forEach(vt);var et,Ht;We=function t(){et||$t(),et||(We=t)};function Wr(){Vt(),se()}function $t(){if(Ge>0||(Wr(),!Ht&&(Ht=1,on(),Ge>0)))return;function t(){et||(et=1,e.calledRun=1,!Y&&(an(),i(e),e.onRuntimeInitialized?.(),C(!e._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),sn()))}e.setStatus?(e.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>e.setStatus(""),1),t()},1)):t(),Se()}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();$t(),n=m;for(const t of Object.keys(e))t in r||Object.defineProperty(r,t,{configurable:!0,get(){Z(`Access to module property ('${t}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return n}})();const ht={EPDF_GetMetaKeyCount:[["number","boolean"],"number"],EPDF_GetMetaKeyName:[["number","number","boolean","number","number"],"number"],EPDF_GetMetaTrapped:[["number"],"number"],EPDF_GetPageRotationByIndex:[["number","number"],"number"],EPDF_HasMetaText:[["number","string"],"boolean"],EPDF_PNG_EncodeRGBA:[["number","number","number","number","number","number"],"number"],EPDF_RenderAnnotBitmap:[["number","number","number","number","number","number"],"boolean"],EPDF_SetMetaText:[["number","string","number"],"boolean"],EPDF_SetMetaTrapped:[["number","number"],"boolean"],EPDFAction_CreateGoTo:[["number","number"],"number"],EPDFAction_CreateGoToNamed:[["number","string"],"number"],EPDFAction_CreateLaunch:[["number","number"],"number"],EPDFAction_CreateRemoteGoToByName:[["number","number","number"],"number"],EPDFAction_CreateRemoteGoToDest:[["number","number","number"],"number"],EPDFAction_CreateURI:[["number","string"],"number"],EPDFAnnot_ClearColor:[["number","number"],"boolean"],EPDFAnnot_GenerateAppearance:[["number"],"boolean"],EPDFAnnot_GenerateAppearanceWithBlend:[["number","number"],"boolean"],EPDFAnnot_GetBlendMode:[["number"],"number"],EPDFAnnot_GetBorderDashPattern:[["number","number","number"],"boolean"],EPDFAnnot_GetBorderDashPatternCount:[["number"],"number"],EPDFAnnot_GetBorderEffect:[["number","number"],"boolean"],EPDFAnnot_GetBorderStyle:[["number","number"],"number"],EPDFAnnot_GetColor:[["number","number","number","number","number"],"boolean"],EPDFAnnot_GetDefaultAppearance:[["number","number","number","number","number","number"],"boolean"],EPDFAnnot_GetIcon:[["number"],"number"],EPDFAnnot_GetIntent:[["number","number","number"],"number"],EPDFAnnot_GetLineEndings:[["number","number","number"],"boolean"],EPDFAnnot_GetOpacity:[["number","number"],"boolean"],EPDFAnnot_GetRectangleDifferences:[["number","number","number","number","number"],"boolean"],EPDFAnnot_GetRichContent:[["number","number","number"],"number"],EPDFAnnot_GetTextAlignment:[["number"],"number"],EPDFAnnot_GetVerticalAlignment:[["number"],"number"],EPDFAnnot_SetBorderDashPattern:[["number","number","number"],"boolean"],EPDFAnnot_SetBorderStyle:[["number","number","number"],"boolean"],EPDFAnnot_SetColor:[["number","number","number","number","number"],"boolean"],EPDFAnnot_SetDefaultAppearance:[["number","number","number","number","number","number"],"boolean"],EPDFAnnot_SetIcon:[["number","number"],"boolean"],EPDFAnnot_SetIntent:[["number","string"],"boolean"],EPDFAnnot_SetLine:[["number","number","number"],"boolean"],EPDFAnnot_SetLineEndings:[["number","number","number"],"boolean"],EPDFAnnot_SetLinkedAnnot:[["number","string","number"],"boolean"],EPDFAnnot_SetOpacity:[["number","number"],"boolean"],EPDFAnnot_SetTextAlignment:[["number","number"],"boolean"],EPDFAnnot_SetVerticalAlignment:[["number","number"],"boolean"],EPDFAnnot_SetVertices:[["number","number","number"],"boolean"],EPDFAnnot_UpdateAppearanceToRect:[["number","number"],"boolean"],EPDFAttachment_GetDescription:[["number","number","number"],"number"],EPDFAttachment_GetIntegerValue:[["number","string","number"],"boolean"],EPDFAttachment_SetDescription:[["number","number"],"boolean"],EPDFAttachment_SetSubtype:[["number","string"],"boolean"],EPDFBookmark_AppendChild:[["number","number","number"],"number"],EPDFBookmark_Clear:[["number"],"boolean"],EPDFBookmark_ClearTarget:[["number"],"boolean"],EPDFBookmark_Create:[["number","number"],"number"],EPDFBookmark_Delete:[["number","number"],"boolean"],EPDFBookmark_InsertAfter:[["number","number","number","number"],"number"],EPDFBookmark_SetAction:[["number","number","number"],"boolean"],EPDFBookmark_SetDest:[["number","number","number"],"boolean"],EPDFBookmark_SetTitle:[["number","number"],"boolean"],EPDFCatalog_GetLanguage:[["number","number","number"],"number"],EPDFDest_CreateRemoteView:[["number","number","number","number","number"],"number"],EPDFDest_CreateRemoteXYZ:[["number","number","boolean","number","boolean","number","boolean","number"],"number"],EPDFDest_CreateView:[["number","number","number","number"],"number"],EPDFDest_CreateXYZ:[["number","boolean","number","boolean","number","boolean","number"],"number"],EPDFNamedDest_Remove:[["number","string"],"boolean"],EPDFNamedDest_SetDest:[["number","string","number"],"boolean"],EPDFPage_CreateAnnot:[["number","number"],"number"],EPDFPage_GetAnnotByName:[["number","number"],"number"],EPDFPage_GetAnnotCountRaw:[["number","number"],"number"],EPDFPage_GetAnnotRaw:[["number","number","number"],"number"],EPDFPage_RemoveAnnotByName:[["number","number"],"boolean"],EPDFPage_RemoveAnnotRaw:[["number","number","number"],"boolean"],EPDFText_RedactInQuads:[["number","number","number","boolean","boolean"],"boolean"],EPDFText_RedactInRect:[["number","number","boolean","boolean"],"boolean"],FORM_CanRedo:[["number","number"],"boolean"],FORM_CanUndo:[["number","number"],"boolean"],FORM_DoDocumentAAction:[["number","number"],null],FORM_DoDocumentJSAction:[["number"],null],FORM_DoDocumentOpenAction:[["number"],null],FORM_DoPageAAction:[["number","number","number"],null],FORM_ForceToKillFocus:[["number"],"boolean"],FORM_GetFocusedAnnot:[["number","number","number"],"boolean"],FORM_GetFocusedText:[["number","number","number","number"],"number"],FORM_GetSelectedText:[["number","number","number","number"],"number"],FORM_IsIndexSelected:[["number","number","number"],"boolean"],FORM_OnAfterLoadPage:[["number","number"],null],FORM_OnBeforeClosePage:[["number","number"],null],FORM_OnChar:[["number","number","number","number"],"boolean"],FORM_OnFocus:[["number","number","number","number","number"],"boolean"],FORM_OnKeyDown:[["number","number","number","number"],"boolean"],FORM_OnKeyUp:[["number","number","number","number"],"boolean"],FORM_OnLButtonDoubleClick:[["number","number","number","number","number"],"boolean"],FORM_OnLButtonDown:[["number","number","number","number","number"],"boolean"],FORM_OnLButtonUp:[["number","number","number","number","number"],"boolean"],FORM_OnMouseMove:[["number","number","number","number","number"],"boolean"],FORM_OnMouseWheel:[["number","number","number","number","number","number"],"boolean"],FORM_OnRButtonDown:[["number","number","number","number","number"],"boolean"],FORM_OnRButtonUp:[["number","number","number","number","number"],"boolean"],FORM_Redo:[["number","number"],"boolean"],FORM_ReplaceAndKeepSelection:[["number","number","number"],null],FORM_ReplaceSelection:[["number","number","number"],null],FORM_SelectAllText:[["number","number"],"boolean"],FORM_SetFocusedAnnot:[["number","number"],"boolean"],FORM_SetIndexSelected:[["number","number","number","boolean"],"boolean"],FORM_Undo:[["number","number"],"boolean"],FPDF_AddInstalledFont:[["number","number","number"],null],FPDF_CloseDocument:[["number"],null],FPDF_ClosePage:[["number"],null],FPDF_CloseXObject:[["number"],null],FPDF_CopyViewerPreferences:[["number","number"],"boolean"],FPDF_CountNamedDests:[["number"],"number"],FPDF_CreateClipPath:[["number","number","number","number"],"number"],FPDF_CreateNewDocument:[[],"number"],FPDF_DestroyClipPath:[["number"],null],FPDF_DestroyLibrary:[[],null],FPDF_DeviceToPage:[["number","number","number","number","number","number","number","number","number","number"],"boolean"],FPDF_DocumentHasValidCrossReferenceTable:[["number"],"boolean"],FPDF_FFLDraw:[["number","number","number","number","number","number","number","number","number"],null],FPDF_FreeDefaultSystemFontInfo:[["number"],null],FPDF_GetDefaultSystemFontInfo:[[],"number"],FPDF_GetDefaultTTFMap:[[],"number"],FPDF_GetDefaultTTFMapCount:[[],"number"],FPDF_GetDefaultTTFMapEntry:[["number"],"number"],FPDF_GetDocPermissions:[["number"],"number"],FPDF_GetDocUserPermissions:[["number"],"number"],FPDF_GetFileIdentifier:[["number","number","number","number"],"number"],FPDF_GetFileVersion:[["number","number"],"boolean"],FPDF_GetFormType:[["number"],"number"],FPDF_GetLastError:[[],"number"],FPDF_GetMetaText:[["number","string","number","number"],"number"],FPDF_GetNamedDest:[["number","number","number","number"],"number"],FPDF_GetNamedDestByName:[["number","string"],"number"],FPDF_GetPageAAction:[["number","number"],"number"],FPDF_GetPageBoundingBox:[["number","number"],"boolean"],FPDF_GetPageCount:[["number"],"number"],FPDF_GetPageHeight:[["number"],"number"],FPDF_GetPageHeightF:[["number"],"number"],FPDF_GetPageLabel:[["number","number","number","number"],"number"],FPDF_GetPageSizeByIndex:[["number","number","number","number"],"number"],FPDF_GetPageSizeByIndexF:[["number","number","number"],"boolean"],FPDF_GetPageWidth:[["number"],"number"],FPDF_GetPageWidthF:[["number"],"number"],FPDF_GetSecurityHandlerRevision:[["number"],"number"],FPDF_GetSignatureCount:[["number"],"number"],FPDF_GetSignatureObject:[["number","number"],"number"],FPDF_GetTrailerEnds:[["number","number","number"],"number"],FPDF_GetXFAPacketContent:[["number","number","number","number","number"],"boolean"],FPDF_GetXFAPacketCount:[["number"],"number"],FPDF_GetXFAPacketName:[["number","number","number","number"],"number"],FPDF_ImportNPagesToOne:[["number","number","number","number","number"],"number"],FPDF_ImportPages:[["number","number","string","number"],"boolean"],FPDF_ImportPagesByIndex:[["number","number","number","number","number"],"boolean"],FPDF_InitLibrary:[[],null],FPDF_InitLibraryWithConfig:[["number"],null],FPDF_LoadCustomDocument:[["number","string"],"number"],FPDF_LoadDocument:[["number","string"],"number"],FPDF_LoadMemDocument:[["number","number","string"],"number"],FPDF_LoadMemDocument64:[["number","number","string"],"number"],FPDF_LoadPage:[["number","number"],"number"],FPDF_LoadXFA:[["number"],"boolean"],FPDF_MovePages:[["number","number","number","number"],"boolean"],FPDF_NewFormObjectFromXObject:[["number"],"number"],FPDF_NewXObjectFromPage:[["number","number","number"],"number"],FPDF_PageToDevice:[["number","number","number","number","number","number","number","number","number","number"],"boolean"],FPDF_RemoveFormFieldHighlight:[["number"],null],FPDF_RenderPage_Close:[["number"],null],FPDF_RenderPage_Continue:[["number","number"],"number"],FPDF_RenderPageBitmap:[["number","number","number","number","number","number","number","number"],null],FPDF_RenderPageBitmap_Start:[["number","number","number","number","number","number","number","number","number"],"number"],FPDF_RenderPageBitmapWithColorScheme_Start:[["number","number","number","number","number","number","number","number","number","number"],"number"],FPDF_RenderPageBitmapWithMatrix:[["number","number","number","number","number"],null],FPDF_SaveAsCopy:[["number","number","number"],"boolean"],FPDF_SaveWithVersion:[["number","number","number","number"],"boolean"],FPDF_SetFormFieldHighlightAlpha:[["number","number"],null],FPDF_SetFormFieldHighlightColor:[["number","number","number"],null],FPDF_SetSandBoxPolicy:[["number","boolean"],null],FPDF_SetSystemFontInfo:[["number"],null],FPDF_StructElement_Attr_CountChildren:[["number"],"number"],FPDF_StructElement_Attr_GetBlobValue:[["number","number","number","number"],"boolean"],FPDF_StructElement_Attr_GetBooleanValue:[["number","number"],"boolean"],FPDF_StructElement_Attr_GetChildAtIndex:[["number","number"],"number"],FPDF_StructElement_Attr_GetCount:[["number"],"number"],FPDF_StructElement_Attr_GetName:[["number","number","number","number","number"],"boolean"],FPDF_StructElement_Attr_GetNumberValue:[["number","number"],"boolean"],FPDF_StructElement_Attr_GetStringValue:[["number","number","number","number"],"boolean"],FPDF_StructElement_Attr_GetType:[["number"],"number"],FPDF_StructElement_Attr_GetValue:[["number","string"],"number"],FPDF_StructElement_CountChildren:[["number"],"number"],FPDF_StructElement_GetActualText:[["number","number","number"],"number"],FPDF_StructElement_GetAltText:[["number","number","number"],"number"],FPDF_StructElement_GetAttributeAtIndex:[["number","number"],"number"],FPDF_StructElement_GetAttributeCount:[["number"],"number"],FPDF_StructElement_GetChildAtIndex:[["number","number"],"number"],FPDF_StructElement_GetChildMarkedContentID:[["number","number"],"number"],FPDF_StructElement_GetID:[["number","number","number"],"number"],FPDF_StructElement_GetLang:[["number","number","number"],"number"],FPDF_StructElement_GetMarkedContentID:[["number"],"number"],FPDF_StructElement_GetMarkedContentIdAtIndex:[["number","number"],"number"],FPDF_StructElement_GetMarkedContentIdCount:[["number"],"number"],FPDF_StructElement_GetObjType:[["number","number","number"],"number"],FPDF_StructElement_GetParent:[["number"],"number"],FPDF_StructElement_GetStringAttribute:[["number","string","number","number"],"number"],FPDF_StructElement_GetTitle:[["number","number","number"],"number"],FPDF_StructElement_GetType:[["number","number","number"],"number"],FPDF_StructTree_Close:[["number"],null],FPDF_StructTree_CountChildren:[["number"],"number"],FPDF_StructTree_GetChildAtIndex:[["number","number"],"number"],FPDF_StructTree_GetForPage:[["number"],"number"],FPDF_VIEWERREF_GetDuplex:[["number"],"number"],FPDF_VIEWERREF_GetName:[["number","string","number","number"],"number"],FPDF_VIEWERREF_GetNumCopies:[["number"],"number"],FPDF_VIEWERREF_GetPrintPageRange:[["number"],"number"],FPDF_VIEWERREF_GetPrintPageRangeCount:[["number"],"number"],FPDF_VIEWERREF_GetPrintPageRangeElement:[["number","number"],"number"],FPDF_VIEWERREF_GetPrintScaling:[["number"],"boolean"],FPDFAction_GetDest:[["number","number"],"number"],FPDFAction_GetFilePath:[["number","number","number"],"number"],FPDFAction_GetType:[["number"],"number"],FPDFAction_GetURIPath:[["number","number","number","number"],"number"],FPDFAnnot_AddFileAttachment:[["number","number"],"number"],FPDFAnnot_AddInkStroke:[["number","number","number"],"number"],FPDFAnnot_AppendAttachmentPoints:[["number","number"],"boolean"],FPDFAnnot_AppendObject:[["number","number"],"boolean"],FPDFAnnot_CountAttachmentPoints:[["number"],"number"],FPDFAnnot_GetAP:[["number","number","number","number"],"number"],FPDFAnnot_GetAttachmentPoints:[["number","number","number"],"boolean"],FPDFAnnot_GetBorder:[["number","number","number","number"],"boolean"],FPDFAnnot_GetColor:[["number","number","number","number","number","number"],"boolean"],FPDFAnnot_GetFileAttachment:[["number"],"number"],FPDFAnnot_GetFlags:[["number"],"number"],FPDFAnnot_GetFocusableSubtypes:[["number","number","number"],"boolean"],FPDFAnnot_GetFocusableSubtypesCount:[["number"],"number"],FPDFAnnot_GetFontColor:[["number","number","number","number","number"],"boolean"],FPDFAnnot_GetFontSize:[["number","number","number"],"boolean"],FPDFAnnot_GetFormAdditionalActionJavaScript:[["number","number","number","number","number"],"number"],FPDFAnnot_GetFormControlCount:[["number","number"],"number"],FPDFAnnot_GetFormControlIndex:[["number","number"],"number"],FPDFAnnot_GetFormFieldAlternateName:[["number","number","number","number"],"number"],FPDFAnnot_GetFormFieldAtPoint:[["number","number","number"],"number"],FPDFAnnot_GetFormFieldExportValue:[["number","number","number","number"],"number"],FPDFAnnot_GetFormFieldFlags:[["number","number"],"number"],FPDFAnnot_GetFormFieldName:[["number","number","number","number"],"number"],FPDFAnnot_GetFormFieldType:[["number","number"],"number"],FPDFAnnot_GetFormFieldValue:[["number","number","number","number"],"number"],FPDFAnnot_GetInkListCount:[["number"],"number"],FPDFAnnot_GetInkListPath:[["number","number","number","number"],"number"],FPDFAnnot_GetLine:[["number","number","number"],"boolean"],FPDFAnnot_GetLink:[["number"],"number"],FPDFAnnot_GetLinkedAnnot:[["number","string"],"number"],FPDFAnnot_GetNumberValue:[["number","string","number"],"boolean"],FPDFAnnot_GetObject:[["number","number"],"number"],FPDFAnnot_GetObjectCount:[["number"],"number"],FPDFAnnot_GetOptionCount:[["number","number"],"number"],FPDFAnnot_GetOptionLabel:[["number","number","number","number","number"],"number"],FPDFAnnot_GetRect:[["number","number"],"boolean"],FPDFAnnot_GetStringValue:[["number","string","number","number"],"number"],FPDFAnnot_GetSubtype:[["number"],"number"],FPDFAnnot_GetValueType:[["number","string"],"number"],FPDFAnnot_GetVertices:[["number","number","number"],"number"],FPDFAnnot_HasAttachmentPoints:[["number"],"boolean"],FPDFAnnot_HasKey:[["number","string"],"boolean"],FPDFAnnot_IsChecked:[["number","number"],"boolean"],FPDFAnnot_IsObjectSupportedSubtype:[["number"],"boolean"],FPDFAnnot_IsOptionSelected:[["number","number","number"],"boolean"],FPDFAnnot_IsSupportedSubtype:[["number"],"boolean"],FPDFAnnot_RemoveInkList:[["number"],"boolean"],FPDFAnnot_RemoveObject:[["number","number"],"boolean"],FPDFAnnot_SetAP:[["number","number","number"],"boolean"],FPDFAnnot_SetAttachmentPoints:[["number","number","number"],"boolean"],FPDFAnnot_SetBorder:[["number","number","number","number"],"boolean"],FPDFAnnot_SetColor:[["number","number","number","number","number","number"],"boolean"],FPDFAnnot_SetFlags:[["number","number"],"boolean"],FPDFAnnot_SetFocusableSubtypes:[["number","number","number"],"boolean"],FPDFAnnot_SetFontColor:[["number","number","number","number","number"],"boolean"],FPDFAnnot_SetFormFieldFlags:[["number","number","number"],"boolean"],FPDFAnnot_SetRect:[["number","number"],"boolean"],FPDFAnnot_SetStringValue:[["number","string","number"],"boolean"],FPDFAnnot_SetURI:[["number","number"],"boolean"],FPDFAnnot_UpdateObject:[["number","number"],"boolean"],FPDFAttachment_GetFile:[["number","number","number","number"],"boolean"],FPDFAttachment_GetName:[["number","number","number"],"number"],FPDFAttachment_GetStringValue:[["number","string","number","number"],"number"],FPDFAttachment_GetSubtype:[["number","number","number"],"number"],FPDFAttachment_GetValueType:[["number","string"],"number"],FPDFAttachment_HasKey:[["number","string"],"boolean"],FPDFAttachment_SetFile:[["number","number","number","number"],"boolean"],FPDFAttachment_SetStringValue:[["number","string","number"],"boolean"],FPDFAvail_Create:[["number","number"],"number"],FPDFAvail_Destroy:[["number"],null],FPDFAvail_GetDocument:[["number","string"],"number"],FPDFAvail_GetFirstPageNum:[["number"],"number"],FPDFAvail_IsDocAvail:[["number","number"],"number"],FPDFAvail_IsFormAvail:[["number","number"],"number"],FPDFAvail_IsLinearized:[["number"],"number"],FPDFAvail_IsPageAvail:[["number","number","number"],"number"],FPDFBitmap_Create:[["number","number","number"],"number"],FPDFBitmap_CreateEx:[["number","number","number","number","number"],"number"],FPDFBitmap_Destroy:[["number"],null],FPDFBitmap_FillRect:[["number","number","number","number","number","number"],"boolean"],FPDFBitmap_GetBuffer:[["number"],"number"],FPDFBitmap_GetFormat:[["number"],"number"],FPDFBitmap_GetHeight:[["number"],"number"],FPDFBitmap_GetStride:[["number"],"number"],FPDFBitmap_GetWidth:[["number"],"number"],FPDFBookmark_Find:[["number","number"],"number"],FPDFBookmark_GetAction:[["number"],"number"],FPDFBookmark_GetCount:[["number"],"number"],FPDFBookmark_GetDest:[["number","number"],"number"],FPDFBookmark_GetFirstChild:[["number","number"],"number"],FPDFBookmark_GetNextSibling:[["number","number"],"number"],FPDFBookmark_GetTitle:[["number","number","number"],"number"],FPDFCatalog_IsTagged:[["number"],"boolean"],FPDFCatalog_SetLanguage:[["number","string"],"boolean"],FPDFClipPath_CountPaths:[["number"],"number"],FPDFClipPath_CountPathSegments:[["number","number"],"number"],FPDFClipPath_GetPathSegment:[["number","number","number"],"number"],FPDFDest_GetDestPageIndex:[["number","number"],"number"],FPDFDest_GetLocationInPage:[["number","number","number","number","number","number","number"],"boolean"],FPDFDest_GetView:[["number","number","number"],"number"],FPDFDoc_AddAttachment:[["number","number"],"number"],FPDFDoc_CloseJavaScriptAction:[["number"],null],FPDFDoc_DeleteAttachment:[["number","number"],"boolean"],FPDFDOC_ExitFormFillEnvironment:[["number"],null],FPDFDoc_GetAttachment:[["number","number"],"number"],FPDFDoc_GetAttachmentCount:[["number"],"number"],FPDFDoc_GetJavaScriptAction:[["number","number"],"number"],FPDFDoc_GetJavaScriptActionCount:[["number"],"number"],FPDFDoc_GetPageMode:[["number"],"number"],FPDFDOC_InitFormFillEnvironment:[["number","number"],"number"],FPDFFont_Close:[["number"],null],FPDFFont_GetAscent:[["number","number","number"],"boolean"],FPDFFont_GetBaseFontName:[["number","number","number"],"number"],FPDFFont_GetDescent:[["number","number","number"],"boolean"],FPDFFont_GetFamilyName:[["number","number","number"],"number"],FPDFFont_GetFlags:[["number"],"number"],FPDFFont_GetFontData:[["number","number","number","number"],"boolean"],FPDFFont_GetGlyphPath:[["number","number","number"],"number"],FPDFFont_GetGlyphWidth:[["number","number","number","number"],"boolean"],FPDFFont_GetIsEmbedded:[["number"],"number"],FPDFFont_GetItalicAngle:[["number","number"],"boolean"],FPDFFont_GetWeight:[["number"],"number"],FPDFFormObj_CountObjects:[["number"],"number"],FPDFFormObj_GetObject:[["number","number"],"number"],FPDFFormObj_RemoveObject:[["number","number"],"boolean"],FPDFGlyphPath_CountGlyphSegments:[["number"],"number"],FPDFGlyphPath_GetGlyphPathSegment:[["number","number"],"number"],FPDFImageObj_GetBitmap:[["number"],"number"],FPDFImageObj_GetIccProfileDataDecoded:[["number","number","number","number","number"],"boolean"],FPDFImageObj_GetImageDataDecoded:[["number","number","number"],"number"],FPDFImageObj_GetImageDataRaw:[["number","number","number"],"number"],FPDFImageObj_GetImageFilter:[["number","number","number","number"],"number"],FPDFImageObj_GetImageFilterCount:[["number"],"number"],FPDFImageObj_GetImageMetadata:[["number","number","number"],"boolean"],FPDFImageObj_GetImagePixelSize:[["number","number","number"],"boolean"],FPDFImageObj_GetRenderedBitmap:[["number","number","number"],"number"],FPDFImageObj_LoadJpegFile:[["number","number","number","number"],"boolean"],FPDFImageObj_LoadJpegFileInline:[["number","number","number","number"],"boolean"],FPDFImageObj_SetBitmap:[["number","number","number","number"],"boolean"],FPDFImageObj_SetMatrix:[["number","number","number","number","number","number","number"],"boolean"],FPDFJavaScriptAction_GetName:[["number","number","number"],"number"],FPDFJavaScriptAction_GetScript:[["number","number","number"],"number"],FPDFLink_CloseWebLinks:[["number"],null],FPDFLink_CountQuadPoints:[["number"],"number"],FPDFLink_CountRects:[["number","number"],"number"],FPDFLink_CountWebLinks:[["number"],"number"],FPDFLink_Enumerate:[["number","number","number"],"boolean"],FPDFLink_GetAction:[["number"],"number"],FPDFLink_GetAnnot:[["number","number"],"number"],FPDFLink_GetAnnotRect:[["number","number"],"boolean"],FPDFLink_GetDest:[["number","number"],"number"],FPDFLink_GetLinkAtPoint:[["number","number","number"],"number"],FPDFLink_GetLinkZOrderAtPoint:[["number","number","number"],"number"],FPDFLink_GetQuadPoints:[["number","number","number"],"boolean"],FPDFLink_GetRect:[["number","number","number","number","number","number","number"],"boolean"],FPDFLink_GetTextRange:[["number","number","number","number"],"boolean"],FPDFLink_GetURL:[["number","number","number","number"],"number"],FPDFLink_LoadWebLinks:[["number"],"number"],FPDFPage_CloseAnnot:[["number"],null],FPDFPage_CountObjects:[["number"],"number"],FPDFPage_CreateAnnot:[["number","number"],"number"],FPDFPage_Delete:[["number","number"],null],FPDFPage_Flatten:[["number","number"],"number"],FPDFPage_FormFieldZOrderAtPoint:[["number","number","number","number"],"number"],FPDFPage_GenerateContent:[["number"],"boolean"],FPDFPage_GetAnnot:[["number","number"],"number"],FPDFPage_GetAnnotCount:[["number"],"number"],FPDFPage_GetAnnotIndex:[["number","number"],"number"],FPDFPage_GetArtBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetBleedBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetCropBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetDecodedThumbnailData:[["number","number","number"],"number"],FPDFPage_GetMediaBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetObject:[["number","number"],"number"],FPDFPage_GetRawThumbnailData:[["number","number","number"],"number"],FPDFPage_GetRotation:[["number"],"number"],FPDFPage_GetThumbnailAsBitmap:[["number"],"number"],FPDFPage_GetTrimBox:[["number","number","number","number","number"],"boolean"],FPDFPage_HasFormFieldAtPoint:[["number","number","number","number"],"number"],FPDFPage_HasTransparency:[["number"],"boolean"],FPDFPage_InsertClipPath:[["number","number"],null],FPDFPage_InsertObject:[["number","number"],null],FPDFPage_InsertObjectAtIndex:[["number","number","number"],"boolean"],FPDFPage_New:[["number","number","number","number"],"number"],FPDFPage_RemoveAnnot:[["number","number"],"boolean"],FPDFPage_RemoveObject:[["number","number"],"boolean"],FPDFPage_SetArtBox:[["number","number","number","number","number"],null],FPDFPage_SetBleedBox:[["number","number","number","number","number"],null],FPDFPage_SetCropBox:[["number","number","number","number","number"],null],FPDFPage_SetMediaBox:[["number","number","number","number","number"],null],FPDFPage_SetRotation:[["number","number"],null],FPDFPage_SetTrimBox:[["number","number","number","number","number"],null],FPDFPage_TransformAnnots:[["number","number","number","number","number","number","number"],null],FPDFPage_TransFormWithClip:[["number","number","number"],"boolean"],FPDFPageObj_AddMark:[["number","string"],"number"],FPDFPageObj_CountMarks:[["number"],"number"],FPDFPageObj_CreateNewPath:[["number","number"],"number"],FPDFPageObj_CreateNewRect:[["number","number","number","number"],"number"],FPDFPageObj_CreateTextObj:[["number","number","number"],"number"],FPDFPageObj_Destroy:[["number"],null],FPDFPageObj_GetBounds:[["number","number","number","number","number"],"boolean"],FPDFPageObj_GetClipPath:[["number"],"number"],FPDFPageObj_GetDashArray:[["number","number","number"],"boolean"],FPDFPageObj_GetDashCount:[["number"],"number"],FPDFPageObj_GetDashPhase:[["number","number"],"boolean"],FPDFPageObj_GetFillColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_GetIsActive:[["number","number"],"boolean"],FPDFPageObj_GetLineCap:[["number"],"number"],FPDFPageObj_GetLineJoin:[["number"],"number"],FPDFPageObj_GetMark:[["number","number"],"number"],FPDFPageObj_GetMarkedContentID:[["number"],"number"],FPDFPageObj_GetMatrix:[["number","number"],"boolean"],FPDFPageObj_GetRotatedBounds:[["number","number"],"boolean"],FPDFPageObj_GetStrokeColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_GetStrokeWidth:[["number","number"],"boolean"],FPDFPageObj_GetType:[["number"],"number"],FPDFPageObj_HasTransparency:[["number"],"boolean"],FPDFPageObj_NewImageObj:[["number"],"number"],FPDFPageObj_NewTextObj:[["number","string","number"],"number"],FPDFPageObj_RemoveMark:[["number","number"],"boolean"],FPDFPageObj_SetBlendMode:[["number","string"],null],FPDFPageObj_SetDashArray:[["number","number","number","number"],"boolean"],FPDFPageObj_SetDashPhase:[["number","number"],"boolean"],FPDFPageObj_SetFillColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_SetIsActive:[["number","boolean"],"boolean"],FPDFPageObj_SetLineCap:[["number","number"],"boolean"],FPDFPageObj_SetLineJoin:[["number","number"],"boolean"],FPDFPageObj_SetMatrix:[["number","number"],"boolean"],FPDFPageObj_SetStrokeColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_SetStrokeWidth:[["number","number"],"boolean"],FPDFPageObj_Transform:[["number","number","number","number","number","number","number"],null],FPDFPageObj_TransformClipPath:[["number","number","number","number","number","number","number"],null],FPDFPageObj_TransformF:[["number","number"],"boolean"],FPDFPageObjMark_CountParams:[["number"],"number"],FPDFPageObjMark_GetName:[["number","number","number","number"],"boolean"],FPDFPageObjMark_GetParamBlobValue:[["number","string","number","number","number"],"boolean"],FPDFPageObjMark_GetParamIntValue:[["number","string","number"],"boolean"],FPDFPageObjMark_GetParamKey:[["number","number","number","number","number"],"boolean"],FPDFPageObjMark_GetParamStringValue:[["number","string","number","number","number"],"boolean"],FPDFPageObjMark_GetParamValueType:[["number","string"],"number"],FPDFPageObjMark_RemoveParam:[["number","number","string"],"boolean"],FPDFPageObjMark_SetBlobParam:[["number","number","number","string","number","number"],"boolean"],FPDFPageObjMark_SetIntParam:[["number","number","number","string","number"],"boolean"],FPDFPageObjMark_SetStringParam:[["number","number","number","string","string"],"boolean"],FPDFPath_BezierTo:[["number","number","number","number","number","number","number"],"boolean"],FPDFPath_Close:[["number"],"boolean"],FPDFPath_CountSegments:[["number"],"number"],FPDFPath_GetDrawMode:[["number","number","number"],"boolean"],FPDFPath_GetPathSegment:[["number","number"],"number"],FPDFPath_LineTo:[["number","number","number"],"boolean"],FPDFPath_MoveTo:[["number","number","number"],"boolean"],FPDFPath_SetDrawMode:[["number","number","boolean"],"boolean"],FPDFPathSegment_GetClose:[["number"],"boolean"],FPDFPathSegment_GetPoint:[["number","number","number"],"boolean"],FPDFPathSegment_GetType:[["number"],"number"],FPDFSignatureObj_GetByteRange:[["number","number","number"],"number"],FPDFSignatureObj_GetContents:[["number","number","number"],"number"],FPDFSignatureObj_GetDocMDPPermission:[["number"],"number"],FPDFSignatureObj_GetReason:[["number","number","number"],"number"],FPDFSignatureObj_GetSubFilter:[["number","number","number"],"number"],FPDFSignatureObj_GetTime:[["number","number","number"],"number"],FPDFText_ClosePage:[["number"],null],FPDFText_CountChars:[["number"],"number"],FPDFText_CountRects:[["number","number","number"],"number"],FPDFText_FindClose:[["number"],null],FPDFText_FindNext:[["number"],"boolean"],FPDFText_FindPrev:[["number"],"boolean"],FPDFText_FindStart:[["number","number","number","number"],"number"],FPDFText_GetBoundedText:[["number","number","number","number","number","number","number"],"number"],FPDFText_GetCharAngle:[["number","number"],"number"],FPDFText_GetCharBox:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetCharIndexAtPos:[["number","number","number","number","number"],"number"],FPDFText_GetCharIndexFromTextIndex:[["number","number"],"number"],FPDFText_GetCharOrigin:[["number","number","number","number"],"boolean"],FPDFText_GetFillColor:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetFontInfo:[["number","number","number","number","number"],"number"],FPDFText_GetFontSize:[["number","number"],"number"],FPDFText_GetFontWeight:[["number","number"],"number"],FPDFText_GetLooseCharBox:[["number","number","number"],"boolean"],FPDFText_GetMatrix:[["number","number","number"],"boolean"],FPDFText_GetRect:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetSchCount:[["number"],"number"],FPDFText_GetSchResultIndex:[["number"],"number"],FPDFText_GetStrokeColor:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetText:[["number","number","number","number"],"number"],FPDFText_GetTextIndexFromCharIndex:[["number","number"],"number"],FPDFText_GetTextObject:[["number","number"],"number"],FPDFText_GetUnicode:[["number","number"],"number"],FPDFText_HasUnicodeMapError:[["number","number"],"number"],FPDFText_IsGenerated:[["number","number"],"number"],FPDFText_IsHyphen:[["number","number"],"number"],FPDFText_LoadCidType2Font:[["number","number","number","string","number","number"],"number"],FPDFText_LoadFont:[["number","number","number","number","boolean"],"number"],FPDFText_LoadPage:[["number"],"number"],FPDFText_LoadStandardFont:[["number","string"],"number"],FPDFText_SetCharcodes:[["number","number","number"],"boolean"],FPDFText_SetText:[["number","number"],"boolean"],FPDFTextObj_GetFont:[["number"],"number"],FPDFTextObj_GetFontSize:[["number","number"],"boolean"],FPDFTextObj_GetRenderedBitmap:[["number","number","number","number"],"number"],FPDFTextObj_GetText:[["number","number","number","number"],"number"],FPDFTextObj_GetTextRenderMode:[["number"],"number"],FPDFTextObj_SetTextRenderMode:[["number","number"],"boolean"],PDFiumExt_CloseFileWriter:[["number"],null],PDFiumExt_CloseFormFillInfo:[["number"],null],PDFiumExt_ExitFormFillEnvironment:[["number"],null],PDFiumExt_GetFileWriterData:[["number","number","number"],"number"],PDFiumExt_GetFileWriterSize:[["number"],"number"],PDFiumExt_Init:[[],null],PDFiumExt_InitFormFillEnvironment:[["number","number"],"number"],PDFiumExt_OpenFileWriter:[[],"number"],PDFiumExt_OpenFormFillInfo:[[],"number"],PDFiumExt_SaveAsCopy:[["number","number"],"number"]};async function go($){const r={pdfium:$};for(const n in ht){const e=n,i=ht[e][0],u=ht[e][1];r[e]=$.cwrap(n,u,i)}return r}async function ho($){const r=await Po($);return go(r)}async function Do($,r){const e=await(await fetch($)).arrayBuffer(),i=await ho({wasmBinary:e});return new _o(i,{logger:r})}export{Do as createPdfiumEngine};
